"use strict";async function fetchBody(t){let e=await fetch(t);return await e.text()}async function postData(t,e={}){let i=new URLSearchParams(e);return(await fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer",body:i})).json()}class CTimeChecker{constructor(){this._startTime=(new Date).getTime(),this._stopTime=(new Date).getTime()}startChecker(){this._startTime=(new Date).getTime()}stopChecker(){return this._stopTime=(new Date).getTime(),(this._stopTime-this._startTime)/1e3}static startChecker(){CTimeChecker.sc=(new Date).getTime()}static stopChecker(){return CTimeChecker.ed=(new Date).getTime(),(CTimeChecker.ed-CTimeChecker.sc)/1e3}}var ELanguageStringKind,ETreeItemState,EPositionAlign,EPositionUnit,EFitMode;!function(t){t[t.WORD=0]="WORD",t[t.SENTENCE=1]="SENTENCE"}(ELanguageStringKind||(ELanguageStringKind={}));class CLanguage{static get localCode(){return CLanguage._localCode}static set localCode(t){this._localCode!=t&&(this._localCode=t,this.doChangeCountry())}static doChangeCountry(){console.log("change country",this._localCode);for(let t=0;t<CSystem.controls.length;t++){CSystem.controls.getRow(0).get(0).asObject.doChangeCountry(CLanguage._localCode)}}static count(){return 104}static getLanguage(t){return{code:this._codes[t],name:this._names[t],localName:this._localNames[t]}}static getLanguageFromCode(t){let e=-1;for(let i=0;i<this._codes.length;i++)if(t==this._codes[i]){e=i;break}return-1==e?void 0:{code:this._codes[e],name:this._names[e],localName:this._localNames[e]}}static getLanguageFromCountry(t){let e=-1;for(let i=0;i<this._names.length;i++)if(t==this._names[i]){e=i;break}return-1==e?void 0:{code:this._codes[e],name:this._names[e],localName:this._localNames[e]}}static loadDictionary(t){this._dictionary.clear();for(let e=0;e<t.length;e++)this._dictionary.set(t[e].key,t[e].value)}static getText(t){return this._dictionary.get(t)}}CLanguage._localCode="en",CLanguage._dictionary=new Map,CLanguage._codes=["ko","en","gl","gu","el","nl","ne","no","da","de","lo","lv","la","ru","ro","lb","lt","mr","mi","mk","mg","ml","ms","mt","mn","hmn","my","eu","vi","be","bn","bs","bg","sm","sr","ceb","st","so","sn","su","sw","sv","gd","es","sk","sl","sd","si","ar","hy","is","ht","ga","az","af","sq","am","et","eo","yo","ur","uz","uk","cy","ig","yi","it","id","ja","jw","ka","zu","zh_ch","zh_tw","ny","cs","kk","ca","kn","co","xh","ku","hr","km","ky","tl","ta","tg","th","tr","te","ps","pa","fa","pt","pl","fr","fy","fi","haw","ha","hu","iw","hi"],CLanguage._names=["Korean","English","Galician","Gujarati","Greek","Dutch","Nepali","Norwegian","Danish","German","Lao","Latvian","Latin","Russian","Romanian","Luxembourgish","Lithuanian","Marathi","Maori","Macedonian","Malagasy","Malayalam","Malay","Maltese","Mongolian","Mongolian","Myanmar(Burmese)","Basque","Vietnamese","Belarusian","Bengali","Bosnian","Bulgarian","Samoan","Serbian","CebuAno","Sesotho","Somali","Shona","Sundar","Swahili","Swedish","ScottishGaelic","Spanish","Slovak","Slovenian","Sindhi","Sinhalese","Arabic","Armenian","Icelandic","Haitian","Irish","Azerbaijani","Afrikaans","Albanian","Amharic","Estonian","Esperanto","Yoruba","Urdu","Uzbek","Ukrainian","Welsh","Igbo","Yiddish","Italian","Indonesian","Japanese","Javanese","Georgian","Zulu","Chinese(Simplified)","Chinese(Traditional)","Chewara","Czech","Kazakh","Catalan","Kannada","Corsican","Cosa","Kurdish","Croatian","Khmer","Kyrgyz","Tagalog","Tamil","Tajik","Thai","Turkish","Telugu","Pashto","Punjabi","Persian","Portuguese","Polish","French","Frisian","Finnish","HAWEI","Hausa","Hungarian","Hebrew","Hindi"],CLanguage._localNames=["한국어","English","Galego","ગુજરાતી","Ελληνικά","Nederlands","नेपाली","norsk","dansk","Deutsch","ລາວ","Latviešu valoda","Latine","русский","românesc","Lëtzebuergesch","Lietuvių","मराठी","Maori","Македонски","Malagasy","മലയാളം","Melayu","Malti","Монгол хэл дээр","Mongolian","မြန်မာ (ဗမာ)","Euskal","Tiếng việt","Беларуская","বাঙালি","Bosanski","български","Samoa","Сербиан","Cebu Ano","Sesotho","Somali","Shona","Sundar","Kiswahili","Svenska","Gàidhlig na h-Alba","Español","slovenský","Slovenščina","سنڌي","සිංහල","العربية","Հայերեն","Íslensku","Ayisyen","Gaeilge","Azərbaycan","Afrikaans","shqiptar","አማርኛ","Eesti keel","Esperanto","Yorùbá","اردو","O'zbek","Українська","Cymraeg","Igbo","Yiddish","italiano","Orang indonesia","日本","Jawa","ქართული","Zulu","中文（简体）","中文（繁體）","Chiwara","Česky","Қазақша","Català","ಕನ್ನಡ","Corsa","Cosa","Kurdî","hrvatski","ភាសាខ្មែរ","Kirghiz","Tagalog","தமிழ்","Тоҷикӣ","ไทย","Türk","తెలుగు","پښتو","ਪੰਜਾਬੀ","فارسی","Português","Polski","Le français","Frysk","suomalainen","HAWEI","Hausa","magyar","עברית","हिन्दी"];class CStringUtil{static lpad(t,e,i){if(t.length>=i)return t;let s=(i-t.length)/e.length;for(let i=0;i<s;i++)t=e+t;return t}static rpad(t,e,i){if(t.length>=i)return t;let s=(i-t.length)/e.length;for(let i=0;i<s;i++)t+=e;return t}static strToBase64(t){return btoa(unescape(encodeURIComponent(t)))}static strToUriBase64(t){let e=this.strToBase64(t);return e=this.replaceAll(e,"/","@"),e=this.replaceAll(e,"+","^"),e=this.replaceAll(e,"=","*")}static strToUriBase64Prefix(t,e){let i=this.strToBase64(e);return i=this.replaceAll(i,"/","@"),i=this.replaceAll(i,"+","^"),i=t+";"+(i=this.replaceAll(i,"=","*"))}static base64ToUriBase64(t){let e=this.replaceAll(t,"/","@");return e=this.replaceAll(e,"+","^"),e=this.replaceAll(e,"=","*")}static base64ToUriBase64Prefix(t,e){let i=this.replaceAll(e,"/","@");return i=this.replaceAll(i,"+","^"),i=t+";"+(i=this.replaceAll(i,"=","*"))}static uriBase64ToBase64(t){let e=this.replaceAll(t,"*","=");return e=this.replaceAll(e,"^","+"),e=this.replaceAll(e,"@","/")}static base64ToStr(t){return decodeURIComponent(escape(atob(t)))}static UriBase64ToStr(t){let e=this.replaceAll(t,"*","=");return e=this.replaceAll(e,"^","+"),e=this.replaceAll(e,"@","/"),this.base64ToStr(e)}static setStringToText(t,e){let i="";for(let s of t)""!=i&&(i+=e),i+=s;return i}static setStringFromText(t,e,i){t.clear();let s=e.split(i);for(let e=0;e<s.length;e++)t.add(s[e])}static replaceAll(t,e,i){let s=t.split(e),a="";for(let t=0;t<s.length;t++)0!=t&&(a+=i),a+=s[t];return a}static getTextWidth(t,e){if(null!=CSystem.bufferingContext){t.setFont(CSystem.bufferingContext);let i=e.split("\n"),s=0;for(let t=0;t<i.length;t++)s=CCalc.max(CSystem.bufferingContext.measureText(i[t]).width,s);return s}return-1}static getTextHeight(t,e){let i=e.split("\n");return t.fontSize*i.length}static getTextPathData(t,e){return new Promise(function(t){t("")})}static getTextPathDataEach(t,e){return new Promise(function(t){})}static sheetDataToMap(t){let e=new Map,i={openidx:-1,closeidx:-1,isSearch:!1},s=0,a=0,o="";for(let n=0;n<t.length;n++)o+=t[n],i.isSearch||'"'!=t[n]||'"'!=o?!i.isSearch||'"'!=t[n]||n+1<t.length&&'"'==t[n+1]||n-1>=0&&'"'==t[n-1]?i.isSearch||"\n"!=t[n]?i.isSearch||"\t"!=t[n]?n==t.length-1&&("\r"==o.charAt(o.length-1)&&(o=CStringUtil.replaceAll(o,"\r","")),e.set(s+","+a,o)):("\r"==(o=o.substr(0,o.length-1)).charAt(o.length-1)&&(o=CStringUtil.replaceAll(o,"\r","")),e.set(s+","+a,o),s++,o=""):("\r"==(o=o.substr(0,o.length-1)).charAt(o.length-1)&&(o=CStringUtil.replaceAll(o,"\r","")),e.set(s+","+a,o),a++,s=0,o=""):(i.isSearch=!1,i.closeidx=n,o=o.substr(1,o.length-2),o=CStringUtil.replaceAll(o,'""','"'),n==t.length-1&&("\r"==o.charAt(o.length-1)&&(o=CStringUtil.replaceAll(o,"\r","")),e.set(s+","+a,o))):(i.isSearch=!0,i.openidx=n,n==t.length-1&&("\r"==o.charAt(o.length-1)&&(o=CStringUtil.replaceAll(o,"\r","")),e.set(s+","+a,o)));return e}static sha256(t){return new Promise(function(e){const i=(new TextEncoder).encode(t);crypto.subtle.digest("SHA-256",i).then(t=>{const i=Array.from(new Uint8Array(t)).map(t=>("00"+t.toString(16)).slice(-2)).join("");e(i)})})}}class CDatetime extends Date{get year(){return this.getFullYear()}get month(){return this.getMonth()+1}get day(){return this.getDate()}get dayOfWeek(){return this.getDay()}get yearS(){return this.getFullYear()+""}get monthS(){let t=this.getMonth()+1+"";return 1==t.length&&(t="0"+t),t}get dayS(){let t=this.getDate()+"";return 1==t.length&&(t="0"+t),t}toString(t=!1){return CDatetime.toTimeString(this,t)}getFirstDayDate(t){return null!=t?new CDatetime(t.year,t.month-1):new CDatetime(this.year,this.month-1)}getLastDayDate(t){return null!=t?new CDatetime(t.year,t.month-1,CDatetime.getLastDay(t.year,t.month)):new CDatetime(this.year,this.month-1,CDatetime.getLastDay(this.year,this.month))}getLastDay(){return CDatetime.getLastDay(this.getFullYear(),this.getMonth()+1)}addSecond(t){this.setSeconds(this.getSeconds()+t)}addMinute(t){this.setMinutes(this.getMinutes()+t)}addHour(t){this.setHours(this.getHours()+t)}addDay(t){this.setDate(this.getDate()+t)}addMonth(t){this.setMonth(this.getMonth()+t)}addYear(t){this.setFullYear(this.getFullYear()+t)}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static isValidMonth(t){return t>=1&&t<=12}static isValidDay(t,e,i){if(!this.isValidMonth(e))return!1;let s=new Array(31,28,31,30,31,30,31,31,30,31,30,31);return(t%4==0&&t%100!=0||t%400==0)&&(s[1]=29),i>=1&&i<=s[e-1]}static getLastDay(t,e){let i=new Array(31,28,31,30,31,30,31,31,30,31,30,31);return(t%4==0&&t%100!=0||t%400==0)&&(i[1]=29),i[e-1]}static toTimeString(t,e=!1,i=!1){let s=t.getFullYear()+"",a=t.getMonth()+1+"",o=t.getDate()+"",n=t.getHours()+"",r=t.getMinutes()+"",A=t.getSeconds()+"",h=t.getMilliseconds()+"";return 1==(""+a).length&&(a="0"+a),1==(""+o).length&&(o="0"+o),1==(""+n).length&&(n="0"+n),1==(""+r).length&&(r="0"+r),1==(""+A).length&&(A="0"+A),1==(""+h).length&&(h="00"+h),2==(""+h).length&&(h="0"+h),e?s+"-"+a+"-"+o+" "+n+":"+r+":"+A+"."+h:s+""+a+o+n+r+A+h}static getCurrentTime(){return this.toTimeString(new Date)}static getNowYear(){return this.getCurrentTime().substr(0,4)}static getNowMonth(){return this.getCurrentTime().substr(4,2)}static getNowDay(){return this.getCurrentTime().substr(6,2)}static getNowHour(){return this.getCurrentTime().substr(8,2)}static getNowMinute(){return this.getCurrentTime().substr(10,2)}static getNowSecond(){return this.getCurrentTime().substr(12,2)}static getDayOfWeek(t){return t.getDay()}static dateToYYYYMMDD(t,e=!1){let i=t.getFullYear()+"",s=t.getMonth()+1+"",a=t.getDate()+"";return 1==(""+s).length&&(s="0"+s),1==(""+a).length&&(a="0"+a),e?i+"-"+s+"-"+a:i+""+s+a}static getYYYYMMDD(t=!1){let e=new Date,i=e.getFullYear()+"",s=e.getMonth()+1+"",a=e.getDate()+"";return 1==(""+s).length&&(s="0"+s),1==(""+a).length&&(a="0"+a),t?i+"-"+s+"-"+a:i+""+s+a}static getYYYYMMDDHHMMSS(t=!1){let e=new Date,i=e.getFullYear()+"",s=e.getMonth()+1+"",a=e.getDate()+"",o=e.getHours()+"",n=e.getMinutes()+"",r=e.getSeconds()+"";return 1==(""+s).length&&(s="0"+s),1==(""+a).length&&(a="0"+a),1==(""+o).length&&(o="0"+o),1==(""+n).length&&(n="0"+n),1==(""+r).length&&(r="0"+r),t?i+"-"+s+"-"+a+" "+o+":"+n+":"+r:i+""+s+a+o+n+r}}class CHSLA{constructor(t,e,i,s=1){this.h=t,this.s=e,this.l=i,this.a=s}toColor(){return"hsla("+this.h+","+CCalc.cr(100,0,1,this.s,2)+"%,"+CCalc.cr(100,0,1,this.l,2)+"%,"+this.a+")"}}class CRGBA{constructor(t,e,i,s=1){this.r=t,this.g=e,this.b=i,this.a=s}toColor(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}static getColor(t,e,i,s=1){return new CRGBA(t,e,i,s).toColor()}}class CColor{constructor(t){if(this.r=0,this.g=0,this.b=0,this.a=0,-1!=t.indexOf("#"))3==(t=t.replace(/^\s*#|\s*$/g,"")).length&&(t=t.replace(/(.)/g,"$1$1")),this.r=parseInt(t.substr(0,2),16),this.g=parseInt(t.substr(2,2),16),this.b=parseInt(t.substr(4,2),16),this.a=1;else if(-1!=t.indexOf("rgb"))if(-1!=t.indexOf("a")){let e=(t=t.replace(" ","").replace("rgba(","").replace(")","")).split(",");this.r=parseInt(e[0]),this.g=parseInt(e[1]),this.b=parseInt(e[2]),this.a=parseFloat(e[3])}else{let e=(t=t.replace(" ","").replace("rgb(","").replace(")","")).split(",");this.r=parseInt(e[0]),this.g=parseInt(e[1]),this.b=parseInt(e[2]),this.a=1}else if(-1!=t.indexOf("hsl"))if(-1!=t.indexOf("a")){let e=(t=t.replace(" ","").replace("hsla(","").replace(")","")).split(","),i=new CHSLA(parseFloat(e[0]),CCalc.cr(1,0,100,parseFloat(e[1].replace("%","")),2),CCalc.cr(1,0,100,parseFloat(e[2].replace("%","")),2),parseFloat(e[3])),s=CColor.hslToRGB(i);this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a}else{let e=(t=t.replace(" ","").replace("hsl(","").replace(")","")).split(","),i=new CHSLA(parseFloat(e[0]),CCalc.cr(1,0,100,parseFloat(e[1].replace("%","")),2),CCalc.cr(1,0,100,parseFloat(e[2].replace("%","")),2)),s=CColor.hslToRGB(i);this.r=s.r,this.g=s.g,this.b=s.b,this.a=1}else this.r=255,this.g=255,this.b=255,this.a=1}toColor(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}toHSLAColor(){return CColor.rgbToHSL(new CRGBA(this.r,this.g,this.b,this.a)).toColor()}toHSLA(){return CColor.rgbToHSL(new CRGBA(this.r,this.g,this.b,this.a))}toRGBA(){return new CRGBA(this.r,this.g,this.b,this.a)}toUint8Array(){let t=new Uint8Array(4);return t[0]=this.r,t[1]=this.g,t[2]=this.b,t[3]=Math.round(CCalc.cr(1,this.a,255,0,4)),t}fromUint8Array(t){this.r=t[0],this.g=t[1],this.b=t[2],this.a=CCalc.cr(1,0,255,t[3],2)}static changeHue(t,e){let i=new CColor(t),s=this.rgbToHSL(new CRGBA(i.r,i.g,i.b,i.a));return s.h+=e,s.h>360?s.h-=360:s.h<0&&(s.h+=360),this.hslToRGB(s).toColor()}static rgbToHSL(t){let e=t.r/255,i=t.g/255,s=t.b/255,a=t.a,o=Math.max(e,i,s),n=Math.min(e,i,s),r=o-n,A=(o+n)/2,h=0,g=0;return(h=0==r?0:o==e?(i-s)/r%6*60:o==i?60*((s-e)/r+2):60*((e-i)/r+4))<0&&(h=360+h),g=0==r?0:r/(1-Math.abs(2*A-1)),new CHSLA(h,g,A,a)}static hslToRGB(t){var e,i,s,a=t.h,o=t.s,n=t.l,r=t.a,A=(1-Math.abs(2*n-1))*o,h=A*(1-Math.abs(a/60%2-1)),g=n-A/2;return a<60?(e=A,i=h,s=0):a<120?(e=h,i=A,s=0):a<180?(e=0,i=A,s=h):a<240?(e=0,i=h,s=A):a<300?(e=h,i=0,s=A):(e=A,i=0,s=h),e=this.normalize_rgb_value(e,g),i=this.normalize_rgb_value(i,g),s=this.normalize_rgb_value(s,g),new CRGBA(e,i,s,r)}static normalize_rgb_value(t,e){return(t=Math.floor(255*(t+e)))<0&&(t=0),t}static rgbToHex(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)}static randomColor(t=0,e=255){return"rgba("+CCalc.getRandom(t,e)+","+CCalc.getRandom(t,e)+","+CCalc.getRandom(t,e)+",1)"}}class CSequence{static getSequence(t=""){let e="",i=CSequence._map.get(t);return null==i?(CSequence._map.set(t,1),e=t+"1"):(i++,CSequence._map.set(t,i),e=t+i),e}}CSequence._map=new Map;class CCalc{static cr(t,e,i,s,a){let o=0;switch(a){case 1:if(0==s)throw new Error("zero devide");o=e*i/s;break;case 2:if(0==i)throw new Error("zero devide");o=t*s/i;break;case 3:if(0==e)throw new Error("zero devide");o=t*s/e;break;case 4:if(0==t)throw new Error("zero devide");o=e*i/t}return o}static min(t,e){return t<e?t:e}static max(t,e){return t>e?t:e}static minMax(t,e){return t<e?{min:t,max:e}:{min:e,max:t}}static minMaxPoint(t,e){let i=CCalc.minMax(t.x,e.x),s=CCalc.minMax(t.y,e.y);return{min:new CPoint(i.min,s.min),max:new CPoint(i.max,s.max)}}static crRange2Value(t,e,i,s,a){return(a-s)*((i-t)/(e-t))+s}static getNowValue(t,e,i){return(e-t)*i+t}static getRandom(t,e){return(e-t)*Math.random()+t}static sind(t){let e=t*(Math.PI/180);return Math.sin(e)}static sindy(t,e){return this.sind(t)*e}static cosd(t){let e=t*(Math.PI/180);return Math.cos(e)}static cosdx(t,e){return this.cosd(t)*e}static isIn(t,e){let i=!1;for(let s=0;s<e.length;s++)if(t==e[s]){i=!0;break}return i}}class CByte{static numberToUint8Array(t){let e=new Uint8Array(8);return new DataView(e.buffer,0).setFloat64(0,t),e}static Uint8ArrayToNumber(t){return new DataView(t.buffer,0).getFloat64(0)}static stringToUint8ArrayWithLength(t){let e=(new TextEncoder).encode(t),i=new Uint8Array(8),s=new Uint8Array(e.length+i.length);new DataView(s.buffer,0).setFloat64(0,e.length);for(let t=0;t<e.length;t++)s[t+8]=e[t];return s}static Uint8ArrayToStringWithLength(t){let e=new DataView(t.buffer).getFloat64(0),i=new Uint8Array(e);for(let s=0;s<e;s++)i[s]=t[s+8];return new TextDecoder("utf-8").decode(i)}static stringToUint8Array(t){return(new TextEncoder).encode(t)}static Uint8ArrayToString(t){return new TextDecoder("utf-8").decode(t)}static booleanToUint8Array(t){let e=new Uint8Array(1);return e[0]=t?1:0,e}static Uint8ArrayToBoolean(t){return 1==t[0]}static colorToUint8Array(t){return new CColor(t).toUint8Array()}static Uint8ArrayToColor(t){let e=new CColor("#000000");return e.fromUint8Array(t),e.toColor()}static UintToUint8Array(t){let e=t.toString(16);e.length%2==1&&(e=CStringUtil.lpad(e,"0",e.length+1));let i=new Uint8Array(e.length/2),s=0;for(let t=0;t<e.length;t++)t%2==0&&(i[s]=parseInt(e.substr(t,2),16),s++);return i}static Uint8ArrayToUint(t){let e="";for(let i=0;i<t.length;i++)e+=CStringUtil.lpad(t[i].toString(16),"0",2);return parseInt(e,16)}static bufferCopy(t,e,i){let s=new Uint8Array(i);for(let a=0;a<i;a++)s[a]=t[a+e];return s}static booleansToNumber(t){let e=0,i="";for(let e=0;e<t.length;e++)t[e]?i+="1":i+="0";return i="1"+i,e=parseInt(i,2)}static numberToBooleans(t){let e=t.toString(2),i=[];for(let t=1;t<e.length;t++)"1"==e[t]?i[t-1]=!0:i[t-1]=!1;return i}static number4bitToNumber(t){let e=0,i="";for(let e=0;e<t.length;e++){let s=t[e];s>15&&(s%=16),i+=s.toString(16)}return i="1"+i,e=parseInt(i,16)}static numberTo4bitNumbers(t){let e=t.toString(16),i=[];for(let t=1;t<e.length;t++)i[t-1]=parseInt(e[t],16);return i}static number1byteToNumber(t){let e=new Uint8Array(8);for(let i=0;i<8;i++){let s=t[i];s>255&&(s%=256),e[i]=s}return this.Uint8ArrayToNumber(e)}static numberTo1byteNumbers(t){let e=this.numberToUint8Array(t),i=[];for(let t=0;t<e.length;t++)i[t]=e[t];return i}static bufferToHexString(t){let e="";for(let i=0;i<t.length;i++)e+=CStringUtil.lpad(t[i].toString(16),"0",2);return e}static hexStringToBuffer(t){let e=new Uint8Array(t.length/2),i=0;for(let s=0;s<t.length;s++)s%2==0&&(e[i]=parseInt(t.substr(s,2),16),i++);return e}static bufferToBase64(t){var e=t.byteLength;let i="";for(var s=0;s<e;s++)i+=String.fromCharCode(t[s]);return btoa(i)}static base64ToBuffer(t){let e=atob(t),i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let t=0;t<e.length;t++)s[t]=e.charCodeAt(t);return s}}class CStream{constructor(){this._data=new Array,this._position=0}get data(){return this._data}set data(t){this._data=t}get position(){return this._position}set position(t){this._position=t}get size(){let t=0;for(let e=0;e<this._data.length;e++)t+=this._data[e].length;return t}get buffer(){if(null==this._buffer||this._buffer.length!=this.size){this._buffer=new Uint8Array(this.size);let t=0;for(let e=0;e<this._data.length;e++)for(let i=0;i<this._data[e].length;i++)this._buffer[t]=this._data[e][i],t++}return this._buffer}putNumber(t){let e=new Uint8Array(8);new DataView(e.buffer,0).setFloat64(0,t),this._data.push(e)}putDate(t){this.putNumber(t.getTime())}putString(t){let e=(new TextEncoder).encode(t);this.putNumber(e.length),this._data.push(e)}putBoolean(t){let e=new Uint8Array(1);e[0]=t?1:0,this._data.push(e)}putStream(t){this.putNumber(t.size);let e=new Uint8Array(t.size),i=t.position;t.first();for(let i=0;i<t.size;i++)e[i]=t.buffer[i];t.position=i,this._data.push(e)}first(){this._position=0}getNumber(){let t=0;return t=new DataView(this.buffer.buffer).getFloat64(this._position),this._position+=8,t}getDate(){return new Date(this.getNumber())}getString(){let t=this.getNumber(),e=new Uint8Array(t);for(let i=0;i<t;i++)e[i]=this.buffer[this._position],this._position++;return new TextDecoder("utf-8").decode(e)}getBoolean(){let t=1==this.buffer[this._position];return this._position++,t}getStream(){let t=this.getNumber(),e=new Uint8Array(t);for(let i=0;i<t;i++)e[i]=this.buffer[this._position],this._position++;let i=new CStream;return i.fromBuffer(e),i}fromBuffer(t){this.data=[];let e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t[i];this.data.push(e)}fromArrayBuffer(t){this.data=[];let e=new Uint8Array(t.byteLength);for(let i=0;i<t.byteLength;i++){let s=new DataView(t);e[i]=s.getUint8(i)}this.data.push(e)}toBlob(){return new Blob([this.buffer])}async fromBlob(t){this.fromArrayBuffer(await t.arrayBuffer())}copyFrom(t){this.fromBuffer(t.buffer)}toBase64(){return CByte.bufferToBase64(this.buffer)}toHexString(){return CByte.bufferToHexString(this.buffer)}fromBase64(t){this._data=[],this._position=0;let e=CByte.base64ToBuffer(t);this._data.push(e)}saveAsLocalFile(t){CSystem.saveBlobAsFile(this.toBlob(),t)}loadFromLocalFile(t){let e=this;CSystem.loadFromFile(function(i){i.arrayBuffer().then(function(i){e.fromArrayBuffer(i),t(e)})})}}class CQueue{constructor(t=-1){this._idx=-1,this._position=-1,this._data=new Map,this._limitCount=-1,this._limitCount=t}get limitCount(){return this._limitCount}set limitCount(t){if(this._limitCount=t,-1!=t){let e=t-this._data.size;for(let t=0;t<e;t++)this.pop()}}get count(){return this._data.size}doToData(t){[]}push(t){return this._idx++,this._data.set(this._idx,t),-1!=this._limitCount&&this._data.size>this._limitCount&&this.pop(),this._idx}pop(){if(0==this._data.size)throw new Error("empry data");this._position++;let t=this._data.get(this._position);if(this._data.delete(this._position),null!=t)return t;throw new Error("pop is undefined")}view(t){let e=this._data.get(this._position+t+1);if(null!=e)return e;throw new Error("pop is undefined")}loopView(t){for(let e=0;e<this.count;e++)t(this.view(e))}clear(){this._data.clear(),this._idx=-1,this._position=-1}}class CEnum{static toArray(t){let e=Object.keys(t),i=new Array;for(let t=0;t<e.length;t++){let s=parseInt(e[t]);isNaN(s)&&i.push(e[t])}return i}}class CClass{get className(){return this.constructor.name}is(t){return this instanceof t}as(){return this}getProperty(t){return new Function("obj","return obj."+t)(this)}setProperty(t,e){if("string"==typeof this.getProperty(t)){new Function("obj","obj."+t+" = `"+e+"`")(this,e)}else{new Function("obj","obj."+t+" = "+e)(this,e)}}instanceOf(t){return new Function("obj","return obj instanceof "+t)(this)}addProperties(){let t=new Array;return t.push({instance:this.className,propertyName:"className",readOnly:!0,enum:[]}),t}static hasFunction(t,e){return null!=t[e]&&t[e]instanceof Function}static objectUndefined(t,e){t[e]=void 0}static createClass(t,e,i){let s="";for(let t=0;t<e.length;t++)s+=0==t?e[t]:","+e[t];return i(new Function(...e,"return new "+t+"("+s+");"))}static instanceOf(t,e){return new Function("obj","return obj instanceof "+e)(t)}static async getClassHash(t){return await CStringUtil.sha256(new Function("return "+t+".toString()")())}}class CDataClass extends CClass{doToData(t){}doFromData(t){}doRemove(){null!=this.onRemove&&this.onRemove(this)}toData(){let t={};return this.doToData(t),t}fromData(t){this.doFromData(t)}equal(t){return JSON.stringify(this.toData())==JSON.stringify(t.toData())}copyFrom(t){this.fromData(t.toData())}remove(){this.doRemove()}static putData(t,e,i,s,a=!1){a?JSON.stringify(i)!=JSON.stringify(s)&&(t[e]=i):i!=s&&(t[e]=i)}static getData(t,e,i,s=!1){return null!=t[e]?s?JSON.stringify(t[e])!=JSON.stringify(i)?t[e]:i:t[e]!=i?t[e]:i:i}}class CResourceClass extends CDataClass{constructor(){super(...arguments),this.__resource="",this._resource=""}get resource(){return this._resource}set resource(t){""!=t&&console.log(t),this._resource!=t&&(this._resource=t,""!=t&&(this.__resource=t,CSystem.resourcesLoad?this.doResource():CSystem.requestResources.push(this)))}get lastResourceName(){return this.__resource}doToData(t){super.doToData(t),CDataClass.putData(t,"resource",this._resource,"")}doFromData(t){super.doFromData(t),this.resource=CDataClass.getData(t,"resource","")}doResource(){let t=CSystem.resources.get(this._resource);null!=t&&(this.fromData(t),null!=this.onResource&&this.onResource(this))}}class CNotifyChangeObject extends CResourceClass{constructor(){super(...arguments),this._useChangeEvent=!0}get useChangeEvent(){return this._useChangeEvent}set useChangeEvent(t){this._useChangeEvent=t}}class CNotifyChangeNotifyObject extends CNotifyChangeObject{doChange(){null!=this.onChange&&this.useChangeEvent&&this.onChange(this)}}class CNotifyChangeKindObject extends CNotifyChangeObject{doChange(t){null!=this.onChange&&this.useChangeEvent&&this.onChange(this,t)}}class ArrayString extends Array{}class ArrayNumber extends Array{}class CList extends CNotifyChangeKindObject{constructor(){super(...arguments),this.__data=new Array}static get CON_CHANGE_ADD(){return"a"}static get CON_CHANGE_INSERT(){return"i"}static get CON_CHANGE_DELETE(){return"d"}static get CON_CHANGE_SET(){return"s"}get length(){return this.__data.length}set length(t){this.__data.length=t}get array(){let t=new Array;for(let e=0;e<this.__data.length;e++)t.push(this.get(e));return t}doRemove(){this.__data=[],super.doRemove()}add(t){this.__data.push(t),this.doChange(CList.CON_CHANGE_ADD)}insert(t,e){this.__data.splice(t,0,e),this.doChange(CList.CON_CHANGE_INSERT)}delete(t,e=1){let i=this.__data.length>t&&t>=0;return this.__data.splice(t,e),this.doChange(CList.CON_CHANGE_DELETE),i}get(t){return this.__data[t]}set(t,e){this.__data[t]=e,this.doChange(CList.CON_CHANGE_SET)}deleteAll(){for(let t=this.__data.length-1;t>=0;t--)this.delete(t)}clear(){this.__data=[],this.doChange(CList.CON_CHANGE_DELETE)}sort(t){return this.__data.sort(t)}swap(t,e){if(t<0||t>this.length-1)throw new Error("invalid index1");if(e<0||e>this.length-1)throw new Error("invalid index2");let i=this.get(e);this.set(e,this.get(t)),this.set(t,i)}toData(){let t=[];return this.doToData(t),t}addProperties(){let t=super.addProperties();for(let e=0;e<this.length;e++)t.push({instance:this.get(e),propertyName:"__data["+e+"]",readOnly:!1,enum:[]});return t}}class CStringList extends CList{doToData(t){super.doToData(t);for(let e=0;e<this.length;e++)t.push(this.get(e))}doFromData(t){super.doFromData(t),this.clear();for(let e=0;e<t.length;e++)this.add(t[e])}}class CNumberList extends CList{doToData(t){super.doToData(t);for(let e=0;e<this.length;e++)t.push(this.get(e))}doFromData(t){super.doFromData(t),this.clear();for(let e=0;e<t.length;e++)this.add(t[e])}}class CMap extends CNotifyChangeObject{constructor(){super(...arguments),this.__data=new Map}static get CON_CHANGE_SET(){return"s"}static get CON_CHANGE_DELETE(){return"d"}static get CON_CHANGE_CLEAR(){return"c"}get size(){return this.__data.size}doRemove(){this.__data.clear(),super.doRemove()}doChange(t,e,i){null!=this.onChange&&this.onChange(this,t,e,i)}set(t,e){let i=this.__data.set(t,e);return this.doChange(CMap.CON_CHANGE_SET,t,e),i}get(t){return this.__data.get(t)}delete(t){let e=this.__data.delete(t);return this.doChange(CMap.CON_CHANGE_DELETE,t),e}clear(){this.__data.clear(),this.doChange(CMap.CON_CHANGE_CLEAR)}keys(){return this.__data.keys()}values(){return this.__data.values()}forEach(t){this.__data.forEach(t)}has(t){return this.__data.has(t)}toArray(){let t=new Array;return this.__data.forEach(function(e,i){let s={key:i,value:e};t.push(s)}),t}toData(){let t=[];return this.doToData(t),t}}class CNNMap extends CMap{doToData(t){super.doToData(t),this.forEach(function(e,i){t.push({key:i,value:e})})}doFromData(t){super.doFromData(t),this.clear();for(let e=0;e<t.length;e++)this.set(t[e].key,t[e].value)}}class CSSMap extends CMap{doToData(t){super.doToData(t),this.forEach(function(e,i){t.push({key:i,value:e})})}doFromData(t){super.doFromData(t),this.clear();for(let e=0;e<t.length;e++)this.set(t[e].key,t[e].value)}}class CSet extends CNotifyChangeKindObject{constructor(){super(...arguments),this.__data=new Set}static get CON_CHANGE_ADD(){return"a"}static get CON_CHANGE_DELETE(){return"d"}static get CON_CHANGE_CLEAR(){return"c"}get size(){return this.__data.size}doRemove(){this.__data.clear(),super.doRemove()}add(t){let e=this.__data.add(t);return this.doChange(CSet.CON_CHANGE_ADD),e}delete(t){let e=this.__data.delete(t);return this.doChange(CSet.CON_CHANGE_DELETE),e}clear(){this.__data.clear(),this.doChange(CSet.CON_CHANGE_CLEAR)}has(t){return this.__data.has(t)}forEach(t){this.__data.forEach(t)}toArray(){let t=new Array;return this.__data.forEach(function(e){t.push(e)}),t}toData(){let t=[];return this.doToData(t),t}}class CNotifyQueue extends CNotifyChangeKindObject{static get CON_CHANGE_PUSH(){return"p"}static get CON_CHANGE_POP(){return"po"}static get CON_CHANGE_CLEAR(){return"c"}static get CON_CHANGE_LIMIT_COUNT(){return"l"}get limitCount(){return this._queue.limitCount}set limitCount(t){t!=this._queue.limitCount&&(this._queue.limitCount=t,this.doChange(CNotifyQueue.CON_CHANGE_LIMIT_COUNT))}get count(){return this._queue.count}constructor(t=-1){super(),this._queue=new CQueue(t)}doRemove(){this._queue.clear(),super.doRemove()}push(t){let e=this._queue.push(t);return this.doChange(CNotifyQueue.CON_CHANGE_PUSH),e}pop(){let t=this._queue.pop();return this.doChange(CNotifyQueue.CON_CHANGE_POP),t}view(t){return this._queue.view(t)}loopView(t){for(let e=0;e<this.count;e++)t(this.view(e))}clear(){this._queue.clear(),this.doChange(CNotifyQueue.CON_CHANGE_CLEAR)}toData(){let t=[];return this.doToData(t),t}}class CStringSet extends CSet{doToData(t){super.doToData(t),this.forEach(function(e){t.push(e)})}doFromData(t){super.doFromData(t),this.clear();for(let e=0;e<t.length;e++)this.add(t[e])}}class CVariable extends CNotifyChangeNotifyObject{get type(){return typeof this._data}get asString(){return this._data+""}set asString(t){t!=this._data&&(this._data=t,this.doChange())}get asNumber(){return this._data}set asNumber(t){t!=this._data&&(this._data=t,this.doChange())}get asBoolean(){return this._data}set asBoolean(t){t!=this._data&&(this._data=t,this.doChange())}get asObject(){return this._data}set asObject(t){t!=this._data&&(this._data=t,this.doChange())}get value(){return this._data}constructor(t){super(),null!=t&&(this._data=t)}doRemove(){this._data=void 0,super.doRemove()}asType(){return this._data}setType(t){t!=this._data&&(this._data=t,this.doChange())}}class CRowData extends CNotifyChangeObject{get length(){return this._data.length}constructor(t){super(),this._data=new Array;let e=this;if(null!=t)for(let i=0;i<t.length;i++){let s=new CVariable(t[i]);s.index=i,s.onChange=function(){e.doChange(s.index,s)},this._data.push(s)}}doToData(t){for(let e=0;e<this._data.length;e++)"object"==typeof this._data[e].value?this._data[e].value instanceof CDataClass&&t.push(this._data[e].value.toData()):t.push(this._data[e].value);console.log(t)}doFromData(t){this._data=[];for(let e=0;e<t.length;e++){let i=new CVariable(t[e]);this._data.push(i)}}doRemove(){this._data=[],super.doRemove()}doChange(t,e){this.useChangeEvent&&null!=this.onChange&&this.onChange(this,t,e)}get(t){return this._data[t]}getValues(){let t=[];for(let e=0;e<this._data.length;e++)t.push(this._data[e].value);return t}toData(){let t=[];return this.doToData(t),t}}class CGridData extends CNotifyChangeObject{static get CON_CHANGE_ADD(){return"a"}static get CON_CHANGE_INSERT(){return"i"}static get CON_CHANGE_DELETE(){return"d"}static get CON_CHANGE_CLEAR(){return"c"}static get CON_CHANGE_SET(){return"s"}static get CON_CHANGE_DATA(){return"da"}get columnCount(){return this._columnCount}get data(){return this._data}get indexes(){return this._indexes}get length(){return this._data.length}constructor(t,e,i){super(),this.__useIndex=!1,this._data=new CList,this._indexes=new CMap;let s=this;if(this._columnCount=t,this._indexColumns=e,this._uniqueColumns=i,null!=this._uniqueColumns){for(let t=0;t<this._uniqueColumns.length;t++){let e=new CMap;this._indexes.set(this._uniqueColumns[t],e)}this._uniqueColumns.length>0&&(this.__useIndex=!0)}if(null!=e){for(let t=0;t<e.length;t++){let i=new CMap;this._indexes.set(e[t],i)}e.length>0&&(this.__useIndex=!0)}this._data.onChange=function(t,e){CList.CON_CHANGE_ADD==e&&s.doChange(CGridData.CON_CHANGE_ADD),CList.CON_CHANGE_INSERT==e&&s.doChange(CGridData.CON_CHANGE_INSERT),CList.CON_CHANGE_DELETE==e&&s.doChange(CGridData.CON_CHANGE_DELETE),CList.CON_CHANGE_SET==e&&s.doChange(CGridData.CON_CHANGE_SET)}}doToData(t){super.doToData(t),CDataClass.putData(t,"columnCount",this._columnCount);let e=new Array;for(let t=0;t<this._data.length;t++)e.push(this._data.get(t).toData());CDataClass.putData(t,"data",e,[],!0),CDataClass.putData(t,"indexColumns",this._indexColumns,void 0),CDataClass.putData(t,"uniqueColumns",this._uniqueColumns,void 0)}doFromData(t){if(super.doFromData(t),this.clear(),this.indexes.clear(),this._columnCount=CDataClass.getData(t,"columnCount",0),this._indexColumns=CDataClass.getData(t,"indexColumns",void 0),this._uniqueColumns=CDataClass.getData(t,"uniqueColumns",void 0),null!=this._uniqueColumns){for(let t=0;t<this._uniqueColumns.length;t++){let e=new CMap;this._indexes.set(this._uniqueColumns[t],e)}this._uniqueColumns.length>0&&(this.__useIndex=!0)}if(null!=this._indexColumns){for(let t=0;t<this._indexColumns.length;t++){let e=new CMap;this._indexes.set(this._indexColumns[t],e)}this._indexColumns.length>0&&(this.__useIndex=!0)}let e=CDataClass.getData(t,"data",[],!0);for(let t=0;t<e.length;t++)this.add(e[t])}doRemove(){this._data.remove(),this._indexes.remove(),this._indexColumns=void 0,this._uniqueColumns=void 0,super.doRemove()}doChange(t,e,i){this.useChangeEvent&&null!=this.onChange&&this.onChange(this,t,e,i)}doAdd(t){let e=this;if(null!=this._uniqueColumns&&this._uniqueColumns.length>0)for(let e=0;e<this._uniqueColumns.length;e++){if(this.findIndexRow(this._uniqueColumns[e],t[this._uniqueColumns[e]]).length>0)throw new Error("column "+this._uniqueColumns[e]+" is duplicated")}let i=new CRowData(t);return i.onChange=function(t,s,a){e.doChange(CGridData.CON_CHANGE_DATA,a,i)},this.__useIndex&&this.addIndex(this._data.length,i),this._data.add(i),this.useChangeEvent&&null!=this.onAdd&&this.onAdd(this,i),i}doInsert(t,e){let i=this;if(null!=this._uniqueColumns&&this._uniqueColumns.length>0)for(let t=0;t<this._uniqueColumns.length;t++){if(this.findIndexRow(this._uniqueColumns[t],e[this._uniqueColumns[t]]).length>0)throw new Error("column "+this._uniqueColumns[t]+" is duplicated")}let s=new CRowData(e);return s.onChange=function(t,e,a){i.doChange(CGridData.CON_CHANGE_DATA,a,s)},this.__useIndex&&this.addIndex(t,s),this._data.insert(t,s),this.useChangeEvent&&null!=this.onInsert&&this.onInsert(this,t,s),s}doDelete(t){let e=this._data.delete(t);this.__useIndex&&e&&this.deleteIndex(t),this.useChangeEvent&&null!=this.onDelete&&this.onDelete(this)}doSet(t,e){let i=this;if(null!=this._uniqueColumns&&this._uniqueColumns.length>0)for(let t=0;t<this._uniqueColumns.length;t++){if(this.findIndexRow(this._uniqueColumns[t],e[this._uniqueColumns[t]]).length>0)throw new Error("column "+this._uniqueColumns[t]+" is duplicated")}let s=new CRowData(e);return s.onChange=function(t,e,a){i.doChange(CGridData.CON_CHANGE_DATA,a,s)},this.__useIndex&&this.setIndex(t,s),this._data.set(t,s),this.useChangeEvent&&null!=this.onSet&&this.onSet(this,t,s),s}doClear(){this._data.clear(),this._indexes.clear(),this.useChangeEvent&&null!=this.onClear&&this.onClear(this)}addIndex(t,e){this._indexes.forEach(function(i,s){let a=e.get(s),o=i.get(a.value);null==o&&(o=new Set,i.set(a.value,o)),o.add({index:t})})}setIndex(t,e){this._indexes.forEach(function(e,i){e.forEach(function(e,i){e.delete({index:t})})}),this.addIndex(t,e)}deleteIndex(t){this._indexes.forEach(function(e,i){let s=new Array;e.forEach(function(e,i){let a;e.forEach(function(e){e.index==t&&(a=e),e.index>t&&e.index--}),e.delete(a),0==e.size&&s.push(i)});for(let t=0;t<s.length;t++)e.delete(s[t])})}add(t){return this.doAdd(t)}insert(t,e){return this.doInsert(t,e)}delete(t){if("number"==typeof t)this.doDelete(t);else for(let e=0;e<t.length;e++)this.doDelete(t[e])}set(t,e){return this.doSet(t,e)}deleteAll(){for(let t=this.length-1;t>=0;t--)this.delete(t)}clear(){this.doClear()}getRow(t){return this._data.get(t)}getRowValues(t){return this._data.get(t).getValues()}getRowIndex(t){let e=-1;for(let i=0;this._data.length;i++)if(this._data[i]==t){e=i;break}return e}cell(t,e){if(e<this._data.length&&t<this._data.get(e).length)return this._data.get(e).get(t)}setCell(t,e,i){if(!(e<this._data.length&&t<this._data.get(e).length))throw new Error("invalid column or row : "+t+","+e);"boolean"==typeof i&&(this._data.get(e).get(t).asBoolean=i),"number"==typeof i&&(this._data.get(e).get(t).asNumber=i),"string"==typeof i&&(this._data.get(e).get(t).asString=i),"object"==typeof i&&(this._data.get(e).get(t).asObject=i)}findIndexRow(t,e){let i=new Array,s=this._indexes.get(t);if(null!=s){let t=s.get(e);null!=t&&t.forEach(function(t){i.push(t.index)})}return i}findIndex(t,e){let i=new Array,s=this.findIndexRow(t,e);for(let t=0;t<s.length;t++)i.push(this._data.get(s[t]));return i}sort(t){return this._data.sort(t)}sortColumn(t,e=!0){return e?this.sort(function(e,i){let s=0;return e.get(t).value>i.get(t).value&&(s=1),e.get(t).value<i.get(t).value&&(s=-1),s}):this.sort(function(e,i){let s=0;return e.get(t).value>i.get(t).value&&(s=-1),e.get(t).value<i.get(t).value&&(s=1),s})}loopColumn(t,e){for(let i=0;i<this.length;i++)e(this.getRow(i).get(t))}}class CTableData extends CGridData{get columnNames(){return this._columnNames}get indexColumnNames(){return this._indexColumnNames}get uniqueColumnNames(){return this._uniqueColumnNames}constructor(t,e,i){function s(e){let i=-1;for(let s=0;s<t.length;s++)if(t[s]==e){i=s;break}return i}let a,o;if(null!=e){a=new Array;for(let t=0;t<e.length;t++){let i=s(e[t]);-1!=i&&a.push(i)}}if(null!=i){o=new Array;for(let t=0;t<i.length;t++){let e=s(i[t]);-1!=e&&o.push(e)}}super(t.length,a,o),this._columnNames=new Map;for(let e=0;e<t.length;e++)this._columnNames.set(t[e],e);this._indexColumnNames=e,this._uniqueColumnNames=i}doToData(t){super.doToData(t);let e=new Array;this._columnNames.forEach(function(t,i){let s={name:i,columnIndex:t};e.push(s)}),CDataClass.putData(t,"columnNames",e,[],!0),CDataClass.putData(t,"indexColumnNames",this._indexColumnNames,void 0),CDataClass.putData(t,"uniqueColumnNames",this._uniqueColumnNames,void 0)}doFromData(t){super.doFromData(t);let e=CDataClass.getData(t,"columnNames",[]);this._columnNames.clear();for(let t=0;t<e.length;t++)this._columnNames.set(e[t].name,e[t].columnIndex);this._indexColumnNames=CDataClass.getData(t,"indexColumnNames",void 0),this._uniqueColumnNames=CDataClass.getData(t,"uniqueColumnNames",void 0)}doRemove(){this._columnNames.clear(),this._indexColumnNames=void 0,this._uniqueColumnNames=void 0,super.doRemove()}cell(t,e){if("string"!=typeof t)return this._data.get(e).get(t);{let i=this._columnNames.get(t);if(null!=i)return this._data.get(e).get(i)}}findIndexRow(t,e){let i,s=new Array;i="string"==typeof t?this._columnNames.get(t):t;let a=this._indexes.get(i);if(null!=a){let t=a.get(e);null!=t&&t.forEach(function(t){s.push(t.index)})}return s}findIndex(t,e){let i,s=new Array;i="string"==typeof t?this._columnNames.get(t):t;let a=this.findIndexRow(i,e);for(let t=0;t<a.length;t++)s.push(this._data.get(a[t]));return s}find(t){let e;for(let i=0;i<t.length&&!(i>0&&0==e.length);i++){let s=this._columnNames.get(t[i].columnName);if(null!=s)if(0==i)e=this.findIndex(s,t[i].value);else for(let a=e.length-1;a>=0;a--){e[a].get(s).value!=t[i].value&&e.splice(a,1)}}return e}}class CFlowItem extends CDataClass{constructor(t){super(),this._id="",this._object=void 0,this._isFinish=!1,this._parent=t}get parent(){return this._parent}get id(){return this._id}set id(t){this._id=t}get isFinish(){return this._isFinish}get object(){return this._object}set object(t){this._object=t}doExecute(){this._isFinish=!1,null!=this.onExecute&&this.onExecute(this)}doFinish(){this._isFinish=!0,this.parent.doItemFinish(this),null!=this.onFinish&&this.onFinish(this)}finish(){this.doFinish()}}class CFlowModel extends CDataClass{constructor(){super(...arguments),this._items=new CSet,this._idMap=new CMap,this._previousItems=new CMap,this._nextItems=new CMap}get items(){return this._items}get previousItems(){return this._previousItems}get nextItems(){return this._nextItems}doCheckPrevious(t){if(this._previousItems.has(t)){let e=this._previousItems.get(t);if(null!=e){let i=!0;e.forEach(function(t){0==t.isFinish&&(i=!1)}),i&&t.doExecute()}}}doItemFinish(t){if(this._nextItems.has(t)){let e=this._nextItems.get(t);if(null!=e){let t=this;e.forEach(function(e){t.doCheckPrevious(e)})}}}doBeforeItemDelete(t){null!=this.onBeforeItemDelete&&this.onBeforeItemDelete(this,t)}getItem(t){return this._idMap.get(t)}addItem(t,e){if(!this._idMap.has(t)){let i=new CFlowItem(this);return i.id=t,null!=e&&(i.onExecute=e),this._items.add(i),this._idMap.set(t,i),i}}deleteItem(t){let e=this._idMap.get(t);if(null!=e){this.doBeforeItemDelete(e),this._previousItems.has(e)&&this._previousItems.delete(e),this._nextItems.has(e)&&this._nextItems.delete(e);for(let t of this._previousItems.values())t.has(e)&&t.delete(e);for(let t of this._nextItems.values())t.has(e)&&t.delete(e);this._items.delete(e),this._idMap.delete(t)}}addLink(t,e){if(null==this._nextItems.get(t)){let i=new CSet;i.add(e),this._nextItems.set(t,i)}else{let i=this._nextItems.get(t);null!=i&&i.add(e)}if(null==this._previousItems.get(e)){let i=new CSet;i.add(t),this._previousItems.set(e,i)}else{let i=this._previousItems.get(e);null!=i&&i.add(t)}}deleteLink(t,e){if(this._previousItems.has(e)){let i=this._previousItems.get(e);null!=i&&i.has(t)&&i.delete(t),this._previousItems.delete(e)}if(this._nextItems.has(t)){let i=this._nextItems.get(t);null!=i&&i.has(e)&&i.delete(e),this._nextItems.delete(t)}}startItems(){let t=new CList,e=this;return this._items.forEach(function(i){if(e._previousItems.has(i)){0==e._previousItems.get(i).size&&t.add(i)}else t.add(i)}),t}stopItems(){let t=new CList,e=this;return this._items.forEach(function(i){if(e._nextItems.has(i)){0==e._nextItems.get(i).size&&t.add(i)}else t.add(i)}),t}getFlowCount(t){let e=0,i=this;return function t(s){if(i._nextItems.has(s)){let e=i._nextItems.get(s);null!=e&&e.forEach(function(e){t(e)})}else e++}(t),e}getFlow(t){let e=new CList,i=this;return function t(s,a){if(i._nextItems.has(s)){let e=i._nextItems.get(s);null!=e&&e.forEach(function(e){t(e,a+","+e.id)})}else e.add(a)}(t,t.id),e}getAllFlow(){let t=new CList,e=this.startItems();for(let i=0;i<e.length;i++){let s=this.getFlow(e[i]);for(let e=0;e<s.length;e++)t.add(s.get(e))}return t}getAllFlowCount(){let t=0,e=this.startItems();for(let i=0;i<e.length;i++)t+=this.getFlowCount(e[i]);return t}}!function(t){t[t.COLLAPSE=0]="COLLAPSE",t[t.EXPAND=1]="EXPAND"}(ETreeItemState||(ETreeItemState={}));class CTreeItem extends CNotifyChangeObject{static get CON_CHANGE_STATE(){return"changeState"}static get CON_CHANGE_VALUE(){return"changeValue"}static get CON_CHANGE_ITEMS(){return"changeItems"}get value(){return this._value}get items(){return this._items}get state(){return this._state}set state(t){this._state!=t&&(this._state=t,this.doChange(CTreeItem.CON_CHANGE_STATE,void 0))}constructor(t){super(),this._value=new CVariable,this._items=new CTreeData,this._state=ETreeItemState.COLLAPSE;let e=this;this._value=new CVariable(t),this._value.onChange=function(){e.doChange(CTreeItem.CON_CHANGE_VALUE,void 0)},this._items.onChange=function(t,i,s){e.doChange(CTreeItem.CON_CHANGE_ITEMS,e.items)}}doRemove(){this._value.remove(),this._items.remove(),super.doRemove()}doChange(t,e){null!=this.onChange&&this.onChange(this,t,e)}doCollapse(){this.state=ETreeItemState.COLLAPSE}doExpand(){this.state=ETreeItemState.EXPAND}collapse(){this.doCollapse()}expand(){this.doExpand()}getState(){return 0==this.items.length?"empty":this.state}}class CTreeData extends CNotifyChangeObject{constructor(){super(...arguments),this._items=new CList}get items(){return this._items}get length(){return this._items.length}idx(t){let e;for(let i=0;i<this._items.length;i++)if(t==this._items.get(i)){e=i;break}return e}doToData(t){super.doToData(t),function t(e,i){for(let s=0;s<i.length;s++){let a=i.getItem(s);if(null!=a){let i=new Array;e.push({value:a.value.value,state:a.state,items:i}),t(i,a.items)}}}(t,this)}doFromData(t){super.doFromData(t),this.clear(),function t(e,i){for(let s=0;s<e.length;s++){let a=e[s],o=i.addItem(a.value);o.state=a.state,t(a.items,o.items)}}(t,this)}doRemove(){this._items.remove(),super.doRemove()}doChange(t,e,i){null!=this.onChange&&this.onChange(this,t,e,i)}addItem(t){let e=new CTreeItem(t),i=this;return e.onChange=function(t,e,s){i.doChange("update",s,t)},this._items.add(e),this.doChange("add",this,e),e}insertItem(t,e){let i=new CTreeItem(e),s=this;return i.onChange=function(t,e,i){s.doChange("update",i,t)},this._items.insert(t,e),this.doChange("insert",this,i),i}deleteItem(t){let e;null!=(e="number"==typeof t?t:this.idx(t))&&(this._items.delete(e),this.doChange("delete",this,void 0))}getItem(t){if("number"==typeof t)return this._items.get(t);{let e=this.getIndexes().findIndex("index",t);if(e.length>0)return e[0].get(2).asObject}}get(t){return this.items.get(t)}setItem(t,e){let i=this;e.onChange=function(t,e,s){i.doChange("update",s,t)},this._items.set(t,e),this.doChange("update",this,e)}clear(){this._items.clear(),this.doChange("clear",this,void 0)}getIndex(t){let e=this.getIndexes().findIndex("treeitem",t);if(e.length>0)return e[0].get(0).asString}getIndexes(){let t=new CTableData(["index","treedata","treeitem"],["index","treedata","treeitem"]);return function e(i,s){for(let a=0;a<s.length;a++){let o="";o=""==i?a+"":i+","+a;let n=s.getItem(a);t.add([o,s,n]),null!=n&&e(o,n.items)}}("",this),t}toData(){let t=[];return this.doToData(t),t}getExpandedItems(){let t=new Array;function e(t,i,s,a){if(s.push({level:t,index:i,item:a}),a.state==ETreeItemState.EXPAND)for(let o=0;o<a.items.length;o++)e(t+1,i+","+o,s,a.items.get(o))}for(let i=0;i<this.items.length;i++)e(0,i+"",t,this.items.get(i));return t}expandAll(){let t=this.getIndexes();for(let e=0;e<t.length;e++){t.getRow(e).get(2).value.expand()}}collapseAll(){let t=this.getIndexes();for(let e=0;e<t.length;e++){t.getRow(e).get(2).value.collapse()}}}!function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.TOP=2]="TOP",t[t.RIGHT=3]="RIGHT",t[t.BOTTOM=4]="BOTTOM",t[t.CLIENT=5]="CLIENT",t[t.FLOW=6]="FLOW",t[t.CENTER=7]="CENTER",t[t.LEFTTOP=8]="LEFTTOP",t[t.RIGHTTOP=9]="RIGHTTOP",t[t.LEFTBOTTOM=10]="LEFTBOTTOM",t[t.RIGHTBOTTOM=11]="RIGHTBOTTOM",t[t.MIDDLELEFT=12]="MIDDLELEFT",t[t.MIDDLETOP=13]="MIDDLETOP",t[t.MIDDLERIGHT=14]="MIDDLERIGHT",t[t.MIDDLEBOTTOM=15]="MIDDLEBOTTOM",t[t.HCENTER=16]="HCENTER",t[t.VCENTER=17]="VCENTER",t[t.TURN=18]="TURN",t[t.PATHDATA=19]="PATHDATA",t[t.GRID=20]="GRID",t[t.PARENT_SIZE=21]="PARENT_SIZE"}(EPositionAlign||(EPositionAlign={})),function(t){t[t.PIXEL=0]="PIXEL",t[t.PERCENT=1]="PERCENT"}(EPositionUnit||(EPositionUnit={})),function(t){t[t.ORIGINAL=0]="ORIGINAL",t[t.FIT=1]="FIT",t[t.STRETCH=2]="STRETCH"}(EFitMode||(EFitMode={}));class CPositionAlignInfo extends CNotifyChangeKindObject{constructor(){super(...arguments),this._turnAngle=0,this._turnRadiusX=0,this._turnRadiusY=0,this._pathMiddleValue=0,this._gridColumn=0,this._gridRow=0,this._gridRowHeight=0}static get CON_CHANGE_TURN_ANGLE(){return"changeTurnAngle"}static get CON_CHANGE_TURN_RADIUS_X(){return"changeTurnRadiusX"}static get CON_CHANGE_TURN_RADIUS_Y(){return"changeTurnRadiusY"}static get CON_CHANGE_PATH_MIDDLE_VALUE(){return"changePathMiddleValue"}static get CON_CHANGE_GRID_COLUMN(){return"changeGridColumn"}static get CON_CHANGE_GRID_ROW(){return"changeGridRow"}static get CON_CHANGE_GRID_ROW_HEIGHT(){return"changeGridRowHeight"}static get CON_CHANGE_UNIT(){return"changeUnit"}get turnAngle(){return this._turnAngle}set turnAngle(t){t!=this.turnAngle&&(this._turnAngle=t,this.doChange(CPositionAlignInfo.CON_CHANGE_TURN_ANGLE))}get turnRadiusX(){return this._turnRadiusX}set turnRadiusX(t){t!=this._turnRadiusX&&(this._turnRadiusX=t,this.doChange(CPositionAlignInfo.CON_CHANGE_TURN_RADIUS_X))}get turnRadiusY(){return this._turnRadiusY}set turnRadiusY(t){t!=this._turnRadiusY&&(this._turnRadiusY=t,this.doChange(CPositionAlignInfo.CON_CHANGE_TURN_RADIUS_Y))}get pathMiddleValue(){return this._pathMiddleValue}set pathMiddleValue(t){t!=this._pathMiddleValue&&(this._pathMiddleValue=t,this.doChange(CPositionAlignInfo.CON_CHANGE_PATH_MIDDLE_VALUE))}get gridColumn(){return this._gridColumn}set gridColumn(t){t!=this._gridColumn&&(this._gridColumn=t,this.doChange(CPositionAlignInfo.CON_CHANGE_GRID_COLUMN))}get gridRow(){return this._gridRow}set gridRow(t){t!=this._gridRow&&(this._gridRow=t,this.doChange(CPositionAlignInfo.CON_CHANGE_GRID_ROW))}get gridRowHeight(){return this._gridRowHeight}set gridRowHeight(t){t!=this._gridRowHeight&&(this._gridRowHeight=t,this.doChange(CPositionAlignInfo.CON_CHANGE_GRID_ROW_HEIGHT))}doToData(t){super.doToData(t),CDataClass.putData(t,"turnAngle",this.turnAngle,0),CDataClass.putData(t,"turnRadiusX",this.turnRadiusX,0),CDataClass.putData(t,"turnRadiusY",this.turnRadiusY,0),CDataClass.putData(t,"pathMiddleValue",this.pathMiddleValue,0),CDataClass.putData(t,"gridColumn",this.gridColumn,0),CDataClass.putData(t,"gridRow",this.gridRow,0),CDataClass.putData(t,"gridRowHeight",this.gridRowHeight,0)}doFromData(t){super.doFromData(t),this.turnAngle=CDataClass.getData(t,"turnAngle",0),this.turnRadiusX=CDataClass.getData(t,"turnRadiusX",0),this.turnRadiusY=CDataClass.getData(t,"turnRadiusY",0),this.pathMiddleValue=CDataClass.getData(t,"pathMiddleValue",0),this.gridColumn=CDataClass.getData(t,"gridColumn",0),this.gridRow=CDataClass.getData(t,"gridRow",0),this.gridRowHeight=CDataClass.getData(t,"gridRowHeight",0)}copyFrom(t){this.turnAngle=t.turnAngle,this.turnRadiusX=t.turnRadiusX,this.turnRadiusY=t.turnRadiusY,this.pathMiddleValue=t.pathMiddleValue,this.gridColumn=t.gridColumn,this.gridRow=t.gridRow,this.gridRowHeight=t.gridRowHeight}}class CPositionParentAlignInfo extends CNotifyChangeKindObject{static get CON_CHANGE_MARGIN_X(){return"changeMarginX"}static get CON_CHANGE_MARGIN_Y(){return"changeMarginY"}static get CON_CHANGE_GRID_COLUMN_COUNT(){return"changeGridColumnCount"}static get CON_CHANGE_GRID_ROW_COUNT(){return"changeGridRowCount"}static get CON_CHANGE_TURN_CENTER(){return"changeTurnCenter"}static get CON_CHANGE_TURN_AUTO_SET(){return"changeTurnAutoSet"}static get CON_CHANGE_TURN_AUTO_SET_START_ANGLE(){return"changeTurnAutoSetStartAngle"}static get CON_CHANGE_TURN_AUTO_SET_STOP_ANGLE(){return"changeTurnAutoSetStopAngle"}static get CON_CHANGE_TURN_AUTO_SET_RADIUS_X(){return"changeTurnAutoSetRadiusX"}static get CON_CHANGE_TURN_AUTO_SET_RADIUS_Y(){return"changeTurnAutoSetRadiusY"}static get CON_CHANGE_PATH_DATA(){return"changePathData"}static get CON_CHANGE_PATH_DATA_AUTO_SET(){return"changePathDataAutoSet"}static get CON_CHANGE_PATH_DATA_FIT_MODE(){return"changePathDataFitMode"}static get CON_CHANGE_PATH_DATA_START_MIDDLE_VALUE(){return"changePathDataStartMiddleValue"}static get CON_CHANGE_PATH_DATA_STOP_MIDDLE_VALUE(){return"changePathDataStopMiddleValue"}get marginX(){return this._marginX}set marginX(t){t!=this._marginX&&(this._marginX=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_MARGIN_X))}get marginY(){return this._marginY}set marginY(t){t!=this._marginY&&(this._marginY=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_MARGIN_Y))}get gridColumnCount(){return this._gridColumnCount}set gridColumnCount(t){t!=this._gridColumnCount&&(this._gridColumnCount=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_GRID_COLUMN_COUNT))}get gridRowCount(){return this._gridRowCount}set gridRowCount(t){t!=this._gridRowCount&&(this._gridRowCount=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_GRID_ROW_COUNT))}get turnCenter(){return this._turnCenter}get turnAutoSet(){return this._turnAutoSet}set turnAutoSet(t){t!=this._turnAutoSet&&(this._turnAutoSet=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_TURN_AUTO_SET))}get turnAutoSetStartAngle(){return this._turnAutoSetStartAngle}set turnAutoSetStartAngle(t){t!=this._turnAutoSetStartAngle&&(this._turnAutoSetStartAngle=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_TURN_AUTO_SET_START_ANGLE))}get turnAutoSetStopAngle(){return this._turnAutoSetStopAngle}set turnAutoSetStopAngle(t){t!=this._turnAutoSetStopAngle&&(this._turnAutoSetStopAngle=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_TURN_AUTO_SET_STOP_ANGLE))}get turnAutoSetRadiusX(){return this._turnAutoSetRadiusX}set turnAutoSetRadiusX(t){t!=this._turnAutoSetRadiusX&&(this._turnAutoSetRadiusX=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_TURN_AUTO_SET_RADIUS_X))}get turnAutoSetRadiusY(){return this._turnAutoSetRadiusY}set turnAutoSetRadiusY(t){t!=this._turnAutoSetRadiusY&&(this._turnAutoSetRadiusY=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_TURN_AUTO_SET_RADIUS_Y))}set turnAutoSetRadius(t){this.turnAutoSetRadiusX=t,this.turnAutoSetRadiusY=t}get pathData(){return this._pathData}set pathData(t){t!=this._pathData&&(this._pathData=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_PATH_DATA))}get pathDataAutoSet(){return this._pathDataAutoSet}set pathDataAutoSet(t){t!=this._pathDataAutoSet&&(this._pathDataAutoSet=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_PATH_DATA_AUTO_SET))}get pathDataFitMode(){return this._pathDataFitMode}set pathDataFitMode(t){t!=this._pathDataFitMode&&(this._pathDataFitMode=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_PATH_DATA_FIT_MODE))}get pathDataStartMiddleValue(){return this._pathDataStartMiddleValue}set pathDataStartMiddleValue(t){t!=this._pathDataStartMiddleValue&&(this._pathDataStartMiddleValue=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_PATH_DATA_START_MIDDLE_VALUE))}get pathDataStopMiddleValue(){return this._pathDataStopMiddleValue}set pathDataStopMiddleValue(t){t!=this._pathDataStopMiddleValue&&(this._pathDataStopMiddleValue=t,this.doChange(CPositionParentAlignInfo.CON_CHANGE_PATH_DATA_STOP_MIDDLE_VALUE))}constructor(){super(),this._marginX=0,this._marginY=0,this._gridColumnCount=5,this._gridRowCount=-1,this._turnCenter=new CNotifyPoint(.5,.5),this._turnAutoSet=!1,this._turnAutoSetStartAngle=0,this._turnAutoSetStopAngle=360,this._turnAutoSetRadiusX=100,this._turnAutoSetRadiusY=100,this._pathData="",this._pathDataAutoSet=!1,this._pathDataFitMode=EFitMode.STRETCH,this._pathDataStartMiddleValue=0,this._pathDataStopMiddleValue=1;let t=this;this._turnCenter.onChange=function(e,i){t.doChange(CPositionParentAlignInfo.CON_CHANGE_TURN_CENTER)}}doToData(t){super.doToData(t),CDataClass.putData(t,"marginX",this.marginX,0),CDataClass.putData(t,"marginY",this.marginY,0),CDataClass.putData(t,"gridColumnCount",this.gridColumnCount,5),CDataClass.putData(t,"gridRowCount",this.gridRowCount,-1),CDataClass.putData(t,"turnCenter",this.turnCenter.toData(),{x:.5,y:.5},!0),CDataClass.putData(t,"turnAutoSet",this.turnAutoSet,!1),CDataClass.putData(t,"turnAutoSetStartAngle",this.turnAutoSetStartAngle,0),CDataClass.putData(t,"turnAutoSetStopAngle",this.turnAutoSetStopAngle,360),CDataClass.putData(t,"turnAutoSetRadiusX",this.turnAutoSetRadiusX,100),CDataClass.putData(t,"turnAutoSetRadiusY",this.turnAutoSetRadiusY,100),CDataClass.putData(t,"pathData",this.pathData,""),CDataClass.putData(t,"pathDataAutoSet",this.pathDataAutoSet,!1),CDataClass.putData(t,"pathDataFitMode",this.pathDataFitMode,EFitMode.STRETCH),CDataClass.putData(t,"pathDataStartMiddleValue",this.pathDataStartMiddleValue,0),CDataClass.putData(t,"pathDataStopMiddleValue",this.pathDataStopMiddleValue,1)}doFromData(t){super.doFromData(t),this.marginX=CDataClass.getData(t,"marginX",0),this.marginY=CDataClass.getData(t,"marginY",0),this.gridColumnCount=CDataClass.getData(t,"gridColumnCount",5),this.gridRowCount=CDataClass.getData(t,"gridRowCount",-1),this.turnCenter.fromData(CDataClass.getData(t,"turnCenter",{x:.5,y:.5},!0)),this.turnAutoSet=CDataClass.getData(t,"turnAutoSet",!1),this.turnAutoSetStartAngle=CDataClass.getData(t,"turnAutoSetStartAngle",0),this.turnAutoSetStopAngle=CDataClass.getData(t,"turnAutoSetStopAngle",360),this.turnAutoSetRadiusX=CDataClass.getData(t,"turnAutoSetRadiusX",100),this.turnAutoSetRadiusY=CDataClass.getData(t,"turnAutoSetRadiusY",100),this.pathData=CDataClass.getData(t,"pathData",""),this.pathDataAutoSet=CDataClass.getData(t,"pathDataAutoSet",!1),this.pathDataFitMode=CDataClass.getData(t,"pathDataFitMode",EFitMode.STRETCH),this.pathDataStartMiddleValue=CDataClass.getData(t,"pathDataStartMiddleValue",0),this.pathDataStopMiddleValue=CDataClass.getData(t,"pathDataStopMiddleValue",1)}copyFrom(t){this.marginX=t.marginX,this.marginY=t.marginY,this.gridColumnCount=t.gridColumnCount,this.gridRowCount=t.gridRowCount,this.turnCenter.x=t.turnCenter.x,this.turnCenter.y=t.turnCenter.y,this.turnAutoSet=t.turnAutoSet,this.turnAutoSetStartAngle=t.turnAutoSetStartAngle,this.turnAutoSetStopAngle=t.turnAutoSetStopAngle,this.turnAutoSetRadiusX=t.turnAutoSetRadiusX,this.turnAutoSetRadiusY=t.turnAutoSetRadiusY,this.pathData=t.pathData,this.pathDataAutoSet=t.pathDataAutoSet,this.pathDataFitMode=t.pathDataFitMode,this.pathDataStartMiddleValue=t.pathDataStartMiddleValue,this.pathDataStopMiddleValue=t.pathDataStopMiddleValue}}class CTransform extends CNotifyChangeKindObject{constructor(){super(...arguments),this._translateX=0,this._translateY=0,this._translateZ=0,this._scaleX=1,this._scaleY=1,this._scaleZ=1,this._rotationPointX=.5,this._rotationPointY=.5,this._rotationPointZ=0,this._rotateX=0,this._rotateY=0,this._rotateZ=0,this._perspective=1e3,this._perspectiveX=.5,this._perspectiveY=.5}static get CON_CHANGE_SCALE_X(){return"changeScaleX"}static get CON_CHANGE_SCALE_Y(){return"changeScaleY"}static get CON_CHANGE_SCALE_Z(){return"changeScaleZ"}static get CON_CHANGE_ROTATION_POINT_X(){return"changeRotaionPointX"}static get CON_CHANGE_ROTATION_POINT_Y(){return"changeRotaionPointY"}static get CON_CHANGE_ROTATION_POINT_Z(){return"changeRotaionPointZ"}static get CON_CHANGE_TRANSLATE_X(){return"changeTranslateX"}static get CON_CHANGE_TRANSLATE_Y(){return"changeTranslateY"}static get CON_CHANGE_TRANSLATE_Z(){return"changeTranslateZ"}static get CON_CHANGE_ROTATE_X(){return"changeRotateX"}static get CON_CHANGE_ROTATE_Y(){return"changeRotateY"}static get CON_CHANGE_ROTATE_Z(){return"changeRotateZ"}static get CON_CHANGE_PERSPECTIVE(){return"changePerspective"}static get CON_CHANGE_PERSPECTIVE_X(){return"changePerspectiveX"}static get CON_CHANGE_PERSPECTIVE_Y(){return"changePerspectiveY"}get translateX(){return this._translateX}set translateX(t){this._translateX!=t&&(this._translateX=t,this.doChange(CTransform.CON_CHANGE_TRANSLATE_X))}get translateY(){return this._translateY}set translateY(t){this._translateY!=t&&(this._translateY=t,this.doChange(CTransform.CON_CHANGE_TRANSLATE_Y))}get translateZ(){return this._translateZ}set translateZ(t){this._translateZ!=t&&(this._translateZ=t,this.doChange(CTransform.CON_CHANGE_TRANSLATE_Z))}get scaleX(){return this._scaleX}set scaleX(t){this._scaleX!=t&&(this._scaleX=t,this.doChange(CTransform.CON_CHANGE_SCALE_X))}get scaleY(){return this._scaleY}set scaleY(t){this._scaleY!=t&&(this._scaleY=t,this.doChange(CTransform.CON_CHANGE_SCALE_Y))}get scaleZ(){return this._scaleZ}set scaleZ(t){this._scaleZ!=t&&(this._scaleZ=t,this.doChange(CTransform.CON_CHANGE_SCALE_Z))}get scale(){return(this._scaleX+this._scaleY+this._scaleZ)/3}set scale(t){this.scaleX=t,this.scaleY=t,this.scaleZ=t}get rotationPointX(){return this._rotationPointX}set rotationPointX(t){this._rotationPointX!=t&&(this._rotationPointX=t,this.doChange(CTransform.CON_CHANGE_ROTATION_POINT_X))}get rotationPointY(){return this._rotationPointY}set rotationPointY(t){this._rotationPointY!=t&&(this._rotationPointY=t,this.doChange(CTransform.CON_CHANGE_ROTATION_POINT_Y))}get rotationPointZ(){return this._rotationPointZ}set rotationPointZ(t){this._rotationPointZ!=t&&(this._rotationPointZ=t,this.doChange(CTransform.CON_CHANGE_ROTATION_POINT_Z))}get rotateX(){return this._rotateX}set rotateX(t){this._rotateX!=t&&(this._rotateX=t,this.doChange(CTransform.CON_CHANGE_ROTATE_X))}get rotateY(){return this._rotateY}set rotateY(t){this._rotateY!=t&&(this._rotateY=t,this.doChange(CTransform.CON_CHANGE_ROTATE_Y))}get rotateZ(){return this._rotateZ}set rotateZ(t){this._rotateZ!=t&&(this._rotateZ=t,this.doChange(CTransform.CON_CHANGE_ROTATE_Z))}get perspective(){return this._perspective}set perspective(t){this._perspective!=t&&(this._perspective=t,this.doChange(CTransform.CON_CHANGE_PERSPECTIVE))}get perspectiveX(){return this._perspectiveX}set perspectiveX(t){this._perspectiveX!=t&&(this._perspectiveX=t,this.doChange(CTransform.CON_CHANGE_PERSPECTIVE_X))}get perspectiveY(){return this._perspectiveY}set perspectiveY(t){this._perspectiveY!=t&&(this._perspectiveY=t,this.doChange(CTransform.CON_CHANGE_PERSPECTIVE_Y))}doToData(t){super.doToData(t),CDataClass.putData(t,"translateX",this.translateX,0),CDataClass.putData(t,"translateY",this.translateY,0),CDataClass.putData(t,"translateZ",this.translateZ,0),CDataClass.putData(t,"scaleX",this.scaleX,1),CDataClass.putData(t,"scaleY",this.scaleY,1),CDataClass.putData(t,"scaleZ",this.scaleZ,1),CDataClass.putData(t,"rotateX",this.rotateX,0),CDataClass.putData(t,"rotateY",this.rotateY,0),CDataClass.putData(t,"rotateZ",this.rotateZ,0),CDataClass.putData(t,"perspective",this.perspective,1e3),CDataClass.putData(t,"perspectiveX",this.perspectiveX,.5),CDataClass.putData(t,"perspectiveY",this.perspectiveY,.5),CDataClass.putData(t,"rotationPointX",this.rotationPointX,.5),CDataClass.putData(t,"rotationPointY",this.rotationPointY,.5),CDataClass.putData(t,"rotationPointZ",this.rotationPointZ,0)}doFromData(t){super.doFromData(t),this.translateX=CDataClass.getData(t,"translateX",0),this.translateY=CDataClass.getData(t,"translateY",0),this.translateZ=CDataClass.getData(t,"translateZ",0),this.scaleX=CDataClass.getData(t,"scaleX",1),this.scaleY=CDataClass.getData(t,"scaleY",1),this.scaleZ=CDataClass.getData(t,"scaleZ",1),this.rotateX=CDataClass.getData(t,"rotateX",0),this.rotateY=CDataClass.getData(t,"rotateY",0),this.rotateZ=CDataClass.getData(t,"rotateZ",0),this.perspective=CDataClass.getData(t,"perspective",1e3),this.perspectiveX=CDataClass.getData(t,"perspectiveX",.5),this.perspectiveY=CDataClass.getData(t,"perspectiveY",.5),this.rotationPointX=CDataClass.getData(t,"rotationPointX",.5),this.rotationPointY=CDataClass.getData(t,"rotationPointY",.5),this.rotationPointZ=CDataClass.getData(t,"rotationPointZ",0)}doChange(t){super.doChange(t),CCalc.isIn(t,[CTransform.CON_CHANGE_TRANSLATE_X,CTransform.CON_CHANGE_TRANSLATE_Y,CTransform.CON_CHANGE_TRANSLATE_Z])&&this.doChangeTranslate(),CCalc.isIn(t,[CTransform.CON_CHANGE_ROTATE_X,CTransform.CON_CHANGE_ROTATE_Y,CTransform.CON_CHANGE_ROTATE_Z])&&this.doChangeRotation(),CCalc.isIn(t,[CTransform.CON_CHANGE_SCALE_X,CTransform.CON_CHANGE_SCALE_Y,CTransform.CON_CHANGE_SCALE_Z])&&this.doChangeScale(),CCalc.isIn(t,[CTransform.CON_CHANGE_PERSPECTIVE,CTransform.CON_CHANGE_PERSPECTIVE_X,CTransform.CON_CHANGE_PERSPECTIVE_Y])&&this.doChangePerspectiveInfo()}doChangeRotationPoint(){this.useChangeEvent&&this.onChangeRotationPoint&&this.onChangeRotationPoint(this)}doChangeTranslate(){this.useChangeEvent&&null!=this.onChangeTranslate&&this.onChangeTranslate(this)}doChangeRotation(){this.useChangeEvent&&null!=this.onChangeRotation&&this.onChangeRotation(this)}doChangeScale(){this.useChangeEvent&&null!=this.onChangeScale&&this.onChangeScale(this)}doChangePerspectiveInfo(){this.useChangeEvent&&null!=this.onChangePerspectiveInfo&&this.onChangePerspectiveInfo(this)}setTransform(t){0==this.rotationPointZ?t.style.transformOrigin=100*this.rotationPointX+"% "+100*this.rotationPointY+"%":t.style.transformOrigin=100*this.rotationPointX+"% "+100*this.rotationPointY+"% "+100*this.rotationPointZ+"px",t.style.transform="translateX("+this._translateX+"px) translateY("+this._translateY+"px) translateZ("+this._translateZ+"px) scaleX("+this._scaleX+") scaleY("+this._scaleY+") scaleZ("+this._scaleZ+") rotateX("+this._rotateX+"deg) rotateY("+this._rotateY+"deg) rotateZ("+this._rotateZ+"deg)",t.style.perspective=this._perspective+"px",t.style.perspectiveOrigin=100*this._perspectiveX+"% "+100*this._perspectiveY+"%"}translatePoint(t,e,i){let s=new CPoint3D(this.translateX,this.translateY,this.translateZ),a=CPoint3D.getAngleToPoint3D(s,t,e,i);this.translateX=a.x,this.translateY=a.y,this.translateZ=a.z}}class CPosition extends CNotifyChangeKindObject{static get CON_CHANGE_ALIGN(){return"changeAlign"}static get CON_CHANGE_LEFT(){return"changeLeft"}static get CON_CHANGE_TOP(){return"changeTop"}static get CON_CHANGE_WIDTH(){return"changeWidth"}static get CON_CHANGE_HEIGHT(){return"changeHeight"}static get CON_CHANGE_MARGINS(){return"changeMargins"}static get CON_CHANGE_PADDING(){return"changePadding"}static get CON_CHANGE_ALIGN_INFO(){return"changeAlignInfo"}static get CON_CHANGE_PARENT_ALIGN_INFO(){return"changeParentAlignInfo"}constructor(){super(),this._align=EPositionAlign.NONE,this._left=0,this._top=0,this._width=0,this._height=0,this._margins=new CNotifyRect,this._padding=new CNotifyRect,this._alignInfo=new CPositionAlignInfo,this._parentAlignInfo=new CPositionParentAlignInfo;let t=this;this._margins.onChange=function(){t.doChange(CPosition.CON_CHANGE_MARGINS)},this._padding.onChange=function(){t.doChange(CPosition.CON_CHANGE_PADDING)},this._alignInfo.onChange=function(){t.doChange(CPosition.CON_CHANGE_ALIGN_INFO)},this._parentAlignInfo.onChange=function(){t.doChange(CPosition.CON_CHANGE_PARENT_ALIGN_INFO)}}get align(){return this._align}set align(t){this._align!=t&&(this._align=t,this.doChange(CPosition.CON_CHANGE_ALIGN))}get left(){return this._left}set left(t){this._left!=t&&(this._left=t,this.doChange(CPosition.CON_CHANGE_LEFT))}set leftNotNofity(t){this._left=t}get top(){return this._top}set top(t){this._top!=t&&(this._top=t,this.doChange(CPosition.CON_CHANGE_TOP))}set topNotNofity(t){this._top=t}get width(){return this._width}set width(t){this._width!=t&&(this._width=t,this.doChange(CPosition.CON_CHANGE_WIDTH))}set widthNotNofity(t){this._width=t}get height(){return this._height}set height(t){this._height!=t&&(this._height=t,this.doChange(CPosition.CON_CHANGE_HEIGHT))}set heightNotNofity(t){this._height=t}get right(){return this.left+this.width}get alignInfo(){return this._alignInfo}get parentAlignInfo(){return this._parentAlignInfo}get bottom(){return this.top+this.height}get leftTop(){return new CPoint(this.left,this.top)}get rightTop(){return new CPoint(this.right,this.top)}get leftBottom(){return new CPoint(this.left,this.bottom)}get rightBottom(){return new CPoint(this.right,this.bottom)}get margins(){return this._margins}get padding(){return this._padding}doToData(t){super.doToData(t),CDataClass.putData(t,"align",this.align,EPositionAlign.NONE),CDataClass.putData(t,"left",this.left,0),CDataClass.putData(t,"top",this.top,0),CDataClass.putData(t,"width",this.width,0),CDataClass.putData(t,"height",this.height,0),CDataClass.putData(t,"margins",this.margins.toData(),{},!0),CDataClass.putData(t,"padding",this.padding.toData(),{},!0),CDataClass.putData(t,"alignInfo",this.alignInfo.toData(),{},!0),CDataClass.putData(t,"parentAlignInfo",this.parentAlignInfo.toData(),{},!0)}doFromData(t){super.doFromData(t),this.align=CDataClass.getData(t,"align",EPositionAlign.NONE),this.left=CDataClass.getData(t,"left",0),this.top=CDataClass.getData(t,"top",0),this.width=CDataClass.getData(t,"width",0),this.height=CDataClass.getData(t,"height",0),this.margins.fromData(CDataClass.getData(t,"margins",{},!0)),this.padding.fromData(CDataClass.getData(t,"padding",{},!0)),this.alignInfo.fromData(CDataClass.getData(t,"alignInfo",{},!0)),this.parentAlignInfo.fromData(CDataClass.getData(t,"parentAlignInfo",{},!0))}doChange(t){t==CPosition.CON_CHANGE_ALIGN&&this.doChangeAlign(),t==CPosition.CON_CHANGE_ALIGN_INFO&&this.doChangeAlignInfo(),t==CPosition.CON_CHANGE_PARENT_ALIGN_INFO&&this.doChangeParentAlignInfo(),CCalc.isIn(t,[CPosition.CON_CHANGE_LEFT,CPosition.CON_CHANGE_TOP])&&this.doChangePosition(),CCalc.isIn(t,[CPosition.CON_CHANGE_WIDTH,CPosition.CON_CHANGE_HEIGHT])&&this.doChangeSize(),t==CPosition.CON_CHANGE_MARGINS&&this.doChangeMargins(),t==CPosition.CON_CHANGE_PADDING&&this.doChangePadding(),super.doChange(t)}doChangeAlign(){this.useChangeEvent&&null!=this.onChangeAlign&&this.onChangeAlign(this)}doChangeAlignInfo(){this.useChangeEvent&&null!=this.onChangeAlignInfo&&this.onChangeAlignInfo(this)}doChangeParentAlignInfo(){this.useChangeEvent&&null!=this.onChangeParentAlignInfo&&this.onChangeParentAlignInfo(this)}doChangePosition(){this.useChangeEvent&&null!=this.onChangePosition&&this.onChangePosition(this)}doChangeSize(){this.useChangeEvent&&null!=this.onChangeSize&&this.onChangeSize(this)}doChangeMargins(){this.useChangeEvent&&null!=this.onChangeMargins&&this.onChangeMargins(this)}doChangePadding(){this.useChangeEvent&&null!=this.onChangePadding&&this.onChangePadding(this)}isRelativeAlign(){return CCalc.isIn(this._align,[EPositionAlign.LEFT,EPositionAlign.TOP,EPositionAlign.RIGHT,EPositionAlign.BOTTOM,EPositionAlign.CLIENT,EPositionAlign.FLOW])}toRect(){return new CRect(this.left,this.top,this.left+this.width,this.top+this.height)}enumProperties(){let t=new Map;return t.set("align",CEnum.toArray(EPositionAlign)),t}equalRect(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height}static getAlignPixelBounds(t,e,i){let s=new CPosition,a=i;if(i.align==EPositionAlign.NONE)return s.left=i.left,s.top=i.top,s.width=i.width,s.height=i.height,s;if(i.align==EPositionAlign.CENTER)return s.left=(t.width-i.width)/2,s.top=(t.height-i.height)/2,s.width=i.width,s.height=i.height,s;if(i.align==EPositionAlign.PARENT_SIZE)return s.left=0,s.top=0,s.width=t.width,s.height=t.height,s;if(i.align==EPositionAlign.LEFTTOP)return s.left=t.padding.left+a.margins.left,s.top=t.padding.top+a.margins.top,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.RIGHTTOP)return s.left=t.width-a.width-a.margins.right-t.padding.right,s.top=t.padding.top+a.margins.top,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.LEFTBOTTOM)return s.left=a.margins.left+t.padding.left,s.top=t.height-a.height-a.margins.bottom-t.padding.bottom,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.RIGHTBOTTOM)return s.left=t.width-a.width-a.margins.right-t.padding.right,s.top=t.height-a.height-a.margins.bottom-t.padding.bottom,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.MIDDLELEFT)return s.left=a.margins.left+t.padding.left,s.top=(t.height-a.height)/2,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.MIDDLETOP)return s.left=(t.width-a.width)/2,s.top=a.margins.top+t.padding.top,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.MIDDLERIGHT)return s.left=t.width-a.width-a.margins.right-t.padding.right,s.top=(t.height-a.height)/2,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.MIDDLEBOTTOM)return s.left=(t.width-a.width)/2,s.top=t.height-a.height-a.margins.bottom-t.padding.bottom,s.width=a.width,s.height=a.height,s;if(i.align==EPositionAlign.HCENTER)return s.left=(t.width-a.width)/2,s.top=a.margins.top+t.padding.top,s.height=t.height-a.margins.top-a.margins.bottom-t.padding.bottom,s.width=a.width,s;if(i.align==EPositionAlign.VCENTER)return s.left=a.margins.left+t.padding.left,s.top=(t.height-a.height)/2,s.width=t.width-a.margins.left-a.margins.right-t.padding.right,s.height=a.height,s;if(i.align==EPositionAlign.TURN){let o=t.width*t.parentAlignInfo.turnCenter.x,n=t.height*t.parentAlignInfo.turnCenter.y;if(t.parentAlignInfo.turnAutoSet){let r=-1,A=new Array;for(let t=0;t<e.length;t++)e[t].align==EPositionAlign.TURN&&A.push(e[t]);for(let t=0;t<A.length;t++)if(A[t]==i){r=t;break}if(-1!=r){let e=CCalc.crRange2Value(0,A.length-1,r,t.parentAlignInfo.turnAutoSetStartAngle,t.parentAlignInfo.turnAutoSetStopAngle),i=CPoint.getAngleToPoint(new CPoint(o,n),t.parentAlignInfo.turnAutoSetRadiusX,t.parentAlignInfo.turnAutoSetRadiusY,e);s.left=i.x-a.width/2,s.top=i.y-a.height/2}}else{let t=CPoint.getAngleToPoint(new CPoint(o,n),a.alignInfo.turnRadiusX,a.alignInfo.turnRadiusY,a.alignInfo.turnAngle);s.left=t.x-a.width/2,s.top=t.y-a.height/2}return s.width=a.width,s.height=a.height,s}if(i.align==EPositionAlign.PATHDATA)if(t.parentAlignInfo.pathDataAutoSet){let o=CSystem.resources.get(t.parentAlignInfo.pathData);if(null!=o){let n=-1,r=new Array;for(let t=0;t<e.length;t++)e[t].align==EPositionAlign.PATHDATA&&r.push(e[t]);for(let t=0;t<r.length;t++)if(r[t]==i){n=t;break}let A=CCalc.crRange2Value(0,r.length-1,n,t.parentAlignInfo.pathDataStartMiddleValue,t.parentAlignInfo.pathDataStopMiddleValue);if(!isNaN(A)){let e=Math.floor(CCalc.cr(o.points.length-1,0,1,A,2));if(t.parentAlignInfo.pathDataFitMode==EFitMode.FIT){let i=new CRect(0,0,t.width,t.height),n=new CRect(0,0,50,50);n=i.getFitRect(n,!0),s.left=o.points[e].x*n.width+n.left-a.width/2,s.top=o.points[e].y*n.height+n.top-a.height/2}else s.left=o.points[e].x*t.width-a.width/2,s.top=o.points[e].y*t.height-a.height/2;return s.width=a.width,s.height=a.height,s}}}else{let e=CSystem.resources.get(t.parentAlignInfo.pathData);if(null!=e){let i=a.alignInfo.pathMiddleValue;i>1&&(i=1);let o=Math.floor(CCalc.cr(e.points.length-1,0,1,i,2));if(t.parentAlignInfo.pathDataFitMode==EFitMode.FIT){let i=new CRect(0,0,t.width,t.height),a=new CRect(0,0,50,50);a=i.getFitRect(a,!0),s.left=e.points[o].points.x*a.width+a.left,s.top=e.points[o].y*a.height+a.top}else s.left=e.points[o].x*t.width,s.top=e.points[o].y*t.height;return s.width=a.width,s.height=a.height,s}}if(i.align==EPositionAlign.GRID){let e=t.parentAlignInfo.gridColumnCount,i=t.parentAlignInfo.gridRowCount;if(e<=0)return s;{let o=(t.width-(e-1)*t.parentAlignInfo.marginX-t.padding.left-t.padding.right)/e,n=0;return n=i<=0?a.alignInfo.gridRowHeight:(t.height-(i-1)*t.parentAlignInfo.marginY-t.padding.top-t.padding.bottom)/i,s.left=a.alignInfo.gridColumn*o+a.alignInfo.gridColumn*t.parentAlignInfo.marginX+t.padding.left,s.top=a.alignInfo.gridRow*n+a.alignInfo.gridRow*t.parentAlignInfo.marginY+t.padding.top,s.width=o,s.height=n,s}}let o=new Array,n=new Array,r=new Array,A=new Array,h=new Array,g=t.padding.left,C=t.padding.top,l=t.padding.right,u=t.padding.bottom,c=!0,d=!0,p=!0,E=!0,I=!0;for(let t=0;t<e.length;t++){if(e[t].align==EPositionAlign.LEFT&&c){if(e[t]==a){c=!1;continue}o.push(e[t]),g+=e[t].margins.left+e[t].width+e[t].margins.right}if(e[t].align==EPositionAlign.TOP&&d){if(e[t]==a){d=!1;continue}n.push(e[t]),C+=e[t].margins.top+e[t].height+e[t].margins.bottom}if(e[t].align==EPositionAlign.RIGHT&&p){if(e[t]==a){p=!1;continue}r.push(e[t]),l+=e[t].margins.left+e[t].width+e[t].margins.right}if(e[t].align==EPositionAlign.BOTTOM&&E){if(e[t]==a){E=!1;continue}A.push(e[t]),u+=e[t].margins.top+e[t].height+e[t].margins.bottom}if(e[t].align==EPositionAlign.FLOW&&I){if(e[t]==a){I=!1;continue}h.push(e[t])}}if(i.align==EPositionAlign.LEFT&&(s.left=g+a.margins.left,s.width=a.width,s.top=C+a.margins.top,s.height=t.height-u-C-a.margins.top-a.margins.bottom),i.align==EPositionAlign.TOP&&(s.left=t.padding.left+a.margins.left,s.top=C+a.margins.top,s.width=t.width-a.margins.left-a.margins.right-t.padding.left-t.padding.right,s.height=a.height),i.align==EPositionAlign.RIGHT&&(s.left=t.width-a.width-l-a.margins.right,s.top=C+a.margins.top,s.height=t.height-u-C-a.margins.top-a.margins.bottom,s.width=a.width),i.align==EPositionAlign.BOTTOM&&(s.left=t.padding.left+a.margins.left,s.top=t.height-a.height-u-a.margins.bottom,s.width=t.width-a.margins.left-a.margins.right-t.padding.left-t.padding.right,s.height=a.height),i.align==EPositionAlign.CLIENT&&(s.left=g+a.margins.left,s.top=C+a.margins.top,s.width=t.width-l-g-a.margins.left-a.margins.right,s.height=t.height-u-C-a.margins.top-a.margins.bottom),i.align==EPositionAlign.FLOW){let e=t.parentAlignInfo.marginX,i=t.parentAlignInfo.marginY,o=t.padding.left+e,n=o,r=t.padding.top+i,A=t.width,g=0;for(let t=0;t<h.length;t++)n+h[t].width>=A&&(n=o,r+=i+g,g=0),g<h[t].height&&(g=h[t].height),n+=h[t].width+e;n+a.width>=A&&(n=o,r+=i+g),s.left=n,s.top=r,s.width=a.width,s.height=a.height}return s}static getElementBounds(t){let e=new CPosition;return e.left=t.offsetLeft,e.top=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e}}class CStopPropagationInfo extends CNotifyChangeKindObject{constructor(){super(...arguments),this._down=!1,this._move=!1,this._up=!1,this._cancel=!1,this._over=!1,this._out=!1,this._enter=!1,this._leave=!1,this._keyboard=!1,this._wheel=!1}static get CON_CHANGE_DOWN(){return"d"}static get CON_CHANGE_MOVE(){return"m"}static get CON_CHANGE_UP(){return"u"}static get CON_CHANGE_CANCEL(){return"c"}static get CON_CHANGE_OVER(){return"ov"}static get CON_CHANGE_OUT(){return"ou"}static get CON_CHANGE_ENTER(){return"e"}static get CON_CHANGE_LEAVE(){return"l"}static get CON_CHANGE_KEYBOARD(){return"k"}get down(){return this._down}set down(t){this._down!=t&&(this._down=t,this.doChange(CStopPropagationInfo.CON_CHANGE_DOWN))}get move(){return this._move}set move(t){this._move!=t&&(this._move=t,this.doChange(CStopPropagationInfo.CON_CHANGE_MOVE))}get up(){return this._up}set up(t){this._up!=t&&(this._up=t,this.doChange(CStopPropagationInfo.CON_CHANGE_UP))}get cancel(){return this._cancel}set cancel(t){this._cancel!=t&&(this._cancel=t,this.doChange(CStopPropagationInfo.CON_CHANGE_CANCEL))}get over(){return this._over}set over(t){this._over!=t&&(this._over=t,this.doChange(CStopPropagationInfo.CON_CHANGE_OVER))}get out(){return this._out}set out(t){this._out!=t&&(this._out=t,this.doChange(CStopPropagationInfo.CON_CHANGE_OUT))}get enter(){return this._enter}set enter(t){this._enter!=t&&(this._enter=t,this.doChange(CStopPropagationInfo.CON_CHANGE_ENTER))}get leave(){return this._leave}set leave(t){this._leave!=t&&(this._leave=t,this.doChange(CStopPropagationInfo.CON_CHANGE_LEAVE))}get keyboard(){return this._keyboard}set keyboard(t){this._keyboard!=t&&(this._keyboard=t,this.doChange(CStopPropagationInfo.CON_CHANGE_KEYBOARD))}get wheel(){return this._wheel}set wheel(t){this._wheel!=t&&(this._wheel=t,this.doChange("wheel"))}doToData(t){super.doToData(t),CDataClass.putData(t,"down",this.down,!1),CDataClass.putData(t,"move",this.move,!1),CDataClass.putData(t,"up",this.up,!1),CDataClass.putData(t,"cancel",this.cancel,!1),CDataClass.putData(t,"over",this.over,!1),CDataClass.putData(t,"out",this.out,!1),CDataClass.putData(t,"enter",this.enter,!1),CDataClass.putData(t,"leave",this.leave,!1),CDataClass.putData(t,"keyboard",this.keyboard,!1),CDataClass.putData(t,"wheel",this.wheel,!1)}doFromData(t){super.doFromData(t),this.down=CDataClass.getData(t,"down",!1),this.move=CDataClass.getData(t,"move",!1),this.up=CDataClass.getData(t,"up",!1),this.cancel=CDataClass.getData(t,"cancel",!1),this.over=CDataClass.getData(t,"over",!1),this.out=CDataClass.getData(t,"out",!1),this.enter=CDataClass.getData(t,"enter",!1),this.leave=CDataClass.getData(t,"leave",!1),this.keyboard=CDataClass.getData(t,"keyboard",!1),this.wheel=CDataClass.getData(t,"wheel",!1)}}class CFilterSet extends CNotifyChangeKindObject{constructor(){super(...arguments),this._blur=!1,this._brightness=!1,this._contrast=!1,this._shadow=!1,this._grayscale=!1,this._hueRotate=!1,this._invert=!1,this._opacity=!1}static get CON_CHANGE_BLUR(){return"changeBlur"}static get CON_CHANGE_BRIGHTNESS(){return"changeBrightness"}static get CON_CHANGE_CONTRAST(){return"changeContrast"}static get CON_CHANGE_SHADOW(){return"changeShadow"}static get CON_CHANGE_GRAYSCALE(){return"changeGrayscale"}static get CON_CHANGE_HUE_ROTATION(){return"changeHueRotaion"}static get CON_CHANGE_INVERT(){return"changeInvert"}static get CON_CHANGE_OPACITY(){return"changeOpacity"}get blur(){return this._blur}set blur(t){this._blur!=t&&(this._blur=t,this.doChange(CFilterSet.CON_CHANGE_BLUR))}get brightness(){return this._brightness}set brightness(t){this._brightness!=t&&(this._brightness=t,this.doChange(CFilterSet.CON_CHANGE_BRIGHTNESS))}get contrast(){return this._contrast}set contrast(t){this._contrast!=t&&(this._contrast=t,this.doChange(CFilterSet.CON_CHANGE_CONTRAST))}get shadow(){return this._shadow}set shadow(t){this._shadow!=t&&(this._shadow=t,this.doChange(CFilterSet.CON_CHANGE_SHADOW))}get grayscale(){return this._grayscale}set grayscale(t){this._grayscale!=t&&(this._grayscale=t,this.doChange(CFilterSet.CON_CHANGE_GRAYSCALE))}get hueRotate(){return this._hueRotate}set hueRotate(t){this._hueRotate!=t&&(this._hueRotate=t,this.doChange(CFilterSet.CON_CHANGE_HUE_ROTATION))}get invert(){return this._invert}set invert(t){this._invert!=t&&(this._invert=t,this.doChange(CFilterSet.CON_CHANGE_INVERT))}get opacity(){return this._opacity}set opacity(t){this._opacity!=t&&(this._opacity=t,this.doChange(CFilterSet.CON_CHANGE_OPACITY))}doToData(t){super.doToData(t),CDataClass.putData(t,"blur",this.blur,!1),CDataClass.putData(t,"brightness",this.brightness,!1),CDataClass.putData(t,"contrast",this.contrast,!1),CDataClass.putData(t,"shadow",this.shadow,!1),CDataClass.putData(t,"grayscale",this.grayscale,!1),CDataClass.putData(t,"hueRotate",this.hueRotate,!1),CDataClass.putData(t,"invert",this.invert,!1),CDataClass.putData(t,"opacity",this.opacity,!1)}doFromData(t){super.doFromData(t),this.blur=CDataClass.getData(t,"blur",!1),this.brightness=CDataClass.getData(t,"brightness",!1),this.contrast=CDataClass.getData(t,"contrast",!1),this.shadow=CDataClass.getData(t,"shadow",!1),this.grayscale=CDataClass.getData(t,"grayscale",!1),this.hueRotate=CDataClass.getData(t,"hueRotate",!1),this.invert=CDataClass.getData(t,"invert",!1),this.opacity=CDataClass.getData(t,"opacity",!1)}}class CFilter extends CNotifyChangeKindObject{static get CON_CHANGE_FILTER_SET(){return"changeFilterSet"}static get CON_CHANGE_BLUR_VALUE(){return"changeBlurValue"}static get CON_CHANGE_BRIGHTNESS_VALUE(){return"changeBrightnessValue"}static get CON_CHANGE_CONSTRAST_VALUE(){return"changeConstrastValue"}static get CON_CHANGE_SHADOW_X(){return"changeShadowX"}static get CON_CHANGE_SHADOW_Y(){return"changeShadowY"}static get CON_CHANGE_SHADOW_BLUR(){return"changeShadowBlur"}static get CON_CHANGE_SHADOW_COLOR(){return"changeShadowColor"}static get CON_CHANGE_GRAYSCALE_VALUE(){return"changeGrayscaleValue"}static get CON_CHANGE_HUE_ROTATE_VALUE(){return"changeHueRotateValue"}static get CON_CHANGE_INVERT_VALUE(){return"changeInvertValue"}static get CON_CHANGE_OPACITY_VALUE(){return"changeOpacityValue"}static get CON_CHANGE_CUSTOM(){return"changeCustom"}constructor(t){super(),this._filterSet=new CFilterSet,this._blurValue=5,this._brightnessValue=1,this._constrastValue=1,this._shadowX=5,this._shadowY=5,this._shadowBlur=5,this._shadowColor="rgba(0,0,0,1)",this._grayscaleValue=1,this._hueRotateValue=90,this._invertValue=1,this._opacityValue=1,this._customFilter="",this._element=t;let e=this;this._filterSet.onChange=function(){e.doChange(CFilter.CON_CHANGE_FILTER_SET)}}get element(){return this._element}get filterSet(){return this._filterSet}get blurValue(){return this._blurValue}set blurValue(t){this._blurValue!=t&&(this._blurValue=t,this.doChange(CFilter.CON_CHANGE_BLUR_VALUE))}get brightnessValue(){return this._brightnessValue}set brightnessValue(t){this._brightnessValue!=t&&(this._brightnessValue=t,this.doChange(CFilter.CON_CHANGE_BRIGHTNESS_VALUE))}get constrastValue(){return this._constrastValue}set constrastValue(t){this._constrastValue!=t&&(this._constrastValue=t,this.doChange(CFilter.CON_CHANGE_CONSTRAST_VALUE))}get shadowX(){return this._shadowX}set shadowX(t){this._shadowX!=t&&(this._shadowX=t,this.doChange(CFilter.CON_CHANGE_SHADOW_X))}get shadowY(){return this._shadowY}set shadowY(t){this._shadowY!=t&&(this._shadowY=t,this.doChange(CFilter.CON_CHANGE_SHADOW_Y))}get shadowBlur(){return this._shadowBlur}set shadowBlur(t){this._shadowBlur!=t&&(this._shadowBlur=t,this.doChange(CFilter.CON_CHANGE_SHADOW_BLUR))}get shadowColor(){return this._shadowColor}set shadowColor(t){this._shadowColor!=t&&(this._shadowColor=t,this.doChange(CFilter.CON_CHANGE_SHADOW_COLOR))}get grayscaleValue(){return this._grayscaleValue}set grayscaleValue(t){this._grayscaleValue!=t&&(this._grayscaleValue=t,this.doChange(CFilter.CON_CHANGE_GRAYSCALE_VALUE))}get hueRotateValue(){return this._hueRotateValue}set hueRotateValue(t){this._hueRotateValue!=t&&(this._hueRotateValue=t,this.doChange(CFilter.CON_CHANGE_HUE_ROTATE_VALUE))}get invertValue(){return this._invertValue}set invertValue(t){this._invertValue!=t&&(this._invertValue=t,this.doChange(CFilter.CON_CHANGE_INVERT_VALUE))}get opacityValue(){return this._opacityValue}set opacityValue(t){this._opacityValue!=t&&(this._opacityValue=t,this.doChange(CFilter.CON_CHANGE_OPACITY_VALUE))}get customFilter(){return this._customFilter}set customFilter(t){this._customFilter!=t&&(this._customFilter=t,this.doChange(CFilter.CON_CHANGE_CUSTOM))}getFilter(){let t="";return this._filterSet.blur&&(t+=" blur("+this._blurValue+"px)"),this._filterSet.brightness&&(t+=" brightness("+this._brightnessValue+")"),this._filterSet.contrast&&(t+=" contrast("+100*this._constrastValue+"%)"),this._filterSet.shadow&&(t+=" drop-shadow("+this._shadowX+"px "+this._shadowY+"px "+this._shadowBlur+"px "+this._shadowColor+")"),this._filterSet.grayscale&&(t+=" grayscale("+100*this._grayscaleValue+"%)"),this._filterSet.hueRotate&&(t+=" hue-rotate("+this._hueRotateValue+"deg)"),this._filterSet.invert&&(t+=" invert("+100*this._invertValue+"%)"),this._filterSet.opacity&&(t+=" invert("+100*this._opacityValue+"%)"),""!=this._customFilter&&(t+=" "+this.customFilter),t}doToData(t){super.doToData(t),CDataClass.putData(t,"filterSet",this.filterSet.toData(),{},!0),CDataClass.putData(t,"blurValue",this.blurValue,5),CDataClass.putData(t,"brightnessValue",this.brightnessValue,1),CDataClass.putData(t,"constrastValue",this.constrastValue,1),CDataClass.putData(t,"shadowX",this.shadowX,5),CDataClass.putData(t,"shadowY",this.shadowY,5),CDataClass.putData(t,"shadowBlur",this.shadowBlur,5),CDataClass.putData(t,"shadowColor",this.shadowColor,"rgba(0,0,0,1)"),CDataClass.putData(t,"grayscaleValue",this.grayscaleValue,1),CDataClass.putData(t,"hueRotateValue",this.hueRotateValue,90),CDataClass.putData(t,"invertValue",this.invertValue,1),CDataClass.putData(t,"opacityValue",this.opacityValue,1),CDataClass.putData(t,"customFilter",this.customFilter,"")}doFromData(t){super.doFromData(t),this.filterSet.fromData(CDataClass.getData(t,"filterSet",{},!0)),this.blurValue=CDataClass.getData(t,"blurValue",5),this.brightnessValue=CDataClass.getData(t,"brightnessValue",1),this.constrastValue=CDataClass.getData(t,"constrastValue",1),this.shadowX=CDataClass.getData(t,"shadowX",5),this.shadowY=CDataClass.getData(t,"shadowY",5),this.shadowBlur=CDataClass.getData(t,"shadowBlur",5),this.shadowColor=CDataClass.getData(t,"shadowColor","rgba(0,0,0,1)"),this.grayscaleValue=CDataClass.getData(t,"grayscaleValue",1),this.hueRotateValue=CDataClass.getData(t,"hueRotateValue",90),this.invertValue=CDataClass.getData(t,"invertValue",1),this.opacityValue=CDataClass.getData(t,"opacityValue",1),this.customFilter=CDataClass.getData(t,"customFilter","")}doChange(t){super.doChange(t),this.doApplyFilter()}doApplyFilter(){null!=this._element&&(this._element.style.filter=this.getFilter(),null!=this.onApplyFilter&&this.onApplyFilter(this))}allOff(){this.filterSet.blur=!1,this.filterSet.brightness=!1,this.filterSet.contrast=!1,this.filterSet.shadow=!1,this.filterSet.grayscale=!1,this.filterSet.hueRotate=!1,this.filterSet.invert=!1,this.filterSet.opacity=!1}}class CTransformerPoints extends CNotifyChangeNotifyObject{get leftTop(){return this._leftTop}get rightTop(){return this._rightTop}get leftBottom(){return this._leftBottom}get rightBottom(){return this._rightBottom}get leftC1(){return this._leftC1}get leftC2(){return this._leftC2}get topC1(){return this._topC1}get topC2(){return this._topC2}get rightC1(){return this._rightC1}get rightC2(){return this._rightC2}get bottomC1(){return this._bottomC1}get bottomC2(){return this._bottomC2}constructor(){super(),this._leftTop=new CNotifyPoint,this._rightTop=new CNotifyPoint,this._leftBottom=new CNotifyPoint,this._rightBottom=new CNotifyPoint,this._leftC1=new CNotifyPoint,this._leftC2=new CNotifyPoint,this._topC1=new CNotifyPoint,this._topC2=new CNotifyPoint,this._rightC1=new CNotifyPoint,this._rightC2=new CNotifyPoint,this._bottomC1=new CNotifyPoint,this._bottomC2=new CNotifyPoint;let t=this;this._leftTop.onChange=function(){t.doChange()},this._leftBottom.onChange=function(){t.doChange()},this._rightTop.onChange=function(){t.doChange()},this._rightBottom.onChange=function(){t.doChange()},this._leftC1.onChange=function(){t.doChange()},this._leftC2.onChange=function(){t.doChange()},this._topC1.onChange=function(){t.doChange()},this._topC2.onChange=function(){t.doChange()},this._rightC1.onChange=function(){t.doChange()},this._rightC2.onChange=function(){t.doChange()},this._bottomC1.onChange=function(){t.doChange()},this._bottomC2.onChange=function(){t.doChange()}}isEmpty(){return this._leftTop.isZero()&&this._leftBottom.isZero()&&this._rightBottom.isZero()&&this._rightTop.isZero()&&this._leftC1.isZero()&&this._leftC2.isZero()&&this._topC1.isZero()&&this._topC2.isZero()&&this._rightC1.isZero()&&this._rightC2.isZero()&&this._bottomC1.isZero()&&this._bottomC2.isZero()}getBounds(){let t=Number.MAX_VALUE,e=Number.MAX_VALUE,i=Number.MIN_VALUE,s=Number.MIN_VALUE;return console.log(this),this._leftTop.x<t&&(t=this._leftTop.x),this._leftBottom.x<t&&(t=this._leftBottom.x),this._rightTop.x<t&&(t=this._rightTop.x),this._rightBottom.x<t&&(t=this._rightBottom.x),this._leftC1.x<t&&(t=this._leftC1.x),this._leftC2.x<t&&(t=this._leftC2.x),this._topC1.x<t&&(t=this._topC1.x),this._topC2.x<t&&(t=this._topC2.x),this._rightC1.x<t&&(t=this._rightC1.x),this._rightC2.x<t&&(t=this._rightC2.x),this._bottomC1.x<t&&(t=this._bottomC1.x),this._bottomC2.x<t&&(t=this._bottomC2.x),this._leftTop.y<e&&(e=this._leftTop.y),this._leftBottom.y<e&&(e=this._leftBottom.y),this._rightTop.y<e&&(e=this._rightTop.y),this._rightBottom.y<e&&(e=this._rightBottom.y),this._leftC1.y<e&&(e=this._leftC1.y),this._leftC2.y<e&&(e=this._leftC2.y),this._topC1.y<e&&(e=this._topC1.y),this._topC2.y<e&&(e=this._topC2.y),this._rightC1.y<e&&(e=this._rightC1.y),this._rightC2.y<e&&(e=this._rightC2.y),this._bottomC1.y<e&&(e=this._rightC1.y),this._bottomC2.y<e&&(e=this._rightC2.y),this._leftTop.x>i&&(i=this._leftTop.x),this._leftBottom.x>i&&(i=this._leftBottom.x),this._rightTop.x>i&&(i=this._rightTop.x),this._rightBottom.x>i&&(i=this._rightBottom.x),this._leftC1.x>i&&(i=this._leftC1.x),this._leftC2.x>i&&(i=this._leftC2.x),this._topC1.x>i&&(i=this._topC1.x),this._topC2.x>i&&(i=this._topC2.x),this._rightC1.x>i&&(i=this._rightC1.x),this._rightC2.x>i&&(i=this._rightC2.x),this._bottomC1.x>i&&(i=this._rightC1.x),this._bottomC2.x>i&&(i=this._rightC2.x),this._leftTop.y>s&&(s=this._leftTop.y),this._leftBottom.y>s&&(s=this._leftBottom.y),this._rightTop.y>s&&(s=this._rightTop.y),this._rightBottom.y>s&&(s=this._rightBottom.y),this._leftC1.y>s&&(s=this._leftC1.y),this._leftC2.y>s&&(s=this._leftC2.y),this._topC1.y>s&&(s=this._topC1.y),this._topC2.y>s&&(s=this._topC2.y),this._rightC1.y>s&&(s=this._rightC1.y),this._rightC2.y>s&&(s=this._rightC2.y),this._bottomC1.y>s&&(s=this._rightC1.y),this._bottomC2.y>s&&(s=this._rightC2.y),t==Number.MAX_VALUE&&e==Number.MAX_VALUE&&i==Number.MIN_VALUE&&s==Number.MIN_VALUE?new CRect:new CRect(t,e,i,s)}}const CON_ELLIPSE_CURVE_LENGTH=.552284749831;class CPoint extends CDataClass{constructor(t,e){super(),this.x=0,this.y=0,null!=t&&(this.x=t),null!=e&&(this.y=e)}doToData(t){super.doToData(t),CDataClass.putData(t,"x",this.x,0),CDataClass.putData(t,"y",this.y,0)}doFromData(t){super.doFromData(t),this.x=CDataClass.getData(t,"x",0),this.y=CDataClass.getData(t,"y",0)}toNotifyPoint(){return new CNotifyPoint(this.x,this.y)}toString(){return this.x+","+this.y}copyFrom(t){this.x=t.x,this.y=t.y}fromStream(t){}static getAngleToPoint(t,e,i,s,a=0){function o(t){return t/180*Math.PI}return new CPoint(e*Math.cos(o(s+a))+t.x,i*Math.sin(o(s+a))+t.y)}static getAngleDistance(t,e){return{angle:CPoint.getAngleFromTwoPoint(t,e),distance:CPoint.getDistancePoints(t,e)}}static getAngleFromTwoPoint(t,e){if(t.x==e.x&&t.y==e.y)return 0;if(t.x==e.x)return t.y<e.y?90:270;if(t.y==e.y)return t.x<e.x?0:180;let i=180*Math.atan((e.y-t.y)/(e.x-t.x))/Math.PI;return e.x<t.x&&e.y<t.y?i=90+(90+i):e.x<t.x&&e.y>=t.y?i=90+(90+i):e.x>=t.x&&e.y<t.y&&(i=270+(90+i)),i}static getTransAnglePoint(t,e,i){let s=e.x-t.x,a=e.y-t.y;if(0==s&&0==a)return t;{let o=Math.sqrt(s*s+a*a);return this.getAngleToPoint(e,o,o,this.getAngleFromTwoPoint(e,t)+i)}}static getDistancePoints(t,e){let i=CCalc.max(t.x,e.x)-CCalc.min(t.x,e.x),s=CCalc.max(t.y,e.y)-CCalc.min(t.y,e.y);return Math.abs(Math.sqrt(i*i+s*s))}static getLineMiddlePoint(t,e,i){return new CPoint(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)}static getPointer(t,e){let i=new CPoint(0,0);return null==e||"offset"==e?(i.x=t.offsetX,i.y=t.offsetY):"page"==e?(i.x=t.pageX,i.y=t.pageY):"screen"==e&&(i.x=t.screenX,i.y=t.screenY),i}static getCrossPoint(t,e,i,s){let a,o=(t.x-e.x)*(i.y-s.y)-(t.y-e.y)*(i.x-s.x);if(0!=o){let n=t.x*e.y-t.y*e.x,r=i.x*s.y-i.y*s.x,A=(n*(i.x-s.x)-(t.x-e.x)*r)/o,h=(n*(i.y-s.y)-(t.y-e.y)*r)/o;a=new CPoint(A,h)}return a}static isInLine(t,e,i){return CPoint.getAngleFromTwoPoint(t,i)==CPoint.getAngleFromTwoPoint(t,e)}static isInCross(t,e,i,s){let a=CPoint.getCrossPoint(t,e,i,s);return null!=a&&(CPoint.isInLine(t,e,a)&&CPoint.isInLine(i,s,a))}static isCrossLineAndPoligon(t,e,i){let s=!1;for(let a=0;a<t.length-1;a++)if(CPoint.isInCross(t[a],t[a+1],e,i)){s=!0;break}return s}static isCrossPoligon(t,e){let i=!1;for(let s=0;s<t.length-1;s++)for(let a=0;a<e.length-1;a++)if(CPoint.isInCross(t[s],t[s+1],e[a],e[a+1])){i=!0;break}return i}static getArrowPoint(t,e,i,s){let a=this.getAngleFromTwoPoint(t,e)-180;return{arrow1:this.getAngleToPoint(e,s,s,i,a),arrow2:this.getAngleToPoint(e,s,s,-i,a)}}static getBezierMiddlePoint(t,e,i,s,a){let o=this.getLineMiddlePoint(t,e,a),n=this.getLineMiddlePoint(e,i,a),r=this.getLineMiddlePoint(i,s,a),A=this.getLineMiddlePoint(o,n,a),h=this.getLineMiddlePoint(n,r,a);return this.getLineMiddlePoint(A,h,a)}static getBezier2MiddlePoint(t,e,i,s){let a=this.getLineMiddlePoint(t,e,s),o=this.getLineMiddlePoint(e,i,s);return this.getLineMiddlePoint(a,o,s)}static getBezierMiddlePointFromPoints(t,e){function i(t){let e=new Array;for(let i=0;i<t.length;i++)e.push(new CPoint(t[i].x,t[i].y));return e}let s,a;for(s=i(t);;){a=[];for(let t=0;t<s.length-1;t++)a.push(this.getLineMiddlePoint(s[t],s[t+1],e));if(a.length<=2)break;s=i(a)}return this.getLineMiddlePoint(a[0],a[1],e)}static getLineCenterAngleToPoint(t,e,i,s,a){let o=180*Math.atan((e.y-t.y)/(e.x-t.x))/Math.PI;e.x<t.x&&e.y<t.y?o=90+(90+o):e.x<t.x&&e.y>=t.y?o=90+(90+o):e.x>=t.x&&e.y<t.y&&(o=270+(90+o));let n=(CCalc.max(t.x,e.x)-CCalc.min(t.x,e.x))/2+CCalc.min(t.x,e.x),r=(CCalc.max(t.y,e.y)-CCalc.min(t.y,e.y))/2+CCalc.min(t.y,e.y);return this.getAngleToPoint(new CPoint(n,r),i,s,a+o)}static getLineMiddleAngleToPoint(t,e,i,s,a,o){let n=180*Math.atan((e.y-t.y)/(e.x-t.x))/Math.PI;e.x<t.x&&e.y<t.y?n=90+(90+n):e.x<t.x&&e.y>=t.y?n=90+(90+n):e.x>=t.x&&e.y<t.y&&(n=270+(90+n));let r=(CCalc.max(t.x,e.x)-CCalc.min(t.x,e.x))*(1-o)+CCalc.min(t.x,e.x),A=(CCalc.max(t.y,e.y)-CCalc.min(t.y,e.y))*(1-o)+CCalc.min(t.y,e.y);return this.getAngleToPoint(new CPoint(r,A),i,s,a+n)}static getPoligonPoints(t,e=!1,i){let s=new CList,a=360/t;for(let e=0;e<t;e++)s.add(CPoint.getAngleToPoint(new CPoint(.5,.5),.5,.5,e*a,i));return e&&s.add(CPoint.getAngleToPoint(new CPoint(.5,.5),.5,.5,0,i)),s}static getHornPoints(t,e,i=!1,s){let a=new CList,o=360/(2*t);for(let i=0;i<2*t;i++)i%2==0?a.add(CPoint.getAngleToPoint(new CPoint(.5,.5),.5,.5,i*o,s)):a.add(CPoint.getAngleToPoint(new CPoint(.5,.5),.5*e,.5*e,i*o,s));return i&&a.add(CPoint.getAngleToPoint(new CPoint(.5,.5),.5,.5,0,s)),a}static create(t=0,e=0){return new CPoint(t,e)}static getDefaultData(){return{x:0,y:0}}static getTransformPoint(t,e,i,s,a,o){let n=new CPoint,r=(e.x-t.left)/t.width,A=(e.y-t.top)/t.height,h=CPoint.getLineMiddlePoint(i,a,A).x,g=CPoint.getLineMiddlePoint(s,o,A).x,C=CPoint.getLineMiddlePoint(i,s,r).y,l=CPoint.getLineMiddlePoint(a,o,r).y;return n.x=CCalc.crRange2Value(t.left,t.right,e.x,h,g),n.y=CCalc.crRange2Value(t.top,t.bottom,e.y,C,l),n}static getTransformCurvePoint(t,e,i,s,a,o,n,r,A,h,g,C,l,u){let c=new CPoint,d=(e.x-t.left)/t.width,p=(e.y-t.top)/t.height,E=CPoint.xTransformLine(i,s,a,o,n,r,A,h,g,C,l,u,d),I=CPoint.yTransformLine(i,s,a,o,n,r,A,h,g,C,l,u,p);return c.x=CPoint.getBezierMiddlePoint(E.startPoint,E.curve1,E.curve2,E.stopPoint,p).x,c.y=CPoint.getBezierMiddlePoint(I.startPoint,I.curve1,I.curve2,I.stopPoint,d).y,c}static getMiddleCurveLineFromTwoLine(t,e,i,s,a,o,n,r,A){let h=CPoint.getLineMiddlePoint(t,a,A),g=CPoint.getLineMiddlePoint(s,r,A);return{startPoint:h,curve1:CPoint.getLineMiddlePoint(e,o,A),curve2:CPoint.getLineMiddlePoint(i,n,A),stopPoint:g}}static xTransformLine(t,e,i,s,a,o,n,r,A,h,g,C,l){let u=CPoint.getLineMiddlePoint(t,e,l),c=CPoint.getLineMiddlePoint(i,s,l),d=CPoint.getDistancePoints(u,c),p=CPoint.getBezierMiddlePoint(t,n,r,e,l),E=CPoint.getBezierMiddlePoint(i,g,C,s,l),I=CPoint.getDistancePoints(p,E)/d,D=CPoint.getMiddleCurveLineFromTwoLine(t,a,o,i,e,A,h,s,l);D.startPoint.x*=I,D.stopPoint.x*=I,D.curve1.x*=I,D.curve2.x*=I,D.startPoint.y*=I,D.stopPoint.y*=I,D.curve1.y*=I,D.curve2.y*=I;let m=p.x-D.startPoint.x;D.startPoint.x+=m,D.stopPoint.x+=m,D.curve1.x+=m,D.curve2.x+=m;let _=p.y-D.startPoint.y;D.startPoint.y+=_,D.stopPoint.y+=_,D.curve1.y+=_,D.curve2.y+=_;let f=CPoint.getAngleFromTwoPoint(u,c),B=CPoint.getAngleFromTwoPoint(p,E);return D.curve1=CPoint.getTransAnglePoint(D.curve1,D.startPoint,B-f),D.curve2=CPoint.getTransAnglePoint(D.curve2,D.startPoint,B-f),D.stopPoint=CPoint.getTransAnglePoint(D.stopPoint,D.startPoint,B-f),{startPoint:D.startPoint,curve1:D.curve1,curve2:D.curve2,stopPoint:D.stopPoint}}static yTransformLine(t,e,i,s,a,o,n,r,A,h,g,C,l){let u=CPoint.getLineMiddlePoint(t,i,l),c=CPoint.getLineMiddlePoint(e,s,l),d=CPoint.getDistancePoints(u,c),p=CPoint.getBezierMiddlePoint(t,a,o,i,l),E=CPoint.getBezierMiddlePoint(e,A,h,s,l),I=CPoint.getDistancePoints(p,E)/d,D=CPoint.getMiddleCurveLineFromTwoLine(t,n,r,e,i,g,C,s,l);D.startPoint.x*=I,D.stopPoint.x*=I,D.curve1.x*=I,D.curve2.x*=I,D.startPoint.y*=I,D.stopPoint.y*=I,D.curve1.y*=I,D.curve2.y*=I;let m=p.x-D.startPoint.x;D.startPoint.x+=m,D.stopPoint.x+=m,D.curve1.x+=m,D.curve2.x+=m;let _=p.y-D.startPoint.y;D.startPoint.y+=_,D.stopPoint.y+=_,D.curve1.y+=_,D.curve2.y+=_;let f=CPoint.getAngleFromTwoPoint(u,c),B=CPoint.getAngleFromTwoPoint(p,E);return D.curve1=CPoint.getTransAnglePoint(D.curve1,D.startPoint,B-f),D.curve2=CPoint.getTransAnglePoint(D.curve2,D.startPoint,B-f),D.stopPoint=CPoint.getTransAnglePoint(D.stopPoint,D.startPoint,B-f),{startPoint:D.startPoint,curve1:D.curve1,curve2:D.curve2,stopPoint:D.stopPoint}}static splitLinePoints(t,e,i){let s=new Array;for(let a=1;a<=i;a++){let o=1/i*a;s.push(CPoint.getLineMiddlePoint(t,e,o))}return s}static splitCurveLinePoints(t,e,i,s,a){let o=new Array;for(let n=1;n<=a;n++){let r=1/a*n;o.push(CPoint.getBezierMiddlePoint(t,e,i,s,r))}return o}static splitCurve2LinePoints(t,e,i,s){let a=new Array;for(let o=1;o<=s;o++){let n=1/s*o;a.push(CPoint.getBezier2MiddlePoint(t,e,i,n))}return a}}class CPoint3D extends CDataClass{constructor(t=0,e=0,i=0){super(),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}doToData(t){super.doToData(t),CDataClass.putData(t,"x",this.x,0),CDataClass.putData(t,"y",this.y,0),CDataClass.putData(t,"z",this.z,0)}doFromData(t){super.doFromData(t),this.x=CDataClass.getData(t,"x",0),this.y=CDataClass.getData(t,"y",0),this.z=CDataClass.getData(t,"z",0)}position3DTo2D(t,e,i,s=0,a=0){let o=.8*i,n=o/(o-this.z);return{x:this.x*n+t,y:this.y*n+e,objectWidth:s*n,objectHeight:a*n}}static getAngleToPoint3D(t,e,i,s){let a=i*(Math.PI/180),o=e*(Math.PI/180);const n=s*Math.sin(a)*Math.cos(o)+t.x,r=s*Math.sin(a)*Math.sin(o)+t.y,A=s*Math.cos(a)+t.z;return new CPoint3D(n,r,A)}static getAngleToPoint3DEllipse(t,e,i,s,a,o){let n=i*(Math.PI/180),r=e*(Math.PI/180);const A=s*Math.sin(n)*Math.cos(r)+t.x,h=a*Math.sin(n)*Math.sin(r)+t.y,g=o*Math.cos(n)+t.z;return new CPoint3D(A,h,g)}static getAngleToPoint3DXY(t,e,i,s){let a=-1*CCalc.sind(e),o=s*CCalc.sind(i)*CCalc.sind(e)+t.x,n=s*CCalc.cosd(i)*a+t.y,r=s*CCalc.cosd(e)*CCalc.cosd(i)+t.z;return new CPoint3D(o,n,r)}static a(t,e){}}class CRect extends CDataClass{constructor(t=0,e=0,i=0,s=0){super(),this.left=t,this.top=e,this.right=i,this.bottom=s}get width(){return this.right-this.left}set width(t){this.right=this.left+t}get height(){return this.bottom-this.top}set height(t){this.bottom=this.top+t}set all(t){this.left=t,this.top=t,this.right=t,this.bottom=t}get leftTop(){return new CPoint(this.left,this.top)}get leftBottom(){return new CPoint(this.left,this.bottom)}get rightTop(){return new CPoint(this.right,this.top)}get rightBottom(){return new CPoint(this.right,this.bottom)}get center(){return new CPoint(this.left+this.width/2,this.top+this.height/2)}doToData(t){super.doToData(t),CDataClass.putData(t,"left",this.left,0),CDataClass.putData(t,"top",this.top,0),CDataClass.putData(t,"right",this.right,0),CDataClass.putData(t,"bottom",this.bottom,0)}doFromData(t){super.doFromData(t),this.left=CDataClass.getData(t,"left",0),this.top=CDataClass.getData(t,"top",0),this.right=CDataClass.getData(t,"right",0),this.bottom=CDataClass.getData(t,"bottom",0)}isIn(t,e){return this.left<=t&&this.right>=t&&this.top<=e&&this.bottom>=e}isInPoint(t){return this.isIn(t.x,t.y)}isInRect(t){let e=!1;return this.isInPoint(t.leftTop)&&this.isInPoint(t.leftBottom)&&this.isInPoint(t.rightTop)&&this.isInPoint(t.rightBottom)&&(e=!0),e}isIntersection(t){let e=!1;return(this.isInPoint(t.leftTop)||this.isInPoint(t.leftBottom)||this.isInPoint(t.rightTop)||this.isInPoint(t.rightBottom))&&(e=!0),(t.isInPoint(this.leftTop)||t.isInPoint(this.leftBottom)||t.isInPoint(this.rightTop)||t.isInPoint(this.rightBottom))&&(e=!0),this.isInRect(t)&&(e=!0),t.isInRect(this)&&(e=!0),t.left<this.left&&t.right>this.right&&t.top>this.top&&t.bottom<this.bottom&&(e=!0),t.left>this.left&&t.right<this.right&&t.top<this.top&&t.bottom>this.bottom&&(e=!0),this.left<t.left&&this.right>t.right&&this.top>t.top&&this.bottom<t.bottom&&(e=!0),this.left>t.left&&this.right<t.right&&this.top<t.top&&this.bottom>t.bottom&&(e=!0),e}isMinusSize(){return this.right<this.left||this.top>this.bottom}getIntersection(t){return new CRect(CCalc.max(this.left,t.left),CCalc.max(this.top,t.top),CCalc.min(this.right,t.right),CCalc.min(this.bottom,t.bottom))}copyFrom(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom}inflate(t,e){this.left=this.left-t,this.top=this.top-e,this.right=this.right+t,this.bottom=this.bottom+e}inflateTo(t,e){let i=CRect.create(this.left,this.top,this.right,this.bottom);return i.inflate(t,e),i}offset(t,e){this.left=this.left+t,this.top=this.top+e,this.right=this.right+t,this.bottom=this.bottom+e}set(t,e,i,s){this.left=t,this.top=e,this.right=i,this.bottom=s}getFitRect(t,e){let i=0,s=0,a=0,o=0,n=0,r=0;return a=t.right-t.left,o=this.right-this.left,n=t.bottom-t.top,r=this.bottom-this.top,CCalc.cr(a,n,100,0,4)>CCalc.cr(o,r,100,0,4)?(s=r,i=CCalc.cr(a,n,0,s,3),1==e?new CRect((o-i)/2,0,i+(o-i)/2,s):new CRect(0,0,i,s)):(i=o,s=CCalc.cr(a,n,i,0,4),1==e?new CRect(0,(r-s)/2,i,s+(r-s)/2):new CRect(0,0,i,s))}isEmpty(){return 0==this.left&&0==this.top&&0==this.right&&0==this.bottom}equal(t){return this.left==t.left&&this.top==t.top&&this.right==t.right&&this.bottom==t.bottom}toString(){return this.left+","+this.top+","+this.right+","+this.bottom}fromString(t){let e=t.split(",");(e.length=4)&&(this.left=parseInt(e[0]),this.top=parseInt(e[1]),this.right=parseInt(e[2]),this.bottom=parseInt(e[3]))}static create(t,e,i,s){return new CRect(t,e,i,s)}static getDefaultData(){return{left:0,top:0,right:0,bottom:0}}static newEmpty(){return CRect.create(0,0,0,0)}static copyFrom(t){return new CRect(t.left,t.top,t.right,t.bottom)}}class CNotifyPoint extends CNotifyChangeKindObject{static get CON_CHANGE_X(){return"x"}static get CON_CHANGE_Y(){return"y"}get x(){return this._x}set x(t){this._x!=t&&(this._x=t,this.doChange(CNotifyPoint.CON_CHANGE_X))}get y(){return this._y}set y(t){this._y!=t&&(this._y=t,this.doChange(CNotifyPoint.CON_CHANGE_Y))}constructor(t=0,e=0){super(),this._x=t,this._y=e}doToData(t){super.doToData(t),CDataClass.putData(t,"x",this.x,0),CDataClass.putData(t,"y",this.y,0)}doFromData(t){super.doFromData(t),this.x=CDataClass.getData(t,"x",0),this.y=CDataClass.getData(t,"y",0)}toPoint(){return new CPoint(this.x,this.y)}toString(){return this.x+","+this.y}copyTo(){return new CNotifyPoint(this.x,this.y)}isZero(){return 0==this.x&&0==this.y}static create(t,e){return new CNotifyPoint(t,e)}}class CNotifyRect extends CNotifyChangeKindObject{static get CON_CHANGE_LEFT(){return"l"}static get CON_CHANGE_TOP(){return"t"}static get CON_CHANGE_RIGHT(){return"r"}static get CON_CHANGE_BOTTOM(){return"b"}static get CON_CHANGE_ALL(){return"a"}constructor(t=0,e=0,i=0,s=0){super(),this._left=t,this._top=e,this._right=i,this._bottom=s}get left(){return this._left}set left(t){this._left!=t&&(this._left=t,this.doChange(CNotifyRect.CON_CHANGE_LEFT))}get top(){return this._top}set top(t){this._top!=t&&(this._top=t,this.doChange(CNotifyRect.CON_CHANGE_TOP))}get right(){return this._right}set right(t){this._right!=t&&(this._right=t,this.doChange(CNotifyRect.CON_CHANGE_RIGHT))}get bottom(){return this._bottom}set bottom(t){this._bottom!=t&&(this._bottom=t,this.doChange(CNotifyRect.CON_CHANGE_BOTTOM))}get width(){return this._right-this._left}set width(t){this.width!=t&&(this._right=this._left+t,this.doChange(CNotifyRect.CON_CHANGE_RIGHT))}get height(){return this._bottom-this._top}set height(t){this.height!=t&&(this._bottom=this._top+t,this.doChange(CNotifyRect.CON_CHANGE_BOTTOM))}set all(t){this._left=t,this._top=t,this._right=t,this._bottom=t,this.doChange(CNotifyRect.CON_CHANGE_ALL)}get leftTop(){return new CPoint(this.left,this.top)}get leftBottom(){return new CPoint(this.left,this.bottom)}get rightTop(){return new CPoint(this.right,this.top)}get rightBottom(){return new CPoint(this.right,this.bottom)}get rect(){return new CRect(this._left,this._top,this._right,this._bottom)}equalRect(t){return t.left==this.left&&t.top==this.top&&t.right==this.right&&t.bottom==this.bottom}doToData(t){super.doToData(t),CDataClass.putData(t,"left",this.left,0),CDataClass.putData(t,"top",this.top,0),CDataClass.putData(t,"right",this.right,0),CDataClass.putData(t,"bottom",this.bottom,0)}doFromData(t){super.doFromData(t),this.left=CDataClass.getData(t,"left",0),this.top=CDataClass.getData(t,"top",0),this.right=CDataClass.getData(t,"right",0),this.bottom=CDataClass.getData(t,"bottom",0)}}var EPathPointKind,ETextAlign,EGradientKind,EStyleKind,EStrokeLineCap,EStrokeLineJoin,ECanvasItemAlign,ECanvasItemKind,EPatternKind,EPaintKind,EControlMoveKind,EGraphAnimationValueKind,EPointsValueKind;!function(t){t[t.BEGIN=0]="BEGIN",t[t.MOVETO=1]="MOVETO",t[t.LINETO=2]="LINETO",t[t.CURVETO2=3]="CURVETO2",t[t.CURVETO3=4]="CURVETO3",t[t.CLOSE=5]="CLOSE"}(EPathPointKind||(EPathPointKind={}));class CPathPoint extends CNotifyChangeNotifyObject{constructor(t,e,i){super(),this.pointKind=EPathPointKind.BEGIN;let s=this;this.pointKind=t,this.point=new CNotifyPoint(e,i),this.point.onChange=function(){s.doChange()},this.cPoint1=new CNotifyPoint(0,0),this.cPoint1.onChange=function(){s.doChange()},this.cPoint2=new CNotifyPoint(0,0),this.cPoint2.onChange=function(){s.doChange()}}copyTo(){let t=new CPathPoint(this.pointKind,this.point.x,this.point.y);return t.cPoint1.x=this.cPoint1.x,t.cPoint1.y=this.cPoint1.y,t.cPoint2.x=this.cPoint2.x,t.cPoint2.y=this.cPoint2.y,t}copyFrom(t){this.pointKind=t.pointKind,this.point.copyFrom(t.point),this.cPoint1.copyFrom(t.cPoint1),this.cPoint2.copyFrom(t.cPoint2)}toData(){let t={};return CDataClass.putData(t,"pointKind",this.pointKind,EPathPointKind.LINETO),CDataClass.putData(t,"point",this.point.toData(),{},!0),CDataClass.putData(t,"cPoint1",this.cPoint1.toData(),{},!0),CDataClass.putData(t,"cPoint2",this.cPoint2.toData(),{},!0),t}fromData(t){this.pointKind=CDataClass.getData(t,"pointKind",EPathPointKind.LINETO),this.point.fromData(CDataClass.getData(t,"point",{},!0)),this.cPoint1.fromData(CDataClass.getData(t,"cPoint1",{},!0)),this.cPoint2.fromData(CDataClass.getData(t,"cPoint2",{},!0))}static create(t,e,i,s){let a=new CPathPoint(t,e.x,e.y);return a.cPoint1=i.toNotifyPoint(),a.cPoint2=s.toNotifyPoint(),a}static lineTocurve(t,e,i,s){let a=new CPathPoint(EPathPointKind.CURVETO3,i,s),o=new CPoint(t,e),n=new CPoint(i,s),r=CPoint.getLineMiddlePoint(o,n,1/3);a.cPoint1.x=r.x,a.cPoint1.y=r.y;let A=CPoint.getLineMiddlePoint(o,n,1/3*2);return a.cPoint2.x=A.x,a.cPoint2.y=A.y,a}}class CPathTransformer extends CNotifyChangeNotifyObject{get leftTop(){return this._leftTop}get rightTop(){return this._rightTop}get leftBottom(){return this._leftBottom}get rightBottom(){return this._rightBottom}get leftCurve1(){return this._leftCurve1}get leftCurve2(){return this._leftCurve2}get rightCurve1(){return this._rightCurve1}get rightCurve2(){return this._rightCurve2}get topCurve1(){return this._topCurve1}get topCurve2(){return this._topCurve2}get bottomCurve1(){return this._bottomCurve1}get bottomCurve2(){return this._bottomCurve2}constructor(){super(),this._leftTop=new CNotifyPoint,this._rightTop=new CNotifyPoint,this._leftBottom=new CNotifyPoint,this._rightBottom=new CNotifyPoint,this._leftCurve1=new CNotifyPoint,this._leftCurve2=new CNotifyPoint,this._topCurve1=new CNotifyPoint,this._topCurve2=new CNotifyPoint,this._rightCurve1=new CNotifyPoint,this._rightCurve2=new CNotifyPoint,this._bottomCurve1=new CNotifyPoint,this._bottomCurve2=new CNotifyPoint;let t=this;this.leftTop.onChange=function(){t.doChange()},this.rightTop.onChange=function(){t.doChange()},this.leftBottom.onChange=function(){t.doChange()},this.rightBottom.onChange=function(){t.doChange()},this.leftCurve1.onChange=function(){t.doChange()},this.leftCurve2.onChange=function(){t.doChange()},this.topCurve1.onChange=function(){t.doChange()},this.topCurve2.onChange=function(){t.doChange()},this.rightCurve1.onChange=function(){t.doChange()},this.rightCurve2.onChange=function(){t.doChange()},this.bottomCurve1.onChange=function(){t.doChange()},this.bottomCurve2.onChange=function(){t.doChange()}}getTransformData(t,e){let i=e.copyTo();for(let s=0;s<e.length;s++)if(e.get(s).pointKind==EPathPointKind.MOVETO||e.get(s).pointKind==EPathPointKind.LINETO||e.get(s).pointKind==EPathPointKind.CURVETO2||e.get(s).pointKind==EPathPointKind.CURVETO3){let a=e.get(s).point,o=CPoint.getTransformCurvePoint(t,a.toPoint(),this.leftTop.toPoint(),this.rightTop.toPoint(),this.leftBottom.toPoint(),this.rightBottom.toPoint(),this.leftCurve1.toPoint(),this.leftCurve2.toPoint(),this.topCurve1.toPoint(),this.topCurve2.toPoint(),this.rightCurve1.toPoint(),this.rightCurve2.toPoint(),this.bottomCurve1.toPoint(),this.bottomCurve2.toPoint());i.get(s).point.x=o.x,i.get(s).point.y=o.y,a=e.get(s).cPoint1,o=CPoint.getTransformCurvePoint(t,a.toPoint(),this.leftTop.toPoint(),this.rightTop.toPoint(),this.leftBottom.toPoint(),this.rightBottom.toPoint(),this.leftCurve1.toPoint(),this.leftCurve2.toPoint(),this.topCurve1.toPoint(),this.topCurve2.toPoint(),this.rightCurve1.toPoint(),this.rightCurve2.toPoint(),this.bottomCurve1.toPoint(),this.bottomCurve2.toPoint()),i.get(s).cPoint1.x=o.x,i.get(s).cPoint1.y=o.y,a=e.get(s).cPoint2,o=CPoint.getTransformCurvePoint(t,a.toPoint(),this.leftTop.toPoint(),this.rightTop.toPoint(),this.leftBottom.toPoint(),this.rightBottom.toPoint(),this.leftCurve1.toPoint(),this.leftCurve2.toPoint(),this.topCurve1.toPoint(),this.topCurve2.toPoint(),this.rightCurve1.toPoint(),this.rightCurve2.toPoint(),this.bottomCurve1.toPoint(),this.bottomCurve2.toPoint()),i.get(s).cPoint2.x=o.x,i.get(s).cPoint2.y=o.y}return i}isEmpty(){return 0==this.leftTop.x&&0==this.leftTop.y&&0==this.rightTop.x&&0==this.rightTop.y&&0==this.leftBottom.x&&0==this.leftBottom.y&&0==this.rightBottom.x&&0==this.rightBottom.y&&0==this.leftCurve1.x&&0==this.leftCurve1.y&&0==this.leftCurve2.x&&0==this.leftCurve2.y&&0==this.topCurve1.x&&0==this.topCurve1.y&&0==this.topCurve2.x&&0==this.topCurve2.y&&0==this.rightCurve1.x&&0==this.rightCurve1.y&&0==this.rightCurve2.x&&0==this.rightCurve2.y&&0==this.bottomCurve1.x&&0==this.bottomCurve1.y&&0==this.bottomCurve2.x&&0==this.bottomCurve2.y}}class CPathPointList extends CList{constructor(){super(...arguments),this._width=0,this._height=0,this._transformer=new CPathTransformer}get width(){return this._width}set width(t){this._width!=t&&(this._width=t)}get height(){return this._height}set height(t){this._height!=t&&(this._height=t)}get transformer(){return this._transformer}set transformer(t){if(this._transformer!=t&&(this._transformer=t,this.doChange("transformer"),null!=t)){let e=this;t.onChange=function(){e.doChange("transformer")}}}doToData(t){super.doToData(t);let e=[];for(let t=0;t<this.length;t++){let i=this.get(t).toData();e.push(i)}CDataClass.putData(t,"width",this.width,0),CDataClass.putData(t,"height",this.height,0),CDataClass.putData(t,"data",e,[],!0)}doFromData(t){super.doFromData(t),this.clear(),this.width=CDataClass.getData(t,"width",0),this.height=CDataClass.getData(t,"height",0);let e=CDataClass.getData(t,"data",[],!0);for(let t=0;t<e.length;t++){let i=new CPathPoint(EPathPointKind.BEGIN,0,0);i.fromData(e[t]),this.add(i)}}toData(){let t={};return this.doToData(t),t}add(t){super.add(t);let e=this;t.onChange=function(){e.doChange("point")}}insert(t,e){super.insert(t,e);let i=this;e.onChange=function(){i.doChange("point")}}addPoint(t,e,i,s){this.add(CPathPoint.create(t,e,i,s))}addPointBegin(){this.add(CPathPoint.create(EPathPointKind.BEGIN,CPoint.create(0,0),CPoint.create(0,0),CPoint.create(0,0)))}addPointMoveTo(t){let e=CPathPoint.create(EPathPointKind.MOVETO,t,CPoint.create(0,0),CPoint.create(0,0));return this.add(e),e}addPointLineTo(t){let e=CPathPoint.create(EPathPointKind.LINETO,t,CPoint.create(0,0),CPoint.create(0,0));return this.add(e),e}addPointCurveTo2(t,e){let i=CPathPoint.create(EPathPointKind.CURVETO2,t,e,CPoint.create(0,0));return this.add(i),i}addPointCurveTo3(t,e,i){let s=CPathPoint.create(EPathPointKind.CURVETO3,t,e,i);return this.add(s),s}addArc(t,e,i,s){let a=CPoint.getAngleFromTwoPoint(t,this.get(this.length-1).point.toPoint()),o=e,n=CPoint.getAngleToPoint(t,i,s,a);if(e>0){for(;o>90;){let e=CPoint.getAngleToPoint(t,i,s,a+90),r=CON_ELLIPSE_CURVE_LENGTH,A=CPoint.getAngleToPoint(n,i*r,s*r,90,CPoint.getAngleFromTwoPoint(t,n)),h=CPoint.getAngleToPoint(e,i*r,s*r,-90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,A,h),n.copyFrom(e),a+=90,o-=90}let e=CPoint.getAngleToPoint(t,i,s,a+o),r=CCalc.cr(CON_ELLIPSE_CURVE_LENGTH,0,90,o,2),A=CPoint.getAngleToPoint(n,i*r,s*r,90,CPoint.getAngleFromTwoPoint(t,n)),h=CPoint.getAngleToPoint(e,i*r,s*r,-90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,A,h)}else{for(;o<-90;){let e=CPoint.getAngleToPoint(t,i,s,a-90),r=CON_ELLIPSE_CURVE_LENGTH,A=CPoint.getAngleToPoint(n,i*r,s*r,-90,CPoint.getAngleFromTwoPoint(t,n)),h=CPoint.getAngleToPoint(e,i*r,s*r,90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,A,h),n.copyFrom(e),a-=90,o+=90}let e=CPoint.getAngleToPoint(t,i,s,a+o),r=CCalc.cr(CON_ELLIPSE_CURVE_LENGTH,0,90,Math.abs(o),2),A=CPoint.getAngleToPoint(n,i*r,s*r,-90,CPoint.getAngleFromTwoPoint(t,n)),h=CPoint.getAngleToPoint(e,i*r,s*r,90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,A,h)}}addDecalcomanieXReverse(t,e=!0,i=!1){function s(e){let i=t-e.x;return new CPoint(t+i,e.y)}let a=new CPathPointList;a.copyFrom(this);for(let t=a.length-1;t>=0;t--){if(t==a.length-1){let i=s(new CPoint(a.get(t).point.x,a.get(t).point.y));e?this.addPointLineTo(i):this.addPointMoveTo(i)}if(t-1>=0){let e=new CPoint(a.get(t-1).point.x,a.get(t-1).point.y),i=new CPoint(a.get(t).cPoint1.x,a.get(t).cPoint1.y),o=new CPoint(a.get(t).cPoint2.x,a.get(t).cPoint2.y);switch(a.get(t).pointKind){case EPathPointKind.MOVETO:this.addPointMoveTo(s(e));break;case EPathPointKind.LINETO:this.addPointLineTo(s(e));break;case EPathPointKind.CURVETO2:this.addPointCurveTo2(s(e),s(i));break;case EPathPointKind.CURVETO3:this.addPointCurveTo3(s(e),s(o),s(i));break;case EPathPointKind.CLOSE:return}}}i&&this.addPointClose()}addDecalcomanieX(t){function e(e){let i=t-e.x;return new CPoint(t+i,e.y)}let i=new CPathPointList;i.copyFrom(this);for(let t=0;t<i.length;t++)switch(i.get(t).pointKind){case EPathPointKind.MOVETO:this.addPointMoveTo(e(i.get(t).point.toPoint()));break;case EPathPointKind.LINETO:this.addPointLineTo(e(i.get(t).point.toPoint()));break;case EPathPointKind.CURVETO2:this.addPointCurveTo2(e(i.get(t).point.toPoint()),e(i.get(t).cPoint1.toPoint()));break;case EPathPointKind.CURVETO3:this.addPointCurveTo3(e(i.get(t).point.toPoint()),e(i.get(t).cPoint1.toPoint()),e(i.get(t).cPoint2.toPoint()));break;case EPathPointKind.CLOSE:this.addPointClose()}}addDecalcomanieYReverse(t,e=!0,i=!1){function s(e){let i=t-e.y;return new CPoint(e.x,t+i)}let a=new CPathPointList;a.copyFrom(this);for(let t=a.length-1;t>=0;t--){if(t==a.length-1){let i=s(a.get(t).point.toPoint());e?this.addPointLineTo(i):this.addPointMoveTo(i)}if(t-1>=0)switch(a.get(t).pointKind){case EPathPointKind.MOVETO:this.addPointMoveTo(s(a.get(t-1).point.toPoint()));break;case EPathPointKind.LINETO:this.addPointLineTo(s(a.get(t-1).point.toPoint()));break;case EPathPointKind.CURVETO2:this.addPointCurveTo2(s(a.get(t-1).point.toPoint()),s(a.get(t).cPoint1.toPoint()));break;case EPathPointKind.CURVETO3:this.addPointCurveTo3(s(a.get(t-1).point.toPoint()),s(a.get(t).cPoint2.toPoint()),s(a.get(t).cPoint1.toPoint()));break;case EPathPointKind.CLOSE:return}}i&&this.addPointClose()}addDecalcomanieY(t){function e(e){let i=t-e.y;return new CPoint(e.x,t+i)}let i=new CPathPointList;i.copyFrom(this);for(let t=0;t<i.length;t++)switch(i.get(t).pointKind){case EPathPointKind.MOVETO:this.addPointMoveTo(e(i.get(t).point.toPoint()));break;case EPathPointKind.LINETO:this.addPointLineTo(e(i.get(t).point.toPoint()));break;case EPathPointKind.CURVETO2:this.addPointCurveTo2(e(i.get(t).point.toPoint()),e(i.get(t).cPoint1.toPoint()));break;case EPathPointKind.CURVETO3:this.addPointCurveTo3(e(i.get(t).point.toPoint()),e(i.get(t).cPoint1.toPoint()),e(i.get(t).cPoint2.toPoint()));break;case EPathPointKind.CLOSE:this.addPointClose()}}addPointClose(){if(this.length>0&&this.get(this.length-1).pointKind==EPathPointKind.CLOSE)return;let t=CPathPoint.create(EPathPointKind.CLOSE,CPoint.create(0,0),CPoint.create(0,0),CPoint.create(0,0));return this.add(t),t}deletePoint(t){if("number"==typeof t)this.length-1>t?(this.get(t+1).pointKind==EPathPointKind.CLOSE&&this.delete(t+1),this.delete(t)):this.length-1==t&&this.delete(t);else{let e=-1;for(let i=0;i<this.length;i++)if(this.get(i)==t){e=i;break}-1!=e&&(this.length-1>e?(this.get(e+1).pointKind==EPathPointKind.CLOSE&&this.delete(e+1),this.delete(e)):this.length-1==e&&this.delete(e))}}setPathData(t){let e=this;this._transformer.isEmpty()||(e=this._transformer.getTransformData(this.getBounds(),this));for(let i=0;i<e.length;i++)switch(e.get(i).pointKind){case EPathPointKind.BEGIN:t.beginPath();break;case EPathPointKind.MOVETO:t.moveTo(e.get(i).point.x,e.get(i).point.y);break;case EPathPointKind.LINETO:t.lineTo(e.get(i).point.x,e.get(i).point.y);break;case EPathPointKind.CURVETO2:t.quadraticCurveTo(e.get(i).cPoint1.x,e.get(i).cPoint1.y,e.get(i).point.x,e.get(i).point.y);break;case EPathPointKind.CURVETO3:t.bezierCurveTo(e.get(i).cPoint1.x,e.get(i).cPoint1.y,e.get(i).cPoint2.x,e.get(i).cPoint2.y,e.get(i).point.x,e.get(i).point.y);break;case EPathPointKind.CLOSE:t.closePath()}}movePoint(t,e){for(var i=0;i<this.length;i++)this.get(i).pointKind!=EPathPointKind.BEGIN&&this.get(i).pointKind!=EPathPointKind.CLOSE&&(this.get(i).point.x=this.get(i).point.x+t,this.get(i).point.y=this.get(i).point.y+e,this.get(i).cPoint1.x=this.get(i).cPoint1.x+t,this.get(i).cPoint1.y=this.get(i).cPoint1.y+e,this.get(i).cPoint2.x=this.get(i).cPoint2.x+t,this.get(i).cPoint2.y=this.get(i).cPoint2.y+e)}scale(t,e){for(var i=0;i<this.length;i++)this.get(i).pointKind!=EPathPointKind.BEGIN&&this.get(i).pointKind!=EPathPointKind.CLOSE&&(this.get(i).point.x=this.get(i).point.x*t,this.get(i).point.y=this.get(i).point.y*e,this.get(i).cPoint1.x=this.get(i).cPoint1.x*t,this.get(i).cPoint1.y=this.get(i).cPoint1.y*e,this.get(i).cPoint2.x=this.get(i).cPoint2.x*t,this.get(i).cPoint2.y=this.get(i).cPoint2.y*e)}getBounds(){if(0==this.length)return new CRect;{let e=Number.MAX_VALUE,i=Number.MAX_VALUE,s=Number.MIN_VALUE,a=Number.MIN_VALUE;for(var t=0;t<this.length;t++)this.get(t).pointKind!=EPathPointKind.BEGIN&&this.get(t).pointKind!=EPathPointKind.CLOSE&&(0==t?(e=this.get(t).point.x,i=this.get(t).point.y,s=this.get(t).point.x,a=this.get(t).point.y):(this.get(t).point.x<e&&(e=this.get(t).point.x),this.get(t).point.y<i&&(i=this.get(t).point.y),this.get(t).point.x>s&&(s=this.get(t).point.x),this.get(t).point.y>a&&(a=this.get(t).point.y)),this.get(t).pointKind!=EPathPointKind.CURVETO2&&this.get(t).pointKind!=EPathPointKind.CURVETO3||(this.get(t).cPoint1.x<e&&(e=this.get(t).cPoint1.x),this.get(t).cPoint1.y<i&&(i=this.get(t).cPoint1.y),this.get(t).cPoint1.x>s&&(s=this.get(t).cPoint1.x),this.get(t).cPoint1.y>a&&(a=this.get(t).cPoint1.y)),this.get(t).pointKind==EPathPointKind.CURVETO3&&(this.get(t).cPoint2.x<e&&(e=this.get(t).cPoint2.x),this.get(t).cPoint2.y<i&&(i=this.get(t).cPoint2.y),this.get(t).cPoint2.x>s&&(s=this.get(t).cPoint2.x),this.get(t).cPoint2.y>a&&(a=this.get(t).cPoint2.y)));return new CRect(e,i,s,a)}}stretch(t){let e;e=this.width>0&&this.height>0?new CRect(0,0,this.width,this.height):this.getBounds();let i=t.width/e.width,s=t.height/e.height;this.width>0&&this.height>0||this.movePoint(-e.left,-e.top),this.scale(i,s),this.movePoint(t.left,t.top),this.doChange("set")}stretchIgnoreSize(t){let e=this.getBounds(),i=t.width/e.width,s=t.height/e.height;this.movePoint(-e.left,-e.top),this.scale(i,s),this.movePoint(t.left,t.top),this.doChange("set")}fit(t){let e;e=this.width>0&&this.height>0?new CRect(0,0,this.width,this.height):this.getBounds();let i=t.getFitRect(e,!0);i.left=i.left+t.left,i.right=i.right+t.left,i.top=i.top+t.top,i.bottom=i.bottom+t.top,this.stretch(i),this.doChange("set")}fitIgnoreSize(t){let e=this.getBounds(),i=t.getFitRect(e,!0);i.left=i.left+t.left,i.right=i.right+t.left,i.top=i.top+t.top,i.bottom=i.bottom+t.top,this.stretchIgnoreSize(i),this.doChange("set")}copyTo(){let t=new CPathPointList;for(var e=0;e<this.length;e++)t.add(this.get(e).copyTo());return t.width=this.width,t.height=this.height,t}referenceCopyTo(){let t=new CPathPointList;for(var e=0;e<this.length;e++)t.add(this.get(e));return t.width=this.width,t.height=this.height,t}stretchTo(t){let e=this.copyTo();return e.stretch(t),e}fitTo(t){let e=this.copyTo();return e.fit(t),e}copyFrom(t){this.clear();for(var e=0;e<t.length;e++){let i=new CPathPoint(EPathPointKind.BEGIN,0,0);i.copyFrom(t.get(e)),this.set(e,i);let s=this;i.onChange=function(){s.doChange("point")}}this.width=t.width,this.height=t.height}rotate(t,e){for(let i=0;i<this.length;i++){let s=this.get(i),a=CPoint.getDistancePoints(t,s.point.toPoint()),o=CPoint.getAngleFromTwoPoint(t,s.point.toPoint()),n=CPoint.getAngleToPoint(t,a,a,o+e);s.point.x=n.x,s.point.y=n.y,a=CPoint.getDistancePoints(t,s.cPoint1.toPoint()),o=CPoint.getAngleFromTwoPoint(t,s.cPoint1.toPoint()),n=CPoint.getAngleToPoint(t,a,a,o+e),s.cPoint1.x=n.x,s.cPoint1.y=n.y,a=CPoint.getDistancePoints(t,s.cPoint2.toPoint()),o=CPoint.getAngleFromTwoPoint(t,s.cPoint2.toPoint()),n=CPoint.getAngleToPoint(t,a,a,o+e),s.cPoint2.x=n.x,s.cPoint2.y=n.y}}toString(){let t="";for(let e=0;e<this.length;e++){let i=this.get(e);switch(0!=e&&(t+="\n"),i.pointKind){case EPathPointKind.BEGIN:t+="b";break;case EPathPointKind.CLOSE:t+="z";break;case EPathPointKind.CURVETO2:case EPathPointKind.CURVETO3:t+="c";break;case EPathPointKind.LINETO:t+="l";break;case EPathPointKind.MOVETO:t+="m"}t+=i.cPoint1.x+","+i.cPoint1.y,t+=" "+i.cPoint2.x+","+i.cPoint2.y,t+=" "+i.point.x+","+i.point.y}return t}fromFontPathData(t){this.clear();let e=t.split("\n");for(let t=0;t<e.length;t++)if(""!=e[t]){let i=e[t].substring(0,1);if("M"==i){let i=e[t].substring(1).split(","),s=new CPathPoint(EPathPointKind.MOVETO,parseFloat(i[0]),parseFloat(i[1]));this.add(s)}else if("L"==i){let i=e[t].substring(1).split(","),s=new CPathPoint(EPathPointKind.LINETO,parseFloat(i[0]),parseFloat(i[1]));this.add(s)}else if("C"==i){let i=e[t].split(" "),s=i[0].substring(1).split(","),a=i[1].split(","),o=i[2].split(","),n=new CPathPoint(EPathPointKind.CURVETO3,parseFloat(o[0]),parseFloat(o[1]));n.cPoint1.x=parseFloat(s[0]),n.cPoint1.y=parseFloat(s[1]),n.cPoint2.x=parseFloat(a[0]),n.cPoint2.y=parseFloat(a[1]),this.add(n)}else if("Q"==i){let i=e[t].split(" "),s=i[0].substring(1).split(","),a=i[1].split(","),o=new CPathPoint(EPathPointKind.CURVETO2,parseFloat(a[0]),parseFloat(a[1]));o.cPoint1.x=parseFloat(s[0]),o.cPoint1.y=parseFloat(s[1]),this.add(o)}else"Z"==i&&this.addPointClose()}}fromFontOpentypePathData(t){this.clear();let e=t.split("\n");for(let t=0;t<e.length;t++)if(""!=e[t]){let i=e[t].substring(0,1);if("M"==i){let i=e[t].substring(1).split(","),s=new CPathPoint(EPathPointKind.MOVETO,parseFloat(i[0]),parseFloat(i[1]));this.add(s)}else if("L"==i){let i=e[t].substring(1).split(","),s=new CPathPoint(EPathPointKind.LINETO,parseFloat(i[0]),parseFloat(i[1]));this.add(s)}else if("C"==i){let i=e[t].split(" "),s=i[0].substring(1).split(","),a=i[1].split(","),o=i[2].split(","),n=new CPathPoint(EPathPointKind.CURVETO3,parseFloat(o[0]),parseFloat(o[1]));n.cPoint1.x=parseFloat(s[0]),n.cPoint1.y=parseFloat(s[1]),n.cPoint2.x=parseFloat(a[0]),n.cPoint2.y=parseFloat(a[1]),this.add(n)}else if("Q"==i){let i=e[t].split(" "),s=i[0].substring(1).split(","),a=i[1].split(","),o=new CPathPoint(EPathPointKind.CURVETO2,parseFloat(a[0]),parseFloat(a[1]));o.cPoint1.x=parseFloat(s[0]),o.cPoint1.y=parseFloat(s[1]),this.add(o)}else"Z"==i&&this.addPointClose()}}makeRectData(t=!1){return this.clear(),this.addPointMoveTo(CPoint.create(0,0)),this.addPointLineTo(CPoint.create(1,0)),this.addPointLineTo(CPoint.create(1,1)),this.addPointLineTo(CPoint.create(0,1)),this.addPointLineTo(CPoint.create(0,0)),t&&this.addPointClose,this}makeRoundRectData(t,e,i,s,a,o,n,r,A){let h;h=null==n?new CStringSet:n,A&&(this.clear(),this.add(CPathPoint.create(EPathPointKind.BEGIN,CPoint.create(t,e),CPoint.create(t,e),CPoint.create(t,e)))),h.has("leftTop")||0==a||0==o?this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t,e),CPoint.create(t,e),CPoint.create(t,e))):(this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t,e+o),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(t+a,e),CPoint.create(t,e+(1-CON_ELLIPSE_CURVE_LENGTH)*o),CPoint.create(t+(1-CON_ELLIPSE_CURVE_LENGTH)*a,e)))),h.has("rightTop")||0==a||0==o?r.has("top")?this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t+i,e),CPoint.create(t,e),CPoint.create(t,e))):this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t+i,e),CPoint.create(t,e),CPoint.create(t,e))):r.has("top")?(this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t+i-a,e),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(t+i,e+o),CPoint.create(t+i-(1-CON_ELLIPSE_CURVE_LENGTH)*a,e),CPoint.create(t+i,e+(1-CON_ELLIPSE_CURVE_LENGTH)*o)))):(this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t+i-a,e),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(t+i,e+o),CPoint.create(t+i-(1-CON_ELLIPSE_CURVE_LENGTH)*a,e),CPoint.create(t+i,e+(1-CON_ELLIPSE_CURVE_LENGTH)*o)))),h.has("rightBottom")||0==a||0==o?r.has("right")?this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t+i,e+s),CPoint.create(t,e),CPoint.create(t,e))):this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t+i,e+s),CPoint.create(t,e),CPoint.create(t,e))):r.has("right")?(this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t+i,e+s-o),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(t+i-a,e+s),CPoint.create(t+i,e+s-(1-CON_ELLIPSE_CURVE_LENGTH)*o),CPoint.create(t+i-(1-CON_ELLIPSE_CURVE_LENGTH)*a,e+s)))):(this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t+i,e+s-o),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(t+i-a,e+s),CPoint.create(t+i,e+s-(1-CON_ELLIPSE_CURVE_LENGTH)*o),CPoint.create(t+i-(1-CON_ELLIPSE_CURVE_LENGTH)*a,e+s)))),h.has("leftBottom")||0==a||0==o?r.has("bottom")?this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t,e+s),CPoint.create(t,e),CPoint.create(t,e))):this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t,e+s),CPoint.create(t,e),CPoint.create(t,e))):r.has("bottom")?(this.add(CPathPoint.create(EPathPointKind.MOVETO,CPoint.create(t+a,e+s),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(t,e+s-o),CPoint.create(t+(1-CON_ELLIPSE_CURVE_LENGTH)*a,e+s),CPoint.create(t,e+s-(1-CON_ELLIPSE_CURVE_LENGTH)*o)))):(this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t+a,e+s),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(t,e+s-o),CPoint.create(t+(1-CON_ELLIPSE_CURVE_LENGTH)*a,e+s),CPoint.create(t,e+s-(1-CON_ELLIPSE_CURVE_LENGTH)*o)))),r.has("left")||(h.has("leftTop")||0==a||0==o?this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t,e),CPoint.create(t,e),CPoint.create(t,e))):this.add(CPathPoint.create(EPathPointKind.LINETO,CPoint.create(t,e+o),CPoint.create(t,e),CPoint.create(t,e))),this.add(CPathPoint.create(EPathPointKind.CLOSE,CPoint.create(t,e),CPoint.create(t,e),CPoint.create(t,e))))}makeEllipseData(t,e,i,s,a=!0){function o(t,e){return CPoint.create(t,e)}a&&(this.clear(),this.add(CPathPoint.create(EPathPointKind.BEGIN,o(t,e),o(t,e),o(t,e)))),this.add(CPathPoint.create(EPathPointKind.MOVETO,o(t,e+s/2),o(t,e),o(t,e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,o(t+i/2,e),o(t,e+s/2*(1-CON_ELLIPSE_CURVE_LENGTH)),o(t+i/2*(1-CON_ELLIPSE_CURVE_LENGTH),e))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,o(t+i,e+s/2),o(t+i/2+i/2*CON_ELLIPSE_CURVE_LENGTH,e),o(t+i,e+s/2*(1-CON_ELLIPSE_CURVE_LENGTH)))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,o(t+i/2,e+s),o(t+i,e+s/2+s/2*CON_ELLIPSE_CURVE_LENGTH),o(t+i/2+i/2*CON_ELLIPSE_CURVE_LENGTH,e+s))),this.add(CPathPoint.create(EPathPointKind.CURVETO3,o(t,e+s/2),o(t+i/2*(1-CON_ELLIPSE_CURVE_LENGTH),e+s),o(t,e+s/2+s/2*CON_ELLIPSE_CURVE_LENGTH))),this.add(CPathPoint.create(EPathPointKind.CLOSE,o(t,e),o(t,e),o(t,e)))}makePoligonData(t,e=!1,i){this.clear();let s=CPoint.getPoligonPoints(t,!0,i);for(let t=0;t<s.length;t++)0==t?this.addPointMoveTo(s.get(t)):this.addPointLineTo(s.get(t));return e&&this.addPointClose(),this}makePoligonRoundData(t,e,i=!1,s){this.clear();let a=CPoint.getPoligonPoints(t,!0,s);for(let t=0;t<a.length;t++)if(0==t){let i=CPoint.getLineMiddlePoint(a.get(a.length-2),a.get(a.length-1),e);this.addPointMoveTo(i);let s=new CPoint(0,0);if(t+1<a.length){s=CPoint.getLineMiddlePoint(a.get(0),a.get(1),1-e);let t=this.getCurvePoint(i,a.get(0),s);this.addPointCurveTo3(s,t.ptCurve1,t.ptCurve2)}}else{let i=a[t],s=new CPoint(0,0),o=CPoint.getLineMiddlePoint(a.get(t-1),i,e);if(this.addPointLineTo(o),t+1<a.length){s=CPoint.getLineMiddlePoint(i,a.get(t+1),1-e);let n=this.getCurvePoint(o,i,s);this.addPointCurveTo3(s,n.ptCurve1,n.ptCurve2)}}return i&&this.addPointClose(),this}makeHornData(t,e,i=!1,s){this.clear();let a=CPoint.getHornPoints(t,e,!0,s);for(let t=0;t<a.length;t++)0==t?this.addPointMoveTo(a.get(t)):this.addPointLineTo(a.get(t));return i&&this.addPointClose(),this}makeHornRoundData(t,e,i,s=!0,a=!1,o){this.clear();let n=CPoint.getHornPoints(t,e,!0,o);for(let t=0;t<n.length;t++)if(0==t){let e=CPoint.getLineMiddlePoint(n[n.length-2],n[n.length-1],i);this.addPointMoveTo(e);let s=new CPoint(0,0);if(t+1<n.length){s=CPoint.getLineMiddlePoint(n[0],n[1],1-i);let t=this.getCurvePoint(e,n[0],s);this.addPointCurveTo3(s,t.ptCurve1,t.ptCurve2)}}else if(s)if(t%2==0){let e=n[t],s=new CPoint(0,0),a=CPoint.getLineMiddlePoint(n[t-1],e,i);if(this.addPointLineTo(a),t+1<n.length){s=CPoint.getLineMiddlePoint(e,n[t+1],1-i);let o=this.getCurvePoint(a,e,s);this.addPointCurveTo3(s,o.ptCurve1,o.ptCurve2)}}else this.addPointLineTo(n[t]);else{let e=n[t],s=new CPoint(0,0),a=CPoint.getLineMiddlePoint(n[t-1],e,i);if(this.addPointLineTo(a),t+1<n.length){s=CPoint.getLineMiddlePoint(e,n[t+1],1-i);let o=this.getCurvePoint(a,e,s);this.addPointCurveTo3(s,o.ptCurve1,o.ptCurve2)}}return a&&this.addPointClose(),this}makeArcData(t,e,i){this.clear();let s=e,a=i,o=CPoint.getAngleToPoint(t,.5,.5,s);if(this.addPointMoveTo(o),i>0){for(;a>90;){let e=CPoint.getAngleToPoint(t,.5,.5,s+90),i=CON_ELLIPSE_CURVE_LENGTH,n=CPoint.getAngleToPoint(o,.5*i,.5*i,90,CPoint.getAngleFromTwoPoint(t,o)),r=CPoint.getAngleToPoint(e,.5*i,.5*i,-90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,n,r),o.copyFrom(e),s+=90,a-=90}let e=CPoint.getAngleToPoint(t,.5,.5,s+a),i=CCalc.cr(CON_ELLIPSE_CURVE_LENGTH,0,90,a,2),n=CPoint.getAngleToPoint(o,.5*i,.5*i,90,CPoint.getAngleFromTwoPoint(t,o)),r=CPoint.getAngleToPoint(e,.5*i,.5*i,-90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,n,r)}else{for(;a<-90;){let e=CPoint.getAngleToPoint(t,.5,.5,s-90),i=CON_ELLIPSE_CURVE_LENGTH,n=CPoint.getAngleToPoint(o,.5*i,.5*i,-90,CPoint.getAngleFromTwoPoint(t,o)),r=CPoint.getAngleToPoint(e,.5*i,.5*i,90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,n,r),o.copyFrom(e),s-=90,a+=90}let e=CPoint.getAngleToPoint(t,.5,.5,s+a),i=CCalc.cr(CON_ELLIPSE_CURVE_LENGTH,0,90,Math.abs(a),2),n=CPoint.getAngleToPoint(o,.5*i,.5*i,-90,CPoint.getAngleFromTwoPoint(t,o)),r=CPoint.getAngleToPoint(e,.5*i,.5*i,90,CPoint.getAngleFromTwoPoint(t,e));this.addPointCurveTo3(e,n,r)}return this}twoLineToCurve(t,e){if(t-1<0||t+1>this.length-1||this[t].pointKind!=EPathPointKind.LINETO||this[t+1].pointKind!=EPathPointKind.LINETO)return;let i=this.getTwoLineCurvePoint(this[t-1].point,this[t].point,this[t+1].point,e);this[t].point.copyFrom(i.pt1Stop),this.insert(t+1,CPathPoint.create(EPathPointKind.CURVETO3,CPoint.create(i.pt2Start.x,i.pt2Start.y),CPoint.create(i.ptCurve1.x,i.ptCurve1.y),CPoint.create(i.ptCurve2.x,i.ptCurve2.y)))}getTwoLineCurvePoint(t,e,i,s){let a=CPoint.getLineMiddlePoint(t,e,s),o=CPoint.getLineMiddlePoint(e,i,1-s);return{pt1Start:t,pt1Stop:a,ptCurve1:CPoint.getLineMiddlePoint(a,e,CON_ELLIPSE_CURVE_LENGTH),ptCurve2:CPoint.getLineMiddlePoint(e,o,1-CON_ELLIPSE_CURVE_LENGTH),pt2Start:o,pt2Stop:i}}getCurvePoint(t,e,i){return{ptStart:t,ptCurve1:CPoint.getLineMiddlePoint(t,e,CON_ELLIPSE_CURVE_LENGTH),ptCurve2:CPoint.getLineMiddlePoint(e,i,1-CON_ELLIPSE_CURVE_LENGTH),ptStop:i}}addPointList(t){for(let e=0;e<t.length;e++){let i=t.get(e).copyTo();this.add(i)}}invertX(){let t=this.getBounds(),e=t.left+t.width/2;for(let t=0;t<this.length;t++)this.get(t).point.x+=2*(e-this.get(t).point.x),this.get(t).cPoint1.x+=2*(e-this.get(t).cPoint1.x),this.get(t).cPoint2.x+=2*(e-this.get(t).cPoint2.x)}invertY(){let t=this.getBounds(),e=t.top+t.height/2;for(let t=0;t<this.length;t++)this.get(t).point.y+=2*(e-this.get(t).point.y),this.get(t).cPoint1.y+=2*(e-this.get(t).cPoint1.y),this.get(t).cPoint2.y+=2*(e-this.get(t).cPoint2.y)}invert(){this.invertX(),this.invertY()}lineToCurve(){for(let t=0;t<this.length;t++)if(this.get(t).pointKind==EPathPointKind.LINETO&&t>0&&(this.get(t-1).pointKind==EPathPointKind.MOVETO||this.get(t-1).pointKind==EPathPointKind.LINETO||this.get(t-1).pointKind==EPathPointKind.CURVETO2||this.get(t-1).pointKind==EPathPointKind.CURVETO3)){let e=this.get(t-1).point;this.get(t).pointKind=EPathPointKind.CURVETO3;let i=CPoint.getLineMiddlePoint(e.toPoint(),this.get(t).point.toPoint(),1/3);this.get(t).cPoint1.x=i.x,this.get(t).cPoint1.y=i.y,i=CPoint.getLineMiddlePoint(e.toPoint(),this.get(t).point.toPoint(),1/3*2),this.get(t).cPoint2.x=i.x,this.get(t).cPoint2.y=i.y}}getSplitLine(t){let e=new CPathPointList;for(let i=0;i<this.length;i++)if(this.get(i).pointKind==EPathPointKind.LINETO||this.get(i).pointKind==EPathPointKind.CURVETO2||this.get(i).pointKind==EPathPointKind.CURVETO3&&i>0){if(this.get(i-1).pointKind==EPathPointKind.MOVETO||this.get(i-1).pointKind==EPathPointKind.LINETO||this.get(i-1).pointKind==EPathPointKind.CURVETO2||this.get(i-1).pointKind==EPathPointKind.CURVETO3){if(this.get(i).pointKind==EPathPointKind.LINETO){let s=CPoint.splitLinePoints(this.get(i-1).point.toPoint(),this.get(i).point.toPoint(),t);for(let t=0;t<s.length;t++)e.addPointLineTo(s[t])}if(this.get(i).pointKind==EPathPointKind.CURVETO2){let s=CPoint.splitCurve2LinePoints(this.get(i-1).point.toPoint(),this.get(i).cPoint1.toPoint(),this.get(i).point.toPoint(),t);for(let t=0;t<s.length;t++)e.addPointLineTo(s[t])}if(this.get(i).pointKind==EPathPointKind.CURVETO3){let s=CPoint.splitCurveLinePoints(this.get(i-1).point.toPoint(),this.get(i).cPoint1.toPoint(),this.get(i).cPoint2.toPoint(),this.get(i).point.toPoint(),t);for(let t=0;t<s.length;t++)e.addPointLineTo(s[t])}}}else e.add(this.get(i).copyTo());return e}splitLine(t){let e=this.getSplitLine(t);this.copyFrom(e)}putStream(t){let e=0,i=new Array;for(let t=0;t<this.length;t++)this.get(t).pointKind!=EPathPointKind.MOVETO&&this.get(t).pointKind!=EPathPointKind.LINETO&&this.get(t).pointKind!=EPathPointKind.CURVETO2&&this.get(t).pointKind!=EPathPointKind.CURVETO3||(e++,i.push(this.get(t)));t.putNumber(e);for(let e=0;e<i.length;e++)i[e].pointKind==EPathPointKind.MOVETO?t.putString("moveto"):i[e].pointKind==EPathPointKind.LINETO?t.putString("lineto"):i[e].pointKind==EPathPointKind.CURVETO2?t.putString("curveto"):i[e].pointKind==EPathPointKind.CURVETO3?t.putString("curveto"):t.putString("error"),t.putNumber(i[e].point.x),t.putNumber(i[e].point.y),t.putNumber(i[e].cPoint1.x),t.putNumber(i[e].cPoint1.y),i[e].pointKind==EPathPointKind.CURVETO2?(t.putNumber(i[e].cPoint1.x),t.putNumber(i[e].cPoint1.y)):(t.putNumber(i[e].cPoint2.x),t.putNumber(i[e].cPoint2.y))}}class CFont extends CNotifyChangeKindObject{constructor(){super(...arguments),this._fontStyle="normal",this._fontVariant="normal",this._fontWeight="normal",this._fontSize=12,this._fontFamily="Arial"}static get CON_CHANGE_STYLE(){return"s"}static get CON_CHANGE_VARIANT(){return"v"}static get CON_CHANGE_WEIGHT(){return"w"}static get CON_CHANGE_SIZE(){return"si"}static get CON_CHANGE_FAMILY(){return"f"}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!=t&&(this._fontStyle=t,this.doChange(CFont.CON_CHANGE_STYLE))}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!=t&&(this._fontVariant=t,this.doChange(CFont.CON_CHANGE_VARIANT))}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!=t&&(this._fontWeight=t,this.doChange(CFont.CON_CHANGE_WEIGHT))}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!=t&&(this._fontSize=t,this.doChange(CFont.CON_CHANGE_SIZE))}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!=t&&(this._fontFamily=t,this.doChange(CFont.CON_CHANGE_FAMILY))}doToData(t){super.doToData(t),CDataClass.putData(t,"fontStyle",this.fontStyle,"normal"),CDataClass.putData(t,"fontVariant",this.fontVariant,"normal"),CDataClass.putData(t,"fontWeight",this.fontWeight,"normal"),CDataClass.putData(t,"fontSize",this.fontSize,12),CDataClass.putData(t,"fontFamily",this.fontFamily,"Arial")}doFromData(t){super.doFromData(t),this.fontStyle=CDataClass.getData(t,"fontStyle","normal"),this.fontVariant=CDataClass.getData(t,"fontVariant","normal"),this.fontWeight=CDataClass.getData(t,"fontWeight","normal"),this.fontSize=CDataClass.getData(t,"fontSize",12),this.fontFamily=CDataClass.getData(t,"fontFamily","Arial")}setFont(t){t.font=this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily}}!function(t){t[t.HEAD=0]="HEAD",t[t.CENTER=1]="CENTER",t[t.TAIL=2]="TAIL"}(ETextAlign||(ETextAlign={}));class CCustomTextSet extends CFont{static get CON_CHANGE_H_ALIGN(){return"h"}static get CON_CHANGE_V_ALIGN(){return"v"}static get CON_CHANGE_MARGINS(){return"m"}constructor(){super(),this._hAlign=ETextAlign.CENTER,this._vAlign=ETextAlign.CENTER,this._margins=new CNotifyRect(0,0,0,0);let t=this;this._margins.onChange=function(){t.doChange(CCustomTextSet.CON_CHANGE_MARGINS)}}get margins(){return this._margins}get hAlign(){return this._hAlign}set hAlign(t){this._hAlign!=t&&(this._hAlign=t,this.doChange(CCustomTextSet.CON_CHANGE_H_ALIGN))}get vAlign(){return this._vAlign}set vAlign(t){this._vAlign!=t&&(this._vAlign=t,this.doChange(CCustomTextSet.CON_CHANGE_V_ALIGN))}doToData(t){super.doToData(t),CDataClass.putData(t,"hAlign",this.hAlign,ETextAlign.CENTER),CDataClass.putData(t,"vAlign",this.vAlign,ETextAlign.CENTER),CDataClass.putData(t,"margins",this.margins.toData(),{},!0)}doFromData(t){super.doFromData(t),this.hAlign=CDataClass.getData(t,"hAlign",ETextAlign.CENTER),this.vAlign=CDataClass.getData(t,"vAlign",ETextAlign.CENTER),this.margins.fromData(CDataClass.getData(t,"margins",{},!0))}getTextPoint(t,e){let i=0,s=0;switch(this.hAlign){case ETextAlign.HEAD:t.textAlign="left",i=e.left+this._margins.left;break;case ETextAlign.CENTER:t.textAlign="center",i=e.left+e.width/2;break;case ETextAlign.TAIL:t.textAlign="right",i=e.right-this._margins.right}switch(this.vAlign){case ETextAlign.HEAD:s=e.top+this._margins.top+this._fontSize;break;case ETextAlign.CENTER:s=e.top+e.height/2+this._fontSize/3;break;case ETextAlign.TAIL:s=e.bottom-this._margins.bottom}return new CPoint(i,s)}}class CTextSet extends CCustomTextSet{static get CON_CHANGE_ENABLED(){return"e"}static get CON_CHANGE_FILL(){return"fill"}static get CON_CHANGE_STROKE(){return"stroke"}static get CON_CHANGE_LANGUAGE_KEY(){return"lk"}constructor(){super(),this._enabled=!0,this._fill=new CFillSet,this._stroke=new CStrokeSet,this._languageKey="";let t=this;this._fill.styleKind=EStyleKind.SOLID,this._fill.solidColor="#000000",this._fill.onChange=function(){t.doChange(CTextSet.CON_CHANGE_FILL)},this._stroke.onChange=function(){t.doChange(CTextSet.CON_CHANGE_STROKE)}}get fill(){return this._fill}get stroke(){return this._stroke}get enabled(){return this._enabled}set enabled(t){this._enabled=t}get languageKey(){return this._languageKey}set languageKey(t){this._languageKey!=t&&(this._languageKey=t,this.doChange(CTextSet.CON_CHANGE_LANGUAGE_KEY))}doToData(t){super.doToData(t),CDataClass.putData(t,"enabled",this.enabled,!0),CDataClass.putData(t,"fill",this.fill.toData(),{styleKind:1,solidColor:"#000000"},!0),CDataClass.putData(t,"stroke",this.stroke.toData(),{},!0)}doFromData(t){super.doFromData(t),this.enabled=CDataClass.getData(t,"enabled",!0),this.fill.fromData(CDataClass.getData(t,"fill",{styleKind:1,solidColor:"#000000"},!0)),this.stroke.fromData(CDataClass.getData(t,"stroke",{},!0))}drawText(t,e,i,s){if(!this._enabled||0==e.width||0==e.height)return;let a=s;if(null!=a){a.canvas.width=e.width,a.canvas.height=e.height,a.font=this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.fill.setContext(a,e),this.stroke.setContext(a,e);let s=this.getTextPoint(a,new CRect(0,0,e.width,e.height));if(i.indexOf("\n")>=0){let t=i.split("\n"),e=s.y-t.length*this.fontSize/2+.5*this.fontSize;for(let i=0;i<t.length;i++)this.fill.styleKind!=EStyleKind.EMPTY&&a.fillText(t[i],s.x,e),this.stroke.styleKind!=EStyleKind.EMPTY&&a.strokeText(t[i],s.x,e),e+=this.fontSize}else this.fill.styleKind!=EStyleKind.EMPTY&&a.fillText(i,s.x,s.y),this.stroke.styleKind!=EStyleKind.EMPTY&&a.strokeText(i,s.x,s.y);t.drawImage(a.canvas,e.left,e.top,e.width,e.height)}else{t.font=this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.fill.setContext(t,e),this.stroke.setContext(t,e);let s=this.getTextPoint(t,e);if(i.indexOf("\n")>=0){let e=i.split("\n"),a=s.y-e.length*this.fontSize/2+.5*this.fontSize;for(let i=0;i<e.length;i++)this.fill.styleKind!=EStyleKind.EMPTY&&t.fillText(e[i],s.x,a),this.stroke.styleKind!=EStyleKind.EMPTY&&t.strokeText(e[i],s.x,a),a+=this.fontSize}else this.fill.styleKind!=EStyleKind.EMPTY&&t.fillText(i,s.x,s.y),this.stroke.styleKind!=EStyleKind.EMPTY&&t.strokeText(i,s.x,s.y)}}static create(t,e=ETextAlign.CENTER,i=ETextAlign.CENTER,s=12){let a=new CTextSet;return a.fill.solidColor=t,a.hAlign=e,a.vAlign=i,a.fontSize=s,a.margins.all=5,a}}class CGradientPoint extends CNotifyChangeKindObject{static get CON_CHANGE_OFFSET(){return"o"}static get CON_CHANGE_COLOR(){return"c"}constructor(t,e){super(),this._offset=0,this._color="rgba(255,255,255,1)",this._offset=t,this._color=e}get offset(){return this._offset}set offset(t){this._offset!=t&&(this._offset=t,this.doChange(CGradientPoint.CON_CHANGE_OFFSET))}get color(){return this._color}set color(t){this._color!=t&&(this._color=t,this.doChange(CGradientPoint.CON_CHANGE_COLOR))}doToData(t){super.doToData(t),CDataClass.putData(t,"offset",this.offset,0),CDataClass.putData(t,"color",this.color,"rgba(255,255,255,1)")}doFromData(t){super.doFromData(t),this.offset=CDataClass.getData(t,"offset",0),this.color=CDataClass.getData(t,"color","rgba(255,255,255,1)")}static create(t,e){return new CGradientPoint(t,e)}}class CGradientPointList extends CList{addPoint(t,e){let i=CGradientPoint.create(t,e),s=this;i.onChange=function(){s.doChange("point")},this.add(i)}insertPoint(t,e,i){let s=CGradientPoint.create(e,i),a=this;s.onChange=function(){a.doChange("point")},this.insert(t,s)}doToData(t){super.doToData(t);for(let e=0;e<this.length;e++)t.push(this.get(e).toData())}doFromData(t){this.clear();let e=this;for(let i=0;i<t.length;i++){let s=new CGradientPoint(0,"");s.fromData(t[i]),s.onChange=function(){e.doChange("point")},this.add(s)}}}!function(t){t[t.LINEAR=0]="LINEAR",t[t.RADIAL=1]="RADIAL"}(EGradientKind||(EGradientKind={}));class CGradient extends CNotifyChangeKindObject{static get CON_CHANGE_GRADIENT_KIND(){return"g"}static get CON_CHANGE_START_POINT(){return"sp"}static get CON_CHANGE_STOP_POINT(){return"stp"}static get CON_CHANGE_POINT_LIST(){return"pl"}static get CON_CHANGE_START_RADIUS(){return"sr"}static get CON_CHANGE_STOP_RADIUS(){return"str"}constructor(){super(),this._gradientKind=EGradientKind.LINEAR,this._startPoint=new CNotifyPoint(0,0),this._stopPoint=new CNotifyPoint(0,1),this._pointList=new CGradientPointList,this._startRadius=0,this._stopRadius=360;let t=this;this._pointList.onChange=function(e,i){t.doChange(CGradient.CON_CHANGE_POINT_LIST)},this._startPoint.onChange=function(e,i){t.doChange(CGradient.CON_CHANGE_START_POINT)},this._stopPoint.onChange=function(e,i){t.doChange(CGradient.CON_CHANGE_STOP_POINT)}}get pointList(){return this._pointList}get gradientKind(){return this._gradientKind}set gradientKind(t){this._gradientKind!=t&&(this._gradientKind=t,this.doChange(CGradient.CON_CHANGE_GRADIENT_KIND))}get startPoint(){return this._startPoint}set startPoint(t){if(this._startPoint!=t){let e=this;this._startPoint=t,this._startPoint.onChange=function(t,i){e.doChange(CGradient.CON_CHANGE_START_POINT)},this.doChange(CGradient.CON_CHANGE_START_POINT)}}get stopPoint(){return this._stopPoint}set stopPoint(t){if(this._stopPoint!=t){let e=this;this._stopPoint=t,this._stopPoint.onChange=function(t,i){e.doChange(CGradient.CON_CHANGE_STOP_POINT)},this.doChange(CGradient.CON_CHANGE_STOP_POINT)}}get startRadius(){return this._startRadius}set startRadius(t){this._startRadius!=t&&(this._startRadius=t,this.doChange(CGradient.CON_CHANGE_START_RADIUS))}get stopRadius(){return this._stopRadius}set stopRadius(t){this._stopRadius!=t&&(this._stopRadius=t,this.doChange(CGradient.CON_CHANGE_STOP_RADIUS))}doToData(t){super.doToData(t),CDataClass.putData(t,"gradientKind",this.gradientKind,EGradientKind.LINEAR),CDataClass.putData(t,"startPoint",this.startPoint.toData(),{},!0),CDataClass.putData(t,"stopPoint",this.stopPoint.toData(),{y:1},!0),CDataClass.putData(t,"pointList",this.pointList.toData(),[],!0),CDataClass.putData(t,"startRadius",this.startRadius,0),CDataClass.putData(t,"stopRadius",this.stopRadius,360)}doFromData(t){super.doFromData(t),this.gradientKind=CDataClass.getData(t,"gradientKind",EGradientKind.LINEAR),this.startPoint.fromData(CDataClass.getData(t,"startPoint",{},!0)),this.stopPoint.fromData(CDataClass.getData(t,"stopPoint",{y:1},!0)),this.pointList.fromData(CDataClass.getData(t,"pointList",[],!0)),this.startRadius=CDataClass.getData(t,"startRadius",0),this.stopRadius=CDataClass.getData(t,"stopRadius",360)}getGradient(t,e){let i,s=e.left+this._startPoint.x*e.width,a=e.top+this._startPoint.y*e.height,o=e.left+this._stopPoint.x*e.width,n=e.top+this._stopPoint.y*e.height;if(!(isNaN(s)||isNaN(a)||isNaN(o)||isNaN(n))){i=this._gradientKind==EGradientKind.LINEAR?t.createLinearGradient(e.left+this._startPoint.x*e.width,e.top+this._startPoint.y*e.height,e.left+this._stopPoint.x*e.width,e.top+this._stopPoint.y*e.height):t.createRadialGradient(e.left+this._startPoint.x*e.width,e.top+this._startPoint.y*e.height,this._startRadius,e.left+this._stopPoint.x*e.width,e.top+this._stopPoint.y*e.height,this._stopRadius);for(var r=0;r<this._pointList.length;r++)i.addColorStop(this._pointList.get(r).offset,this._pointList.get(r).color);return i}}}!function(t){t[t.EMPTY=0]="EMPTY",t[t.SOLID=1]="SOLID",t[t.GRADIENT=2]="GRADIENT"}(EStyleKind||(EStyleKind={}));class CFillSet extends CGradient{constructor(){super(...arguments),this._styleKind=EStyleKind.EMPTY,this._solidColor="rgba(255,255,255,1)"}static get CON_CHANGE_STYLE_KIND(){return"styleKind"}static get CON_CHANGE_SOLID_COLOR(){return"solidColor"}get styleKind(){return this._styleKind}set styleKind(t){t!=this._styleKind&&(this._styleKind=t,this.doChange(CFillSet.CON_CHANGE_STYLE_KIND))}get solidColor(){return this._solidColor}set solidColor(t){t!=this._solidColor&&(this._solidColor=t,this.doChange(CFillSet.CON_CHANGE_SOLID_COLOR))}doToData(t){super.doToData(t),CDataClass.putData(t,"styleKind",this.styleKind,EStyleKind.EMPTY),CDataClass.putData(t,"solidColor",this.solidColor,"rgba(255,255,255,1)")}doFromData(t){super.doFromData(t),this.styleKind=CDataClass.getData(t,"styleKind",EStyleKind.EMPTY),this.solidColor=CDataClass.getData(t,"solidColor","rgba(255,255,255,1)")}setContext(t,e){switch(this.styleKind){case EStyleKind.SOLID:t.fillStyle=this.solidColor;break;case EStyleKind.GRADIENT:let i=this.getGradient(t,e);null!=i&&(t.fillStyle=i)}}}!function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE"}(EStrokeLineCap||(EStrokeLineCap={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER"}(EStrokeLineJoin||(EStrokeLineJoin={}));class CStrokeSet extends CFillSet{constructor(){super(...arguments),this.__lineDash=[],this._lineWidth=0,this._lineCap=EStrokeLineCap.ROUND,this._lineJoin=EStrokeLineJoin.ROUND,this._lineDash=""}static get CON_CHANGE_LINE_WIDTH(){return"lineWidth"}static get CON_CHANGE_LINE_CAP(){return"lineCap"}static get CON_CHANGE_LINE_JOIN(){return"lineJoin"}static get CON_CHANGE_LINE_DASH(){return"lineDash"}get lineWidth(){return this._lineWidth}set lineWidth(t){t!=this._lineWidth&&(this._lineWidth=t,this.doChange(CStrokeSet.CON_CHANGE_LINE_WIDTH))}get lineCap(){return this._lineCap}set lineCap(t){t!=this._lineCap&&(this._lineCap=t,this.doChange(CStrokeSet.CON_CHANGE_LINE_CAP))}get lineJoin(){return this._lineJoin}set lineJoin(t){t!=this._lineJoin&&(this._lineJoin=t,this.doChange(CStrokeSet.CON_CHANGE_LINE_JOIN))}get lineDash(){return this._lineDash}set lineDash(t){if(t!=this._lineDash){if(this._lineDash=t,""!=t){let t=this._lineDash.split(",");this.__lineDash=[];for(let e=0;e<t.length;e++)this.__lineDash.push(parseFloat(t[e]))}this.doChange(CStrokeSet.CON_CHANGE_LINE_DASH)}}doToData(t){super.doToData(t),CDataClass.putData(t,"lineWidth",this.lineWidth,0),CDataClass.putData(t,"lineCap",this.lineCap,EStrokeLineCap.ROUND),CDataClass.putData(t,"lineJoin",this.lineJoin,EStrokeLineJoin.ROUND),CDataClass.putData(t,"lineDash",this.lineDash,"")}doFromData(t){super.doFromData(t),this.lineWidth=CDataClass.getData(t,"lineWidth",0),this.lineCap=CDataClass.getData(t,"lineCap",EStrokeLineCap.ROUND),this.lineJoin=CDataClass.getData(t,"lineJoin",EStrokeLineJoin.ROUND),this.lineDash=CDataClass.getData(t,"lineDash","")}setContext(t,e){switch(this.styleKind){case EStyleKind.SOLID:t.strokeStyle=this.solidColor;break;case EStyleKind.GRADIENT:let i=this.getGradient(t,e);null!=i&&(t.strokeStyle=i)}switch(t.lineWidth=this.lineWidth,this.lineCap){case EStrokeLineCap.BUTT:t.lineCap="butt";break;case EStrokeLineCap.ROUND:t.lineCap="round";break;case EStrokeLineCap.SQUARE:t.lineCap="square"}switch(this.lineJoin){case EStrokeLineJoin.BEVEL:t.lineJoin="bevel";break;case EStrokeLineJoin.MITER:t.lineJoin="miter";break;case EStrokeLineJoin.ROUND:t.lineJoin="round"}t.setLineDash(this.__lineDash)}}!function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.TOP=2]="TOP",t[t.RIGHT=3]="RIGHT",t[t.BOTTOM=4]="BOTTOM",t[t.CLIENT=5]="CLIENT",t[t.CENTER=6]="CENTER",t[t.LEFTTOP=7]="LEFTTOP",t[t.RIGHTTOP=8]="RIGHTTOP",t[t.LEFTBOTTOM=9]="LEFTBOTTOM",t[t.RIGHTBOTTOM=10]="RIGHTBOTTOM",t[t.MIDDLELEFT=11]="MIDDLELEFT",t[t.MIDDLETOP=12]="MIDDLETOP",t[t.MIDDLERIGHT=13]="MIDDLERIGHT",t[t.MIDDLEBOTTOM=14]="MIDDLEBOTTOM",t[t.HCENTER=15]="HCENTER",t[t.VCENTER=16]="VCENTER"}(ECanvasItemAlign||(ECanvasItemAlign={})),function(t){t[t.RECTANGLE=0]="RECTANGLE",t[t.ROUNDRECTANGLE=1]="ROUNDRECTANGLE",t[t.ELLIPSE=2]="ELLIPSE",t[t.ARC=3]="ARC",t[t.PATH=4]="PATH",t[t.TEXT=5]="TEXT",t[t.IMAGE=6]="IMAGE"}(ECanvasItemKind||(ECanvasItemKind={})),function(t){t[t.ALL=0]="ALL",t[t.CHECK_HEAD=1]="CHECK_HEAD",t[t.CHECK_TAIL=2]="CHECK_TAIL",t[t.COLUMN=3]="COLUMN",t[t.ROW=4]="ROW"}(EPatternKind||(EPatternKind={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.PATTERN=1]="PATTERN",t[t.ROTATE=2]="ROTATE",t[t.RANDOM=3]="RANDOM"}(EPaintKind||(EPaintKind={}));class CCanvasItem extends CNotifyChangeKindObject{static get CON_CHANGE_ALIGN(){return"a"}static get CON_CHANGE_KIND(){return"k"}static get CON_CHANGE_NAME(){return"i"}static get CON_CHANGE_POSITION(){return"p"}static get CON_CHANGE_POSITION_UNIT(){return"pu"}static get CON_CHANGE_ROTATION_ANGLE(){return"ra"}static get CON_CHANGE_ROTATION_CENTER_X(){return"rx"}static get CON_CHANGE_ROTATION_CENTER_Y(){return"ry"}static get CON_CHANGE_MARGINS(){return"m"}static get CON_CHANGE_FILL(){return"f"}static get CON_CHANGE_STROKE(){return"s"}static get CON_CHANGE_OPACITY(){return"o"}static get CON_CHANGE_VISIBLE(){return"v"}static get CON_CHANGE_PATH_DATA(){return"pd"}static get CON_CHANGE_RADIUS_X(){return"rax"}static get CON_CHANGE_RADIUS_Y(){return"ray"}static get CON_CHANGE_DISABLE_ROUND_SET(){return"dr"}static get CON_CHANGE_DISABLE_LINE_SET(){return"dl"}static get CON_CHANGE_TEXTSET(){return"tx"}static get CON_CHANGE_TEXT(){return"t"}static get CON_CHANGE_FILTER(){return"fi"}static get CON_CHANGE_SHADOW_COLOR(){return"sc"}static get CON_CHANGE_SHADOW_BLUR(){return"sb"}static get CON_CHANGE_SHADOW_OFFSET_X(){return"sx"}static get CON_CHANGE_SHADOW_OFFSET_Y(){return"sy"}constructor(){super(),this._align=ECanvasItemAlign.NONE,this._kind=ECanvasItemKind.RECTANGLE,this._name="",this._position=new CNotifyRect(0,0,0,0),this._positionUnit=EPositionUnit.PIXEL,this._rotationAngle=0,this._rotationCenterX=.5,this._rotationCenterY=.5,this._margins=new CNotifyRect(0,0,0,0),this._fill=new CFillSet,this._stroke=new CStrokeSet,this._opacity=1,this._composite="source-over",this._visible=!0,this._pathData=new CPathPointList,this._pathFitMode=EFitMode.STRETCH,this._radiusX=0,this._radiusY=0,this._disableRoundSet=new CStringSet,this._disableLineSet=new CStringSet,this._textSet=new CTextSet,this._text="",this._imageSrc="",this._imageFitMode=EFitMode.FIT,this._paintKind=EPaintKind.NORMAL,this._paintWidth=50,this._paintHeight=50,this._patternIgnoreCount=0,this._patternMargin=0,this._patternKind=EPatternKind.ALL,this._paintRotateCount=5,this._paintRotateStartAngle=-90,this._paintRotateStopAngle=270,this._paintRotateRadiusX=.5,this._paintRotateRadiusY=.5,this._paintRotateApplyAngle=!0,this._randomCount=10,this._randomWidthMin=10,this._randomWidthMax=100,this._randomHeightMin=10,this._randomHeightMax=100,this._filter="",this._shadowColor="",this._shadowBlur=0,this._shadowOffsetX=0,this._shadowOffsetY=0;let t=this;this._position.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_POSITION)},this._pathData.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_PATH_DATA)},this._fill.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_FILL)},this._stroke.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_STROKE)},this._disableRoundSet.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_DISABLE_ROUND_SET)},this._disableLineSet.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_DISABLE_LINE_SET)},this._textSet.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_TEXTSET)},this._margins.onChange=function(){t.doChange(CCanvasItem.CON_CHANGE_MARGINS)}}get align(){return this._align}set align(t){this._align!=t&&(this._align=t,this.doChange(CCanvasItem.CON_CHANGE_ALIGN))}get rotationAngle(){return this._rotationAngle}set rotationAngle(t){this._rotationAngle!=t&&(this._rotationAngle=t,this.doChange(CCanvasItem.CON_CHANGE_ROTATION_ANGLE))}get rotationCenterX(){return this._rotationCenterX}set rotationCenterX(t){this._rotationCenterX!=t&&(this._rotationCenterX=t,this.doChange(CCanvasItem.CON_CHANGE_ROTATION_CENTER_X))}get rotationCenterY(){return this._rotationCenterY}set rotationCenterY(t){this._rotationCenterY!=t&&(this._rotationCenterY=t,this.doChange(CCanvasItem.CON_CHANGE_ROTATION_CENTER_Y))}get positionUnit(){return this._positionUnit}set positionUnit(t){this._positionUnit!=t&&(this._positionUnit=t,this.doChange(CCanvasItem.CON_CHANGE_POSITION_UNIT))}get kind(){return this._kind}set kind(t){this._kind!=t&&(this._kind=t,this.doChange(CCanvasItem.CON_CHANGE_KIND))}get name(){return this._name}set name(t){this._name!=t&&(this._name=t,this.doChange(CCanvasItem.CON_CHANGE_NAME))}get position(){return this._position}set position(t){if(this._position!=t){this._position=t;let e=this;this._position.onChange=function(){e.doChange(CCanvasItem.CON_CHANGE_POSITION)},this.doChange(CCanvasItem.CON_CHANGE_POSITION)}}get margins(){return this._margins}get fill(){return this._fill}get stroke(){return this._stroke}get pathData(){return this._pathData}get textSet(){return this._textSet}get opacity(){return this._opacity}set opacity(t){this._opacity!=t&&(this._opacity=t,this.doChange(CCanvasItem.CON_CHANGE_OPACITY))}get visible(){return this._visible}set visible(t){this._visible!=t&&(this._visible=t,this.doChange(CCanvasItem.CON_CHANGE_VISIBLE))}get radiusX(){return this._radiusX}set radiusX(t){this._radiusX!=t&&(this._radiusX=t,this.doChange(CCanvasItem.CON_CHANGE_RADIUS_X))}get radiusY(){return this._radiusY}set radiusY(t){this._radiusY!=t&&(this._radiusY=t,this.doChange(CCanvasItem.CON_CHANGE_RADIUS_Y))}get disableRoundSet(){return this._disableRoundSet}get disableLineSet(){return this._disableLineSet}get text(){return this._text}set text(t){this._text!=t&&(this._text=t,this.doChange(CCanvasItem.CON_CHANGE_TEXT))}get imageSrc(){return this._imageSrc}set imageSrc(t){if(this._imageSrc!=t){this._imageSrc=t,this._image=new Image;let e=this;this._image.onload=function(){e.doChange("imageSrc")},this._image.src=this._imageSrc}}get imageFitMode(){return this._imageFitMode}set imageFitMode(t){this._imageFitMode!=t&&(this._imageFitMode=t,this.doChange("imageFitMode"))}get pathFitMode(){return this._pathFitMode}set pathFitMode(t){this._pathFitMode!=t&&(this._pathFitMode=t,this.doChange("fitmode"))}get paintKind(){return this._paintKind}set paintKind(t){this._paintKind!=t&&(this._paintKind=t,this.doChange("paintkind"))}get paintWidth(){return this._paintWidth}set paintWidth(t){this._paintWidth!=t&&(this._paintWidth=t,this.doChange("paintw"))}get paintHeight(){return this._paintHeight}set paintHeight(t){this._paintHeight!=t&&(this._paintHeight=t,this.doChange("painth"))}get patternIgnoreCount(){return this._patternIgnoreCount}set patternIgnoreCount(t){this._patternIgnoreCount!=t&&(this._patternIgnoreCount=t,this.doChange("patterni"))}get patternMargin(){return this._patternMargin}set patternMargin(t){this._patternMargin!=t&&(this._patternMargin=t,this.doChange("patternm"))}get patternKind(){return this._patternKind}set patternKind(t){this._patternKind!=t&&(this._patternKind=t,this.doChange("patternk"))}get paintRotateCount(){return this._paintRotateCount}set paintRotateCount(t){this._paintRotateCount!=t&&(this._paintRotateCount=t,this.doChange("paintRotateCount"))}get paintRotateStartAngle(){return this._paintRotateStartAngle}set paintRotateStartAngle(t){this._paintRotateStartAngle!=t&&(this._paintRotateStartAngle=t,this.doChange("paintRotateStartAngle"))}get paintRotateStopAngle(){return this._paintRotateStopAngle}set paintRotateStopAngle(t){this._paintRotateStopAngle!=t&&(this._paintRotateStopAngle=t,this.doChange("paintRotateStopAngle"))}get paintRotateRadiusX(){return this._paintRotateRadiusX}set paintRotateRadiusX(t){this._paintRotateRadiusX!=t&&(this._paintRotateRadiusX=t,this.doChange("paintRotateRadiusX"))}get paintRotateRadiusY(){return this._paintRotateRadiusY}set paintRotateRadiusY(t){this._paintRotateRadiusY!=t&&(this._paintRotateRadiusY=t,this.doChange("paintRotateRadiusY"))}get paintRotateApplyAngle(){return this._paintRotateApplyAngle}set paintRotateApplyAngle(t){this._paintRotateApplyAngle!=t&&(this._paintRotateApplyAngle=t,this.doChange("paintRotateApplyAngle"))}get randomCount(){return this._randomCount}set randomCount(t){this._randomCount!=t&&(this._randomCount=t,this.doChange("randomCount"))}get randomWidthMin(){return this._randomWidthMin}set randomWidthMin(t){this._randomWidthMin!=t&&(this._randomWidthMin=t,this.doChange("randomWidthMin"))}get randomWidthMax(){return this._randomWidthMax}set randomWidthMax(t){this._randomWidthMax!=t&&(this._randomWidthMax=t,this.doChange("randomWidthMax"))}get randomHeightMin(){return this._randomHeightMin}set randomHeightMin(t){this._randomHeightMin!=t&&(this._randomHeightMin=t,this.doChange("_randomHeightMin"))}get randomHeightMax(){return this._randomHeightMax}set randomHeightMax(t){this._randomHeightMax!=t&&(this._randomHeightMax=t,this.doChange("randomHeightMax"))}get filter(){return this._filter}set filter(t){this._filter!=t&&(this._filter=t,this.doChange(CCanvasItem.CON_CHANGE_FILTER))}get shadowColor(){return this._shadowColor}set shadowColor(t){this._shadowColor!=t&&(this._shadowColor=t,this.doChange(CCanvasItem.CON_CHANGE_SHADOW_COLOR))}get shadowBlur(){return this._shadowBlur}set shadowBlur(t){this._shadowBlur!=t&&(this._shadowBlur=t,this.doChange(CCanvasItem.CON_CHANGE_SHADOW_BLUR))}get shadowOffsetX(){return this._shadowOffsetX}set shadowOffsetX(t){this._shadowOffsetX!=t&&(this._shadowOffsetX=t,this.doChange(CCanvasItem.CON_CHANGE_SHADOW_OFFSET_X))}get shadowOffsetY(){return this._shadowOffsetY}set shadowOffsetY(t){this._shadowOffsetY!=t&&(this._shadowOffsetY=t,this.doChange(CCanvasItem.CON_CHANGE_SHADOW_OFFSET_Y))}get composite(){return this._composite}set composite(t){this._composite!=t&&(this._composite=t,this.doChange("composite"))}doToData(t){super.doToData(t),CDataClass.putData(t,"align",this.align,ECanvasItemAlign.NONE),CDataClass.putData(t,"kind",this.kind,ECanvasItemKind.RECTANGLE),CDataClass.putData(t,"name",this.name,""),CDataClass.putData(t,"position",this.position.toData(),{},!0),CDataClass.putData(t,"positionUnit",this.positionUnit,EPositionUnit.PIXEL),CDataClass.putData(t,"rotationAngle",this.rotationAngle,0),CDataClass.putData(t,"rotationCenterX",this.rotationCenterX,.5),CDataClass.putData(t,"rotationCenterY",this.rotationCenterY,.5),CDataClass.putData(t,"margins",this.margins.toData(),{},!0),CDataClass.putData(t,"fill",this.fill.toData(),{},!0),CDataClass.putData(t,"stroke",this.stroke.toData(),{},!0),CDataClass.putData(t,"opacity",this.opacity,1),CDataClass.putData(t,"visible",this.visible,!0),CDataClass.putData(t,"pathData",this.pathData.toData(),{},!0),CDataClass.putData(t,"radiusX",this.radiusX,0),CDataClass.putData(t,"radiusY",this.radiusY,0),CDataClass.putData(t,"disableRoundSet",this.disableRoundSet.toData(),[],!0),CDataClass.putData(t,"disableLineSet",this.disableLineSet.toData(),[],!0),CDataClass.putData(t,"textSet",this.textSet.toData(),{},!0),CDataClass.putData(t,"text",this.text,""),CDataClass.putData(t,"paintKind",this.paintKind,EPaintKind.NORMAL),CDataClass.putData(t,"paintWidth",this.paintWidth,50),CDataClass.putData(t,"paintHeight",this.paintHeight,50),CDataClass.putData(t,"patternIgnoreCount",this.patternIgnoreCount,0),CDataClass.putData(t,"patternMargin",this.patternMargin,0),CDataClass.putData(t,"patternKind",this.patternKind,EPatternKind.ALL),CDataClass.putData(t,"paintRotateCount",this.paintRotateCount,5),CDataClass.putData(t,"paintRotateStartAngle",this.paintRotateStartAngle,-90),CDataClass.putData(t,"paintRotateStopAngle",this.paintRotateStopAngle,270),CDataClass.putData(t,"paintRotateRadiusX",this.paintRotateRadiusX,.5),CDataClass.putData(t,"paintRotateRadiusY",this.paintRotateRadiusY,.5),CDataClass.putData(t,"paintRotateApplyAngle",this.paintRotateApplyAngle,!0),CDataClass.putData(t,"randomCount",this.randomCount,10),CDataClass.putData(t,"randomWidthMin",this.randomWidthMin,10),CDataClass.putData(t,"randomWidthMax",this.randomWidthMax,100),CDataClass.putData(t,"randomHeightMin",this.randomHeightMin,10),CDataClass.putData(t,"randomHeightMax",this.randomHeightMax,100),CDataClass.putData(t,"filter",this.filter,""),CDataClass.putData(t,"shadowColor",this.shadowColor,""),CDataClass.putData(t,"shadowBlur",this.shadowBlur,0),CDataClass.putData(t,"shadowOffsetX",this.shadowOffsetX,0),CDataClass.putData(t,"shadowOffsetY",this.shadowOffsetY,0),CDataClass.putData(t,"pathFitMode",this.pathFitMode,EFitMode.STRETCH),CDataClass.putData(t,"imageSrc",this.imageSrc,""),CDataClass.putData(t,"imageFitMode",this.imageFitMode,EFitMode.FIT),CDataClass.putData(t,"composite",this.composite,"source-over")}doFromData(t){super.doFromData(t),this.align=CDataClass.getData(t,"align",ECanvasItemAlign.NONE),this.kind=CDataClass.getData(t,"kind",ECanvasItemKind.RECTANGLE),this.name=CDataClass.getData(t,"name",""),this.position.fromData(CDataClass.getData(t,"position",{},!0)),this.positionUnit=CDataClass.getData(t,"positionUnit",EPositionUnit.PIXEL),this.rotationAngle=CDataClass.getData(t,"rotationAngle",0),this.rotationCenterX=CDataClass.getData(t,"rotationCenterX",.5),this.rotationCenterY=CDataClass.getData(t,"rotationCenterY",.5),this.margins.fromData(CDataClass.getData(t,"margins",{},!0)),this.fill.fromData(CDataClass.getData(t,"fill",{},!0)),this.stroke.fromData(CDataClass.getData(t,"stroke",{},!0)),this.opacity=CDataClass.getData(t,"opacity",1),this.visible=CDataClass.getData(t,"visible",!0),this.pathData.fromData(CDataClass.getData(t,"pathData",{},!0)),this.radiusX=CDataClass.getData(t,"radiusX",0),this.radiusY=CDataClass.getData(t,"radiusY",0),this.disableRoundSet.fromData(CDataClass.getData(t,"disableRoundSet",[],!0)),this.disableLineSet.fromData(CDataClass.getData(t,"disableLineSet",[],!0)),this.textSet.fromData(CDataClass.getData(t,"textSet",{},!0)),this.text=CDataClass.getData(t,"text",""),this.paintKind=CDataClass.getData(t,"paintKind",EPaintKind.NORMAL),this.paintWidth=CDataClass.getData(t,"paintWidth",50),this.paintHeight=CDataClass.getData(t,"paintHeight",50),this.patternIgnoreCount=CDataClass.getData(t,"patternIgnoreCount",0),this.patternMargin=CDataClass.getData(t,"patternMargin",0),this.patternKind=CDataClass.getData(t,"patternKind",EPatternKind.ALL),this.paintRotateCount=CDataClass.getData(t,"paintRotateCount",5),this.paintRotateStartAngle=CDataClass.getData(t,"paintRotateStartAngle",-90),this.paintRotateStopAngle=CDataClass.getData(t,"paintRotateStopAngle",270),this.paintRotateRadiusX=CDataClass.getData(t,"paintRotateRadiusX",.5),this.paintRotateRadiusY=CDataClass.getData(t,"paintRotateRadiusY",.5),this.paintRotateApplyAngle=CDataClass.getData(t,"paintRotateApplyAngle",!0),this.randomCount=CDataClass.getData(t,"randomCount",10),this.randomWidthMin=CDataClass.getData(t,"randomWidthMin",10),this.randomWidthMax=CDataClass.getData(t,"randomWidthMax",100),this.randomHeightMin=CDataClass.getData(t,"randomHeightMin",10),this.randomHeightMax=CDataClass.getData(t,"randomHeightMax",100),this.filter=CDataClass.getData(t,"filter",""),this.shadowColor=CDataClass.getData(t,"shadowColor",""),this.shadowBlur=CDataClass.getData(t,"shadowBlur",0),this.shadowOffsetX=CDataClass.getData(t,"shadowOffsetX",0),this.shadowOffsetY=CDataClass.getData(t,"shadowOffsetY",0),this.pathFitMode=CDataClass.getData(t,"pathFitMode",EFitMode.STRETCH),this.imageSrc=CDataClass.getData(t,"imageSrc",""),this.imageFitMode=CDataClass.getData(t,"imageFitMode",EFitMode.FIT),this.composite=CDataClass.getData(t,"composite","source-over")}setAlign(t,e){let i=this.position,s=0,a=0;switch(this._align){case ECanvasItemAlign.NONE:t.copyFrom(i.rect),t.offset(e.left,e.top);break;case ECanvasItemAlign.LEFT:t.set(e.left+this.margins.left,e.top+this.margins.top,e.left+this.margins.left+i.width,e.bottom-this.margins.bottom);break;case ECanvasItemAlign.TOP:t.set(e.left+this.margins.left,e.top+this.margins.top,e.right-this.margins.right,e.top+this.margins.top+i.height);break;case ECanvasItemAlign.RIGHT:t.set(e.right-this.margins.right-i.width,e.top+this.margins.top,e.right-this.margins.right,e.bottom-this.margins.bottom);break;case ECanvasItemAlign.BOTTOM:t.set(e.left+this.margins.left,e.bottom-this.margins.bottom-i.height,e.right-this.margins.right,e.bottom-this.margins.bottom);break;case ECanvasItemAlign.CENTER:s=(e.width-i.width)/2+e.left,a=(e.height-i.height)/2+e.top,t.set(s,a,s+i.width,a+i.height);break;case ECanvasItemAlign.LEFTTOP:t.set(e.left+this.margins.left,e.top+this.margins.top,e.left+this.margins.left+i.width,e.top+this.margins.top+i.height);break;case ECanvasItemAlign.LEFTBOTTOM:t.set(e.left+this.margins.left,e.bottom-this.margins.bottom-i.height,e.left+this.margins.left+i.width,e.bottom-this.margins.bottom);break;case ECanvasItemAlign.RIGHTTOP:t.set(e.right-this.margins.right-i.width,e.top+this.margins.top,e.right-this.margins.right,e.top+this.margins.top+i.height);break;case ECanvasItemAlign.RIGHTBOTTOM:t.set(e.right-this.margins.right-i.width,e.bottom-this.margins.bottom-i.height,e.right-this.margins.right,e.bottom-this.margins.bottom);break;case ECanvasItemAlign.MIDDLELEFT:a=(e.height-i.height)/2+e.top,t.set(e.left+this.margins.left,a,e.left+this.margins.left+i.width,a+i.height);break;case ECanvasItemAlign.MIDDLETOP:s=(e.width-i.width)/2+e.left,t.set(s,e.top+this.margins.top,s+i.width,e.top+this.margins.top+i.height);break;case ECanvasItemAlign.MIDDLERIGHT:a=(e.height-i.height)/2+e.top,t.set(e.right-this.margins.right-i.width,a,e.right-this.margins.right,a+i.height);break;case ECanvasItemAlign.MIDDLEBOTTOM:s=(e.width-i.width)/2+e.left,t.set(s,e.bottom-this.margins.bottom-i.height,s+i.width,e.bottom-this.margins.bottom);break;case ECanvasItemAlign.HCENTER:s=(e.width-i.width)/2+e.left,t.set(s,e.top+this.margins.top,s+i.width,e.bottom-this.margins.bottom);break;case ECanvasItemAlign.VCENTER:a=(e.height-i.height)/2+e.top,t.set(e.left+this.margins.left,a,e.right-this.margins.right,a+i.height)}}draw(t,e,i,s=1,a=1){if(!this._visible||0==this._opacity)return;let o=new CRect(0,0,0,0);this.position.rect.isEmpty()?o=new CRect(e.left+this._margins.left,e.top+this._margins.top,e.right-this._margins.right,e.bottom-this._margins.bottom):this._positionUnit==EPositionUnit.PERCENT?(o.left=CCalc.cr(e.width,0,100,this.position.left,2),o.top=CCalc.cr(e.height,0,100,this.position.top,2),o.right=CCalc.cr(e.width,0,100,this.position.right,2),o.bottom=CCalc.cr(e.height,0,100,this.position.bottom,2),o.offset(e.left,e.top)):this.setAlign(o,e),t.save(),t.scale(s,a),t.globalAlpha=this.opacity,""!=this._filter&&(t.filter=this.filter),""!=this._shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.globalCompositeOperation=this.composite;let n=o.left+o.width*this.rotationCenterX,r=o.top+o.height*this.rotationCenterY;t.translate(n,r),t.rotate(CCalc.cr(Math.PI,0,180,this.rotationAngle,2)),t.translate(-n,-r);let A=this;function h(e){A._fill.styleKind!=EStyleKind.EMPTY&&(A._fill.setContext(t,e),t.fill())}function g(e){A._stroke.styleKind!=EStyleKind.EMPTY&&A._stroke.lineWidth>0&&(A._stroke.setContext(t,e),t.stroke())}function C(t){let e=0,i=0,s=0,a=0;switch(A.patternKind){case EPatternKind.ALL:for(;;){if(i=0,s=0,0==A._patternIgnoreCount||e%(A._patternIgnoreCount+1)==0)for(;0!=A._patternIgnoreCount&&i%(A._patternIgnoreCount+1)!=0||t(o.left+i*A._paintWidth+i*A._patternMargin,o.top+e*A._paintHeight+e*A._patternMargin,A._paintWidth,A._paintHeight),i++,!((s+=A._paintWidth+A._patternMargin)>o.width););if(e++,(a+=A._paintHeight+A._patternMargin)>o.height)break}break;case EPatternKind.CHECK_HEAD:for(;;){for(i=0,s=0;(e%2==0&&i%2==0||e%2==1&&i%2==1)&&t(o.left+i*A._paintWidth+i*A._patternMargin,o.top+e*A._paintHeight+e*A._patternMargin,A._paintWidth,A._paintHeight),i++,!((s+=A._paintWidth+A._patternMargin)>o.width););if(e++,(a+=A._paintHeight+A._patternMargin)>o.height)break}break;case EPatternKind.CHECK_TAIL:for(;;){for(i=0,s=0;(e%2==0&&i%2==1||e%2==1&&i%2==0)&&t(o.left+i*A._paintWidth+i*A._patternMargin,o.top+e*A._paintHeight+e*A._patternMargin,A._paintWidth,A._paintHeight),i++,!((s+=A._paintWidth+A._patternMargin)>o.width););if(e++,(a+=A._paintHeight+A._patternMargin)>o.height)break}break;case EPatternKind.COLUMN:for(;0!=A._patternIgnoreCount&&i%(A._patternIgnoreCount+1)!=0||t(o.left+i*A._paintWidth+i*A._patternMargin,o.top+e*A._paintHeight+e*A._patternMargin,A._paintWidth,o.height),i++,!((s+=A._paintWidth+A._patternMargin)>o.width););break;case EPatternKind.ROW:for(;0!=A._patternIgnoreCount&&e%(A._patternIgnoreCount+1)!=0||t(o.left+i*A._paintWidth+i*A._patternMargin,o.top+e*A._paintHeight+e*A._patternMargin,o.width,A._paintHeight),e++,!((a+=A._paintHeight+A._patternMargin)>o.height););}}function l(t){let e=(A._paintRotateStopAngle-A._paintRotateStartAngle)/A._paintRotateCount,i=o.left+o.width*A.rotationCenterX,s=o.top+o.height*A.rotationCenterY,a=o.width*A._paintRotateRadiusX,n=o.height*A._paintRotateRadiusY,r=new CPoint(i,s);for(let i=0;i<A._paintRotateCount;i++){let s=i*e+A._paintRotateStartAngle,o=CPoint.getAngleToPoint(r,a,n,s);t(o.x,o.y,s,o.x-A._paintWidth/2,o.y-A._paintHeight/2,A._paintWidth,A._paintHeight)}}function u(t){for(let e=0;e<A._randomCount;e++){let e=360*Math.random(),i=o.width*A._paintRotateRadiusX,s=o.height*A._paintRotateRadiusY;-1!=A.randomWidthMin&&(i=(A.randomWidthMax-A.randomWidthMin)*Math.random()+A.randomWidthMin),-1!=A.randomHeightMin&&(s=(A.randomHeightMax-A.randomHeightMin)*Math.random()+A.randomHeightMin),t(e,o.left+Math.random()*(o.width-i),o.top+Math.random()*(o.height-s),i,s),CCalc.crRange2Value}}if(this._kind==ECanvasItemKind.RECTANGLE||this._kind==ECanvasItemKind.ROUNDRECTANGLE||this._kind==ECanvasItemKind.ELLIPSE||this._kind==ECanvasItemKind.ARC||this._kind==ECanvasItemKind.PATH)switch(this._stroke.lineWidth>0&&this._stroke.styleKind!=EStyleKind.EMPTY&&o.inflate(-this._stroke.lineWidth/2,-this._stroke.lineWidth/2),t.beginPath(),this._kind){case ECanvasItemKind.RECTANGLE:this.paintKind==EPaintKind.PATTERN?(C(function(e,i,s,a){A._pathData.clear(),A._pathData.makeRoundRectData(e,i,s,a,A._radiusX,A._radiusY,A._disableRoundSet,A._disableLineSet,!1),A._pathData.setPathData(t)}),h(o),g(o)):this.paintKind==EPaintKind.ROTATE?(l(function(e,i,s,a,o,n,r){A._pathData.clear(),A._pathData.makeRoundRectData(a,o,n,r,A._radiusX,A._radiusY,A._disableRoundSet,A._disableLineSet,!1),A._paintRotateApplyAngle&&A._pathData.rotate(new CPoint(e,i),s),A._pathData.setPathData(t)}),h(o),g(o)):this.paintKind==EPaintKind.RANDOM?(u(function(e,i,s,a,o){A._pathData.clear(),A._pathData.makeRoundRectData(i,s,a,o,A._radiusX,A._radiusY,A._disableRoundSet,A._disableLineSet,!1),A._pathData.setPathData(t)}),h(o),g(o)):(this._pathData.makeRoundRectData(o.left,o.top,o.width,o.height,this._radiusX,this._radiusY,this._disableRoundSet,this._disableLineSet,!0),this._pathData.setPathData(t),h(o),g(o));break;case ECanvasItemKind.ROUNDRECTANGLE:if(this.paintKind==EPaintKind.PATTERN){let e=0;e=(A.paintWidth,A.paintHeight,A.paintWidth/2),C(function(i,s,a,o){A._pathData.clear(),A._pathData.makeRoundRectData(i,s,a,o,e,e,new CStringSet,new CStringSet,!1),A._pathData.setPathData(t)}),h(o),g(o)}else if(this.paintKind==EPaintKind.ROTATE){let e=0;e=(A.paintWidth,A.paintHeight,A.paintWidth/2),l(function(i,s,a,o,n,r,h){A._pathData.clear(),A._pathData.makeRoundRectData(o,n,r,h,e,e,new CStringSet,new CStringSet,!1),A._paintRotateApplyAngle&&A._pathData.rotate(new CPoint(i,s),a),A._pathData.setPathData(t)}),h(o),g(o)}else if(this.paintKind==EPaintKind.RANDOM){let e=0;e=(A.paintWidth,A.paintHeight,A.paintWidth/2),u(function(i,s,a,o,n){A._pathData.clear(),A._pathData.makeRoundRectData(s,a,o,n,e,e,new CStringSet,new CStringSet,!1),A._pathData.setPathData(t)}),h(o),g(o)}else{let e=0;e=o.width>o.height?o.height/2:o.width/2,this._pathData.makeRoundRectData(o.left,o.top,o.width,o.height,e,e,new CStringSet,new CStringSet,!0),this._pathData.setPathData(t),h(o),g(o)}break;case ECanvasItemKind.ELLIPSE:if(this.paintKind==EPaintKind.PATTERN)C(function(e,i,s,a){A._pathData.clear(),A._pathData.makeEllipseData(e,i,s,a,!1),A._pathData.setPathData(t)}),h(o),g(o);else if(this.paintKind==EPaintKind.ROTATE){let e=0;e=(A.paintWidth,A.paintHeight,A.paintWidth/2),l(function(e,i,s,a,o,n,r){A._pathData.clear(),A._pathData.makeEllipseData(a,o,n,r,!1),A._paintRotateApplyAngle&&A._pathData.rotate(new CPoint(e,i),s),A._pathData.setPathData(t)}),h(o),g(o)}else this.paintKind==EPaintKind.RANDOM?(u(function(e,i,s,a,o){A._pathData.clear(),A._pathData.makeEllipseData(i,s,a,o,!1),A._pathData.setPathData(t)}),h(o),g(o)):(this._pathData.makeEllipseData(o.left,o.top,o.width,o.height),this._pathData.setPathData(t),h(o),g(o));break;case ECanvasItemKind.PATH:;if(this.paintKind==EPaintKind.PATTERN)C(function(e,i,s,a){let o;(o=A._pathFitMode==EFitMode.ORIGINAL?A._pathData.copyTo():A._pathFitMode==EFitMode.FIT?A._pathData.fitTo(new CRect(e,i,e+s,i+a)):A._pathData.stretchTo(new CRect(e,i,e+s,i+a))).setPathData(t)}),h(o),g(o);else if(this.paintKind==EPaintKind.ROTATE)l(function(e,i,s,a,o,n,r){let h;h=A._pathFitMode==EFitMode.ORIGINAL?A._pathData.copyTo():A._pathFitMode==EFitMode.FIT?A._pathData.fitTo(new CRect(a,o,a+n,o+r)):A._pathData.stretchTo(new CRect(a,o,a+n,o+r)),A._paintRotateApplyAngle&&h.rotate(new CPoint(e,i),s+90),h.setPathData(t)}),h(o),g(o);else if(this.paintKind==EPaintKind.RANDOM)u(function(e,i,s,a,o){let n;(n=A._pathFitMode==EFitMode.ORIGINAL?A._pathData.copyTo():A._pathFitMode==EFitMode.FIT?A._pathData.fitTo(new CRect(i,s,i+a,s+o)):A._pathData.stretchTo(new CRect(i,s,i+a,s+o))).rotate(new CPoint(i+a/2,s+o/2),e),n.setPathData(t)}),h(o),g(o);else{let e=function(t,e,i,s){let a;return a=A._pathFitMode==EFitMode.ORIGINAL?A._pathData.copyTo():A._pathFitMode==EFitMode.FIT?A._pathData.fitTo(new CRect(t,e,t+i,e+s)):A._pathData.stretchTo(new CRect(t,e,t+i,e+s))}(o.left,o.top,o.width,o.height);e.setPathData(t),h(e.getBounds()),g(e.getBounds())}}else if(this._kind==ECanvasItemKind.IMAGE&&null!=this._image){let e=this;if(t.globalAlpha=e.opacity,e.paintKind==EPaintKind.PATTERN)C(function(i,s,a,o){let n=new CRect(i,s,i+a,s+o),r=new CRect(0,0,e._image.width,e._image.height);n=n.getFitRect(r,!0),t.drawImage(e._image,n.left+i,n.top+s,n.width,n.height)});else if(e.imageFitMode==EFitMode.ORIGINAL)t.drawImage(e._image,o.left,o.top);else if(e.imageFitMode==EFitMode.FIT){let i=new CRect(0,0,e._image.width,e._image.height),s=o.getFitRect(i,!0);t.drawImage(e._image,o.left+s.left,o.top+s.top,s.width,s.height)}else t.drawImage(e._image,o.left,o.top,o.width,o.height)}this.paintKind==EPaintKind.NORMAL&&function(e){let s=A._text;"string"!=typeof s&&(s+=""),null!=s&&""!=s.trim()&&A._textSet.drawText(t,e,s,i)}(o),t.restore()}enumProperties(){let t=new Map;return t.set("align",CEnum.toArray(ECanvasItemAlign)),t.set("kind",CEnum.toArray(ECanvasItemKind)),t.set("patternKind",CEnum.toArray(EPatternKind)),t.set("positionUnit",CEnum.toArray(EPositionUnit)),t.set("pathFitMode",CEnum.toArray(EFitMode)),t.set("paintKind",CEnum.toArray(EPaintKind)),t.set("imageFitMode",CEnum.toArray(EFitMode)),t}addProperties(){let t=super.addProperties();return t.push({instance:this.pathData.transformer,propertyName:"pathDataTransfomer",readOnly:!1,enum:[]}),t}}class CCanvasItems extends CList{doToData(t){super.doToData(t);for(let e=0;e<this.length;e++)t.push(this.get(e).toData())}doFromData(t){super.doFromData(t),this.clear();for(let e=0;e<t.length;e++){this.addItem().fromData(t[e])}}addItem(){let t=new CCanvasItem,e=this;return t.onChange=function(t,i){e.doChange(i)},this.add(t),t}deleteItem(t){if(t instanceof CCanvasItem){for(let e=0;e<this.length;e++)if(this.get(e)==t){this.delete(e,1);break}}else for(let e=0;e<this.length;e++)if(this.get(e).name==t){this.delete(e,1);break}}getItem(t){let e=new Array;for(let i=0;i<this.length;i++)this.get(i).name==t&&e.push(this.get(i));return e}setText(t,e){for(let i=0;i<this.length;i++)this.get(i).name==t&&(this.get(i).text=e)}setObject(t){let e=Object.keys(t);for(let i=0;i<e.length;i++)this.setText(e[i],t[e[i]])}draw(t,e,i,s,a=1,o=1){if(null!=s){e.offset(i.x,i.y);for(let i=0;i<this.length;i++)this.get(i).visible&&this.get(i).draw(t,e,s,a,o)}}}class CCanvasLayer extends CNotifyChangeKindObject{static get CON_CHANGE_ITEMS(){return"i"}static get CON_CHANGE_OFFSET(){return"o"}static get CON_CHANGE_VISIBLE(){return"v"}static get CON_CHANGE_SCALE_X(){return"sx"}static get CON_CHANGE_SCALE_Y(){return"sy"}get id(){return this._id}get items(){return this._items}get name(){return this._name}set name(t){this._name!=t&&(this._name=t,this.doChange("name"))}get scaleX(){return this._scaleX}set scaleX(t){this._scaleX!=t&&(this._scaleX=t,this.doChange(CCanvasLayer.CON_CHANGE_SCALE_X))}get scaleY(){return this._scaleY}set scaleY(t){this._scaleY!=t&&(this._scaleY=t,this.doChange(CCanvasLayer.CON_CHANGE_SCALE_Y))}set scale(t){this.scaleX=t,this.scaleY=t}get transform(){return this._transform}get canvas(){return this._canvas}get context(){return this._context}get offset(){return this._offset}get visible(){return this._visible}set visible(t){this._visible!=t&&(this._visible=t,this.doChange(CCanvasLayer.CON_CHANGE_VISIBLE))}constructor(t){super(),this._name="",this._items=new CCanvasItems,this._scaleX=1,this._scaleY=1,this._transform=new CTransform,this._visible=!0,this._offset=new CNotifyPoint(0,0),this._canvas=document.createElement("canvas"),this.isDraw=!0,this._parent=t,this._id=CSequence.getSequence("layer");let e=this;this._offset.onChange=function(){e.doChange(CCanvasLayer.CON_CHANGE_OFFSET)},this._items.onChange=function(){e.doChange(CCanvasLayer.CON_CHANGE_ITEMS)},this._canvas=document.createElement("canvas"),this._canvas.style.outline="none",this._canvas.style.position="absolute",this._canvas.style.margin="0px 0px 0px 0px",this._canvas.style.padding="0px 0px 0px 0px",this._canvas.style.pointerEvents="none",this._canvas.setAttribute("ondragstart","return false"),this._canvas.setAttribute("onselectstart","return false"),this._canvas.setAttribute("oncontextmenu","return false");let i=this._canvas.getContext("2d");null!=i&&(this._context=i),null!=this._parent&&(this._parent instanceof HTMLElement?this._parent.appendChild(this._canvas):null!=this._parent.parent&&this._parent.parent.controlElement.appendChild(this._canvas)),this._transform.onChange=function(t,i){e.transform.setTransform(e.canvas)},this.transform.setTransform(this.canvas)}doToData(t){super.doToData(t),CDataClass.putData(t,"name",this.name,""),CDataClass.putData(t,"items",this.items.toData(),[],!0),CDataClass.putData(t,"transform",this.transform.toData(),{},!0),CDataClass.putData(t,"visible",this.visible,!0),CDataClass.putData(t,"offset",this.offset.toData(),{},!0),CDataClass.putData(t,"width",this.canvas.width,0),CDataClass.putData(t,"height",this.canvas.height,0)}doFromData(t){super.doFromData(t),this.name=CDataClass.getData(t,"name",""),this.items.fromData(CDataClass.getData(t,"items",[],!0)),this.transform.fromData(CDataClass.getData(t,"transform",{},!0)),this.visible=CDataClass.getData(t,"visible",!0),this.offset.fromData(CDataClass.getData(t,"offset",{},!0)),this.canvas.width=CDataClass.getData(t,"width",0),this.canvas.height=CDataClass.getData(t,"height",0)}doChange(t){super.doChange(t),t==CCanvasLayer.CON_CHANGE_VISIBLE&&(this.visible?(null!=this.canvas&&(this.canvas.style.visibility="visible"),this.draw()):(null!=this.canvas&&(this.canvas.style.visibility="hidden"),CSystem.requestDraw.delete(this))),t!=CCanvasLayer.CON_CHANGE_OFFSET&&t!=CCanvasLayer.CON_CHANGE_ITEMS||this.draw(),t!=CCanvasLayer.CON_CHANGE_SCALE_X&&t!=CCanvasLayer.CON_CHANGE_SCALE_Y||this.doChangeScale()}doRemove(){this.canvas.remove(),super.doRemove()}doChangeScale(){this._parent instanceof CCanvasLayers&&null!=this._parent.parent&&this.doSetCanvasElementPosition(0,0,this._parent.parent.position.width,this._parent.parent.position.height),this.draw()}doSetCanvasElementPosition(t,e,i,s){this._canvas.width=i*this.scaleX,this._canvas.height=s*this.scaleY,this._canvas.style.left=(i-this._canvas.width)/2+"px",this._canvas.style.top=(s-this._canvas.height)/2+"px",this.draw()}setCanvasElementPosition(t,e,i,s){this.doSetCanvasElementPosition(t,e,i,s)}addItem(){return this._items.addItem()}doDraw(){if(null!=this._context&&this.canvas.width>0&&this.canvas.height>0&&this.visible){if(this._context.clearRect(0,0,this.canvas.width,this.canvas.height),null!=CSystem.bufferingContext){let t=new CRect(0,0,this.canvas.width/this.scaleX,this.canvas.height/this.scaleY);this.items.draw(this._context,t,this.offset,CSystem.bufferingContext,this.scaleX,this.scaleY)}null!=this.onDraw&&this.onDraw(this,this._context)}}draw(){this.visible&&this.isDraw&&CSystem.requestDraw.add(this)}getCanvasItems(t){let e=new Array,i=this.items.getItem(t);for(let t=0;t<i.length;t++)e.push(i[t]);return e}}class CCanvasLayers extends CList{static get CON_CHANGE_ADD_LAYER(){return"addlayer"}static get CON_CHANGE_LAYER(){return"layer"}get parent(){return this._parent}set scaleX(t){for(let e=0;e<this.length;e++)this.get(e).scaleX=t}set scaleY(t){for(let e=0;e<this.length;e++)this.get(e).scaleY=t}set scale(t){for(let e=0;e<this.length;e++)this.get(e).scale=t}constructor(t){super(),this._parent=t}doChangeLayer(t,e){this.useChangeEvent&&null!=this.onChangeLayer&&this.onChangeLayer(this,t,e)}doResource(){super.doResource(),null!=this._parent&&this._parent.setLayers()}doToData(t){super.doToData(t);for(let e=0;e<this.length;e++)t.push(this.get(e).toData())}doFromData(t){super.doFromData(t),this.clear();for(let e=0;e<t.length;e++){this.addLayer().fromData(t[e])}null!=this.parent&&this.parent.doSetLayers()}doRemove(){for(let t=this.length-1;t>=0;t--)this.get(t).remove();this.clear(),super.doRemove()}addLayer(){let t=new CCanvasLayer(this),e=this;return t.onChange=function(i){e.doChangeLayer(CCanvasLayers.CON_CHANGE_LAYER,t)},t.onDraw=function(t,i){if(null!=e.parent){let s=-1;for(let i=0;i<e.length;i++)if(t==e.get(i)){s=i;break}e.parent.doLayerDraw(s,t,i)}},e.doChangeLayer(CCanvasLayers.CON_CHANGE_ADD_LAYER,t),this.add(t),t}deleteLayer(t){if(t instanceof CCanvasLayer){for(let e=0;e<this.length;e++)if(this.get(e)==t){this.get(e).remove(),this.delete(e,1);break}}else for(let e=0;e<this.length;e++)if(this.get(e).id==t){this.get(e).remove(),this.delete(e,1);break}}clear(){for(let t=0;t<this.length;t++)this.get(t).remove();super.clear()}getLayer(t){let e;for(let i=0;i<this.length;i++)if(this.get(i).id==t){e=this.get(i);break}return e}getLayerFromName(t){let e;for(let i=0;i<this.length;i++)if(this.get(i).name==t){e=this.get(i);break}return e}setLayersPosition(t,e,i,s){for(let a=0;a<this.length;a++)this.get(a).setCanvasElementPosition(t,e,i,s)}draw(){for(let t=0;t<this.length;t++)this.get(t).draw()}getCanvasItems(t){let e=new Array;for(let i=0;i<this.length;i++){let s=this.get(i).getCanvasItems(t);for(let t=0;t<s.length;t++)e.push(s[t])}return e}getPathDataOrgSize(){let t={width:0,height:0};for(let e=0;e<this.length;e++)this.get(e).items.length>0&&(t.width=this.get(e).items.get(0).pathData.width,t.height=this.get(e).items.get(0).pathData.height);return t}static setLayersMiddlePathData(t,e,i,s){for(let a=0;a<i.length;a++)for(let o=0;o<i.get(a).items.length;o++)if(t.get(a).items.length>o&&e.get(a).items.length>o){let n=t.get(a).items.get(o).pathData,r=e.get(a).items.get(o).pathData,A=i.get(a).items.get(o).pathData;for(let t=0;t<A.length;t++)A.get(t).point.x=CCalc.crRange2Value(0,1,s,n.get(t).point.x,r.get(t).point.x),A.get(t).point.y=CCalc.crRange2Value(0,1,s,n.get(t).point.y,r.get(t).point.y),A.get(t).cPoint1.x=CCalc.crRange2Value(0,1,s,n.get(t).cPoint1.x,r.get(t).cPoint1.x),A.get(t).cPoint1.y=CCalc.crRange2Value(0,1,s,n.get(t).cPoint1.y,r.get(t).cPoint1.y),A.get(t).cPoint2.x=CCalc.crRange2Value(0,1,s,n.get(t).cPoint2.x,r.get(t).cPoint2.x),A.get(t).cPoint2.y=CCalc.crRange2Value(0,1,s,n.get(t).cPoint2.y,r.get(t).cPoint2.y);A.width=CCalc.crRange2Value(0,1,s,n.width,r.width),A.height=CCalc.crRange2Value(0,1,s,n.height,r.height)}}}class CControl extends CNotifyChangeKindObject{static get CON_CHANGE_NAME(){return"name"}static get CON_CHANGE_STOP_PROPAGATION(){return"changeStopPropagation"}static get CON_CHANGE_POSITION_PARENT(){return"changePositionParent"}static get CON_CHANGE_POSITION(){return"changePosition"}static get CON_CHANGE_HAS_POINTER(){return"changeHasPointer"}static get CON_CHANGE_TAB_INDEX(){return"changeTabIndex"}static get CON_CHANGE_OVER_FLOW(){return"changeOverFlow"}static get CON_CHANGE_OPACITY(){return"changeOpacity"}static get CON_CHANGE_ENABLED(){return"changeEnabled"}static get CON_CHANGE_VISIBLE(){return"changeVisible"}static get CON_CHANGE_FOCUS(){return"changeFocus"}static get CON_CHANGE_SELECTED(){return"changeSelect"}static get CON_CHANGE_CHECKED(){return"changeCheck"}static get CON_CHANGE_USE_DRAG(){return"changeUseDrag"}get focusedAnimatorResource(){return this._focusedAnimatorResource}set focusedAnimatorResource(t){this._focusedAnimatorResource=t,""!=t&&(this.focusedAnimationTrigger=CAnimator.animatorFromResource(this,t))}get enabledAnimatorResource(){return this._enabledAnimatorResource}set enabledAnimatorResource(t){this._enabledAnimatorResource=t,""!=t&&(this.enabledAnimationTrigger=CAnimator.animatorFromResource(this,t))}get visibleAnimatorResource(){return this._visibleAnimatorResource}set visibleAnimatorResource(t){this._visibleAnimatorResource=t,""!=t&&(this.visibleAnimationTrigger=CAnimator.animatorFromResource(this,t))}get resourceAnimatorResource(){return this._resourceAnimatorResource}set resourceAnimatorResource(t){this._resourceAnimatorResource=t,""!=t&&(this.resourceAnimationTrigger=CAnimator.animatorFromResource(this,t))}get selectAnimatorResource(){return this._selectAnimatorResource}set selectAnimatorResource(t){this._selectAnimatorResource=t,""!=t&&(this.selectAnimationTrigger=CAnimator.animatorFromResource(this,t))}get checkAnimatorResource(){return this._checkAnimatorResource}set checkAnimatorResource(t){this._checkAnimatorResource=t,""!=t&&(this.checkAnimationTrigger=CAnimator.animatorFromResource(this,t))}get removeAnimatorResource(){return this._removeAnimatorResource}set removeAnimatorResource(t){this._removeAnimatorResource=t,""!=t&&(this.removeAnimationTrigger=CAnimator.animatorFromResource(this,t))}get initResource(){return this._initResource}set initResource(t){this._initResource=t;let e=CSystem.resources.get(t);if(null!=e.init){new Function("control",e.init)(this)}}get propertyName(){return this._propertyName}set propertyName(t){this._propertyName!=t&&(this._propertyName=t,this.doChangePropertyName())}get propertyDataKind(){return this._propertyDataKind}set propertyDataKind(t){this._propertyDataKind!=t&&(this._propertyDataKind=t,this.doChangePropertyDataKind())}get parent(){return this._parent}set parent(t){null==t?(this._parent=t,null!=this.controlElement.parentElement&&this.controlElement.parentElement.removeChild(this.controlElement)):(t instanceof HTMLElement?t.appendChild(this.controlElement):(this._parent=t,null!=this.controlElement.parentElement&&this.controlElement.parentElement.removeChild(this.controlElement),t.controlElement.appendChild(this.controlElement)),this.doSetPosition())}get id(){return this._id}get name(){return this._name}get childs(){return CSystem.getChildControls(this)}get parents(){let t=new Array,e=this._parent;for(;null!=e;)t.unshift(e),e=e.parent;return t}get parentPositions(){let t=new Array,e=this._parent;for(;null!=e;)t.unshift(e._position),e=e.parent;return t}get brotherPositions(){let t=new Array,e=CSystem.getBroControls(this);for(let i=0;i<e.length;i++)e[i].visible&&t.push(e[i]._position);return t}get controlElement(){return this._controlElement}get elementBounds(){let t=new CRect,e=this._controlElement.getBoundingClientRect();return t.left=e.x,t.top=e.y,t.width=e.width,t.height=e.height,t}get position(){return this._position}set position(t){this._position=t;let e=this;this._position.onChange=function(t,i){e.doChangePosition(i)}}get transform(){return this._transform}get hasPointerEvent(){return this._hasPointerEvent}set hasPointerEvent(t){this._hasPointerEvent!=t&&(this._hasPointerEvent=t,this.doChange(CControl.CON_CHANGE_HAS_POINTER))}get cursor(){return this._cursor}set cursor(t){this._cursor!=t&&(this._cursor=t,this.controlElement.style.cursor=t)}get stopPropagation(){return this._stopPropagation}get tabIndex(){return this._tabIndex}set tabIndex(t){this._tabIndex!=t&&(this._tabIndex=t,this.doChange(CControl.CON_CHANGE_TAB_INDEX))}get overflow(){return this._overflow}set overflow(t){this._overflow!=t&&(this._overflow=t,this.doChange(CControl.CON_CHANGE_OVER_FLOW))}get opacity(){return this._opacity}set opacity(t){this._opacity!=t&&(this._opacity=t,this.doChange(CControl.CON_CHANGE_OPACITY))}get enabled(){return this._enabled}set enabled(t){this._enabled!=t&&(this._enabled=t,this.doChange(CControl.CON_CHANGE_ENABLED))}get visible(){return this._visible}set visible(t){this._visible!=t&&(this._visible=t,this.doChange(CControl.CON_CHANGE_VISIBLE,t))}get focused(){return this._focused}set focused(t){this._focused!=t&&(this._focused=t,t?this.controlElement.focus():this.controlElement.blur(),this.doChange(CControl.CON_CHANGE_FOCUS))}get hasFocus(){return""!=this.tabIndex}set hasFocus(t){t?this.hasFocus||(this.tabIndex=CSequence.getSequence("tabindex_").split("_")[1]):this.tabIndex=""}get selected(){return this._selected}set selected(t){this._selected!=t&&(this._selected=t,this.doChange(CControl.CON_CHANGE_SELECTED))}get checked(){return this._checked}set checked(t){this._checked!=t&&(this._checked=t,this.doChange(CControl.CON_CHANGE_CHECKED))}get filter(){return this._filter}constructor(t,e){super(),this._hasPointerEvent=!0,this._stopPropagation=new CStopPropagationInfo,this._tabIndex="",this._overflow="",this._opacity=1,this._enabled=!0,this._visible=!0,this._focused=!1,this._selected=!1,this._checked=!1,this._cursor="auto",this._initResource="",this._propertyName="",this._propertyDataKind="",this._focusedAnimatorResource="",this._enabledAnimatorResource="",this._visibleAnimatorResource="",this._resourceAnimatorResource="",this._selectAnimatorResource="",this._checkAnimatorResource="",this._removeAnimatorResource="";let i=this;this._id=CSequence.getSequence("control"),this._name=null!=e?e:CSequence.getSequence("unnamed");let s=!1;if(0!=CSystem.getControlsFromName(this.getNamPath()).length&&(s=!0),this._controlElement=document.createElement("control"),this._controlElement.setAttribute("className",this.className),this._controlElement.setAttribute("control-id",this.id),this._controlElement.setAttribute("control-name",this.name),this._controlElement.style.outline="none",this._controlElement.style.position="absolute",this._controlElement.style.margin="0px 0px 0px 0px",this._controlElement.style.padding="0px 0px 0px 0px",this._controlElement.style.border="none",this._controlElement.style.zIndex=CSystem.getZPlus()+"",this._controlElement.setAttribute("ondragstart","return false"),this._controlElement.setAttribute("onselectstart","return false"),this._controlElement.setAttribute("oncontextmenu","return false"),this._controlElement.setAttribute("class","scrollno"),this._controlElement.style.touchAction="auto",this._controlElement.style.userSelect="text",this._controlElement.style.pointerEvents="auto",this._controlElement.style.opacity=this._opacity+"",this._position=new CPosition,this._position.onChange=function(t,e){i.doChangePosition(e)},this._transform=new CTransform,this._transform.onChange=function(t,e){i.doChangeTrasform(e)},this._stopPropagation.onChange=function(){i.doChange(CControl.CON_CHANGE_STOP_PROPAGATION)},this._controlElement.addEventListener("focus",function(t){i.enabled&&(i.focused=!0)}),this._controlElement.addEventListener("blur",function(t){i.enabled&&(i.focused=!1)}),t instanceof CControl&&(this._parent=t,this._parent.controlElement.appendChild(this._controlElement)),t instanceof HTMLElement&&this.parentElement(t),this._filter=new CFilter(this._controlElement),s)throw this.remove(),new Error("invalid name : "+e);CSystem.controls.addControl(this),this.transform.setTransform(this._controlElement)}doToData(t){super.doToData(t),CDataClass.putData(t,"className",this.className),CDataClass.putData(t,"position",this.position.toData(),{},!0),CDataClass.putData(t,"transform",this.transform.toData(),{},!0),CDataClass.putData(t,"hasPointerEvent",this.hasPointerEvent,!0),CDataClass.putData(t,"stopPropagation",this.stopPropagation.toData(),{},!0),CDataClass.putData(t,"tabIndex",this.tabIndex,""),CDataClass.putData(t,"overflow",this.overflow,""),CDataClass.putData(t,"opacity",this.opacity,1),CDataClass.putData(t,"filter",this.filter.toData(),{},!0),CDataClass.putData(t,"enabled",this.enabled,!0),CDataClass.putData(t,"visible",this.visible,!0),CDataClass.putData(t,"selected",this.selected,!1),CDataClass.putData(t,"checked",this.checked,!1),CDataClass.putData(t,"focusedAnimatorResource",this.focusedAnimatorResource,""),CDataClass.putData(t,"enabledAnimatorResource",this.enabledAnimatorResource,""),CDataClass.putData(t,"visibleAnimatorResource",this.visibleAnimatorResource,""),CDataClass.putData(t,"resourceAnimatorResource",this.resourceAnimatorResource,""),CDataClass.putData(t,"selectAnimatorResource",this.selectAnimatorResource,""),CDataClass.putData(t,"checkAnimatorResource",this.checkAnimatorResource,""),CDataClass.putData(t,"removeAnimatorResource",this.removeAnimatorResource,""),CDataClass.putData(t,"propertyName",this.propertyName,""),CDataClass.putData(t,"propertyDataKind",this.propertyDataKind,""),null!=this.focusedAnimationTrigger&&CDataClass.putData(t,"focusedAnimationTrigger",this.focusedAnimationTrigger.toData(),{},!0),null!=this.enabledAnimationTrigger&&CDataClass.putData(t,"enabledAnimationTrigger",this.enabledAnimationTrigger.toData(),{},!0),null!=this.visibleAnimationTrigger&&CDataClass.putData(t,"visibleAnimationTrigger",this.visibleAnimationTrigger.toData(),{},!0),null!=this.resourceAnimationTrigger&&CDataClass.putData(t,"resourceAnimationTrigger",this.resourceAnimationTrigger.toData(),{},!0),null!=this.selectAnimationTrigger&&CDataClass.putData(t,"selectAnimationTrigger",this.selectAnimationTrigger.toData(),{},!0),null!=this.checkAnimationTrigger&&CDataClass.putData(t,"checkAnimationTrigger",this.checkAnimationTrigger.toData(),{},!0)}doFromData(t){super.doFromData(t);let e=""!=this.propertyName,i=this.propertyName,s=this.propertyDataKind;this.position.fromData(CDataClass.getData(t,"position",{},!0)),this.transform.fromData(CDataClass.getData(t,"transform",{},!0)),this.hasPointerEvent=CDataClass.getData(t,"hasPointerEvent",!0),this.stopPropagation.fromData(CDataClass.getData(t,"stopPropagation",{},!0)),this.tabIndex=CDataClass.getData(t,"tabIndex",""),this.overflow=CDataClass.getData(t,"overflow",""),this.opacity=CDataClass.getData(t,"opacity",1),this.filter.fromData(CDataClass.getData(t,"filter",{},!0)),this.enabled=CDataClass.getData(t,"enabled",!0),this.visible=CDataClass.getData(t,"visible",!0),this.selected=CDataClass.getData(t,"selected",!1),this.checked=CDataClass.getData(t,"checked",!1),CAnimator.fromAnimatorData(t,this,"focusedAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"enabledAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"visibleAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"resourceAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"selectAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"checkAnimationTrigger"),this.focusedAnimatorResource=CDataClass.getData(t,"focusedAnimatorResource",""),this.enabledAnimatorResource=CDataClass.getData(t,"enabledAnimatorResource",""),this.visibleAnimatorResource=CDataClass.getData(t,"visibleAnimatorResource",""),this.resourceAnimatorResource=CDataClass.getData(t,"resourceAnimatorResource",""),this.selectAnimatorResource=CDataClass.getData(t,"selectAnimatorResource",""),this.checkAnimatorResource=CDataClass.getData(t,"checkAnimatorResource",""),this.removeAnimatorResource=CDataClass.getData(t,"removeAnimatorResource",""),this.propertyName=CDataClass.getData(t,"propertyName",""),this.propertyDataKind=CDataClass.getData(t,"propertyDataKind",""),e&&(this.propertyName=i,this.propertyDataKind=s)}doResource(){let t=CSystem.resources.get(this._resource);if(null!=t){if(this.fromData(t),null!=t.init){new Function("control",t.init)(this)}if(null!=this.resourceAnimationTrigger){let t=this;this.resourceAnimationTrigger.onAfterAnimation=function(){null!=t.onResource&&t.onResource(this)},this.resourceAnimationTrigger.start()}else null!=this.onResource&&this.onResource(this)}}doSetPosition(){if(null!=this.parent){let t=CSystem.getBroVisiblePositions(this),e=CPosition.getAlignPixelBounds(this.parent.position,t,this.position);e.left==this.position.left&&e.top==this.position.top||(e.left!=this.position.left&&(this.position.leftNotNofity=e.left),e.top!=this.position.top&&(this.position.topNotNofity=e.top),this.doChangeOffset()),e.width==this.position.width&&e.height==this.position.height||(e.width!=this.position.width&&(this.position.widthNotNofity=e.width),e.height!=this.position.height&&(this.position.heightNotNofity=e.height),this.doChangeSize())}else this.doSetElementOffset(),this.doSetElementSize();null!=this.onSetPosition&&this.onSetPosition(this)}doSetElementOffset(){this.controlElement.style.left=this.position.left+"px",this.controlElement.style.top=this.position.top+"px",null!=this.onSetElementOffset&&this.onSetElementOffset(this)}doSetElementSize(){this.controlElement.style.width=this.position.width+"px",this.controlElement.style.height=this.position.height+"px",null!=this.onSetElementSize&&this.onSetElementSize(this)}doSetElementRotationCenter(){null!=this.onSetElementRotationCenter&&this.onSetElementRotationCenter(this)}doSetElementScale(){null!=this.onSetElementScale&&this.onSetElementScale(this)}doRemove(){null!=this.onBeforeRemove&&this.onBeforeRemove(this),this.controlElement.blur();let t=CSystem.getChildControls(this);for(let e=0;e<t.length;e++)t[e].remove();CSystem.controls.deleteControl(this),this.controlElement.remove(),null!=this.focusedAnimationTrigger&&this.focusedAnimationTrigger.remove(),this.focusedAnimationTrigger=void 0,null!=this.enabledAnimationTrigger&&this.enabledAnimationTrigger.remove(),this.enabledAnimationTrigger=void 0,null!=this.visibleAnimationTrigger&&this.visibleAnimationTrigger.remove(),this.visibleAnimationTrigger=void 0,null!=this.resourceAnimationTrigger&&this.resourceAnimationTrigger.remove(),this.resourceAnimationTrigger=void 0,null!=this.selectAnimationTrigger&&this.selectAnimationTrigger.remove(),this.selectAnimationTrigger=void 0,null!=this.checkAnimationTrigger&&this.checkAnimationTrigger.remove(),this.checkAnimationTrigger=void 0,null!=this.removeAnimationTrigger&&this.removeAnimationTrigger.remove(),this.removeAnimationTrigger=void 0,super.doRemove()}doChange(t,e){t==CControl.CON_CHANGE_POSITION&&this.doChangePosition(e),t==CControl.CON_CHANGE_HAS_POINTER&&this.doChangeHasPointer(),t==CControl.CON_CHANGE_TAB_INDEX&&this.controlElement.setAttribute("tabindex",this._tabIndex),t==CControl.CON_CHANGE_OVER_FLOW&&(this.controlElement.style.overflow=this._overflow),t==CControl.CON_CHANGE_OPACITY&&this.doChangeOpacity(),t==CControl.CON_CHANGE_ENABLED&&this.doChangeEnabled(),t==CControl.CON_CHANGE_VISIBLE&&this.doChangeVisible(e),t==CControl.CON_CHANGE_FOCUS&&this.doChangeFocus(),t==CControl.CON_CHANGE_CHECKED&&this.doChangeChecked(),t==CControl.CON_CHANGE_SELECTED&&this.doChangeSelected(),super.doChange(t)}doChangePosition(t,e){this.doChange(t,e);let i=!1,s=!1;if(null!=this.parent&&this.position.align!=EPositionAlign.NONE){let t=CSystem.getBroVisiblePositions(this),e=CPosition.getAlignPixelBounds(this.parent.position,t,this.position);e.left==this.position.left&&e.top==this.position.top||(e.left!=this.position.left&&(this.position.leftNotNofity=e.left,i=!0),e.top!=this.position.top&&(this.position.topNotNofity=e.top,i=!0),this.doChangeOffset()),e.width==this.position.width&&e.height==this.position.height||(e.width!=this.position.width&&(this.position.widthNotNofity=e.width,s=!0),e.height!=this.position.height&&(this.position.heightNotNofity=e.height,s=!0),this.doChangeSize())}t!=CPosition.CON_CHANGE_LEFT&&t!=CPosition.CON_CHANGE_TOP||i||this.doChangeOffset(),t!=CPosition.CON_CHANGE_WIDTH&&t!=CPosition.CON_CHANGE_HEIGHT||s||this.doChangeSize(),t==CPosition.CON_CHANGE_ALIGN&&this.doChangeAilgn(),t==CPosition.CON_CHANGE_ALIGN_INFO&&this.doChangeAlignInfo(t),t==CPosition.CON_CHANGE_PARENT_ALIGN_INFO&&this.doChangeParentAlignInfo(t),t==CPosition.CON_CHANGE_MARGINS&&this.doChangeMargins(),t==CPosition.CON_CHANGE_PADDING&&this.doChangePadding()}doChangeTrasform(t){this._transform.setTransform(this.controlElement),t!=CTransform.CON_CHANGE_PERSPECTIVE&&t!=CTransform.CON_CHANGE_PERSPECTIVE_Y&&t!=CTransform.CON_CHANGE_PERSPECTIVE_X||this.doChangePerspective(),t!=CTransform.CON_CHANGE_ROTATION_POINT_X&&t!=CTransform.CON_CHANGE_ROTATION_POINT_Y&&t!=CTransform.CON_CHANGE_ROTATION_POINT_Z||this.doChangeRotationCenter(),t!=CTransform.CON_CHANGE_SCALE_X&&t!=CTransform.CON_CHANGE_SCALE_Y&&t!=CTransform.CON_CHANGE_SCALE_Z||this.doChangeScale(),t!=CTransform.CON_CHANGE_ROTATE_X&&t!=CTransform.CON_CHANGE_ROTATE_Y&&t!=CTransform.CON_CHANGE_ROTATE_Z||this.doChangeRotate(),t!=CTransform.CON_CHANGE_TRANSLATE_X&&t!=CTransform.CON_CHANGE_TRANSLATE_Y&&t!=CTransform.CON_CHANGE_TRANSLATE_Z||this.doChangeTraslate(),null!=this.onChangeTrasform&&this.onChangeTrasform(this)}doChangeAilgn(){this.doSetElementOffset(),this.doSetElementSize(),this.childsPositionSet(),this.brothersPositionSet(),null!=this.onChangeAlign&&this.onChangeAlign(this)}doChangeAlignInfo(t,e){this.doSetElementOffset(),this.doSetElementSize(),this.childsPositionSet(),this.brothersPositionSet(),null!=this.onChangeAlignInfo&&this.onChangeAlignInfo(this)}doChangeParentAlignInfo(t){this.childsPositionSet(),null!=this.onChangeParentAlignInfo&&this.onChangeParentAlignInfo(this)}doChangeOpacity(){this._controlElement.style.opacity=this._opacity+"",null!=this.onChangeOpacity&&this.onChangeOpacity(this)}doChangeVisible(t){if(null!=this.visibleAnimationTrigger)if(t){let t=this;this.visibleAnimationTrigger.onAfterAnimation=function(){t.visible||(t._controlElement.style.display="none"),t.doShow(),t.brothersPositionSet()},this._controlElement.style.display="inline-block",this.triggerTrue(this.visibleAnimationTrigger)}else{let t=this;this.visibleAnimationTrigger.onAfterAnimation=function(){t.visible||(t._controlElement.style.display="none"),t.doHide(),t.brothersPositionSet()},this.triggerFalse(this.visibleAnimationTrigger)}else t?(this._controlElement.style.display="inline-block",this.doShow(),this.brothersPositionSet()):(this._controlElement.style.display="none",this.doHide(),this.brothersPositionSet());null!=this.onChangeVisible&&this.onChangeVisible(this)}doChangeEnabled(){this.enabled||this.focused&&(this.controlElement.blur(),this.focused=!1),null!=this.enabledAnimationTrigger&&(this.enabled?this.triggerTrue(this.enabledAnimationTrigger):this.triggerFalse(this.enabledAnimationTrigger)),null!=this.onChangeEnabled&&this.onChangeEnabled(this)}doChangeFocus(){null!=this.focusedAnimationTrigger&&(this.focused?this.triggerTrue(this.focusedAnimationTrigger):this.triggerFalse(this.focusedAnimationTrigger)),null!=this.onChangeFocus&&this.onChangeFocus(this)}doChangeSelected(){null!=this.selectAnimationTrigger&&(this.selected?this.triggerTrue(this.selectAnimationTrigger):this.triggerFalse(this.selectAnimationTrigger)),null!=this.onChangeSelected&&this.onChangeSelected(this)}doChangeChecked(){null!=this.checkAnimationTrigger&&(this.checked?this.triggerTrue(this.checkAnimationTrigger):this.triggerFalse(this.checkAnimationTrigger)),null!=this.onChangeChecked&&this.onChangeChecked(this)}doChangeOffset(){this.doSetElementOffset(),null!=this.onChangeOffset&&this.onChangeOffset(this)}doChangeSize(){if(this.doSetElementSize(),this.childsPositionSet(),this.brothersPositionSet(),this.position.align==EPositionAlign.RIGHT||this.position.align==EPositionAlign.BOTTOM){if(null!=this.parent){let t=CSystem.getBroVisiblePositions(this),e=CPosition.getAlignPixelBounds(this.parent.position,t,this.position);e.left==this.position.left&&e.top==this.position.top||(e.left!=this.position.left&&(this.position.leftNotNofity=e.left),e.top!=this.position.top&&(this.position.topNotNofity=e.top)),e.width==this.position.width&&e.height==this.position.height||(e.width!=this.position.width&&(this.position.widthNotNofity=e.width),e.height!=this.position.height&&(this.position.heightNotNofity=e.height))}this.doSetElementOffset(),this.doSetElementSize()}null!=this.onChangeSize&&this.onChangeSize(this)}doChangeRotationCenter(){this.doSetElementRotationCenter(),null!=this.onChangeRotationCenter&&this.onChangeRotationCenter(this)}doChangeRotate(){null!=this.onChangeRotate&&this.onChangeRotate(this)}doChangeScale(){null!=this.onChangeScale&&this.onChangeScale(this)}doChangeTraslate(){null!=this.onChangeTranslate&&this.onChangeTranslate(this)}doChangePerspective(){null!=this.onChangePerspective&&this.onChangePerspective(this)}doChangeMargins(){this.doSetElementOffset(),this.doSetElementSize(),this.brothersPositionSet(),this.childsPositionSet(),null!=this.onChangeMargins&&this.onChangeMargins(this)}doChangePadding(){this.childsPositionSet(),null!=this.onChangePadding&&this.onChangePadding(this)}doChangeHasPointer(){this._hasPointerEvent?this._controlElement.style.pointerEvents="auto":this._controlElement.style.pointerEvents="none",null!=this.onChangeHasPointer&&this.onChangeHasPointer(this)}doChangeCountry(t){null!=this.onChangeCountry&&this.onChangeCountry(this,t)}doChangePropertyName(){null!=this.onChangePropertyName&&this.onChangePropertyName(this)}doChangePropertyDataKind(){null!=this.onChangePropertyDataKind&&this.onChangePropertyDataKind(this)}doHide(){null!=this.onHide&&this.onHide(this)}doShow(){null!=this.onShow&&this.onShow(this)}triggerTrue(t){t.isAnimate()?t.reverse():t.start()}triggerFalse(t){t.isAnimate()?t.isLoop?t.cancel():t.reverse():t.invert()}childsPositionSet(){let t=CSystem.getChildControls(this);for(let e=0;e<t.length;e++)t[e].position.align!=EPositionAlign.NONE&&t[e].doSetPosition()}brothersPositionSet(){let t=CSystem.getBroControls(this);for(let e=0;e<t.length;e++)t[e].position.align!=EPositionAlign.NONE&&t[e].doSetPosition()}remove(){if(null!=this.removeAnimationTrigger){let t=this;this.removeAnimationTrigger.onAfterAnimation=function(){t.doRemove()},this.removeAnimationTrigger.start()}else this.doRemove()}parentElement(t){t.appendChild(this._controlElement)}getParents(){let t=new Array,e=this.parent;for(;null!=e;)t.unshift(e),e=e.parent;return t}getNamPath(){let t=this.getParents(),e="";for(let i=0;i<t.length;i++)e+=0==i?t[i].name:"."+t[i].name;return e+=""==e?this.name:"."+this.name,this.name}getElementBounds(){return this._controlElement.getBoundingClientRect()}bringToFront(){this.controlElement.style.zIndex=CSystem.getZPlus()+""}sendToBack(){this.controlElement.style.zIndex=CSystem.getZMinus()+""}addProperties(){let t=super.addProperties();return t.push({instance:this.focusedAnimationTrigger,propertyName:"focusedAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.enabledAnimationTrigger,propertyName:"enabledAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.visibleAnimationTrigger,propertyName:"visibleAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.resourceAnimationTrigger,propertyName:"resourceAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.selectAnimationTrigger,propertyName:"selectAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.checkAnimationTrigger,propertyName:"checkAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.removeAnimationTrigger,propertyName:"removeAnimationTrigger",readOnly:!1,enum:[]}),t}static createControl(t,e="",i=0,s=0,a=50,o=50){let n=new CControl(t,e);return n.position.left=i,n.position.top=s,n.position.width=a,n.position.height=o,n}static getControl(t,e=""){let i,s=new Array;i=""==e?CSystem.controls.findControls([{columnName:"name",value:t}]):CSystem.controls.findControls([{columnName:"name",value:t},{columnName:"className",value:e}]);for(let t=0;t<i.length;t++)s.push(i[t].control);return s}static controlFromResource(t,e){let i=CSystem.resources.get(t);if(null!=i&&null!=i.className){let s=new Function("return new "+i.className+"()")();return s.resource=t,s.parent=e,s}}static controlFromData(t,e){if(null!=t.className){let i=new Function("return new "+t.className+"()")();return i.fromData(t),i.parent=e,i}}}class CLayout extends CControl{constructor(t,e){super(t,e),this.hasPointerEvent=!1}doResource(){super.doResource(),this.hasPointerEvent=!1}}!function(t){t[t.NONE=0]="NONE",t[t.MOVE=1]="MOVE",t[t.RESIZE_LT=2]="RESIZE_LT",t[t.RESIZE_T=3]="RESIZE_T",t[t.RESIZE_RT=4]="RESIZE_RT",t[t.RESIZE_L=5]="RESIZE_L",t[t.RESIZE_R=6]="RESIZE_R",t[t.RESIZE_LB=7]="RESIZE_LB",t[t.RESIZE_B=8]="RESIZE_B",t[t.RESIZE_RB=9]="RESIZE_RB"}(EControlMoveKind||(EControlMoveKind={}));class CPointerEventControl extends CControl{static get CON_CHANGE_THIS_PRESSED_POINTS(){return"changeThisPressedPoints"}static get CON_CHANGE_BUBBLE_PRESSED_POINTS(){return"changeButtlePressedPoints"}static get CON_STOP_PROPAGATION_POINTER_DOWN(){return"stopPropagationPointerDown"}static get CON_STOP_PROPAGATION_POINTER_MOVE(){return"stopPropagationPointerMove"}static get CON_STOP_PROPAGATION_POINTER_UP(){return"stopPropagationPointerUp"}static get CON_STOP_PROPAGATION_POINTER_CANCEL(){return"stopPropagationPointerCancel"}static get CON_CHANGE_DRAG_ICON(){return"changeDragIcon"}static get CON_CHANGE_DRAG_CATCH_ICON(){return"changeDragCatchIcon"}static get CON_CHANGE_USE_HINT(){return"changeUseHint"}static get CON_CHANGE_HINT(){return"changeHint"}static get CON_CHANGE_HINT_RESOURCE(){return"changeHint"}static get CON_CHANGE_USE_MOVE(){return"changeUseMove"}static get CON_CHANGE_USE_RESIZE(){return"changeUseResize"}static get CON_CHANGE_MOVE_AREA_LENGTH(){return"changeMoveAreaLength"}static get CON_CHANGE_RESIZE_AREA_LENGTH(){return"changeResizeAreaLength"}static get CON_CHANGE_USE_POINTER_CAPTURE(){return"changeUsePointerCapture"}get magneticLength(){return this._magneticLength}set magneticLength(t){this._magneticLength=t}get moveKind(){return this.__moveKind}get thisPointerDownAnimatorResource(){return this._thisPointerDownAnimatorResource}set thisPointerDownAnimatorResource(t){this._thisPointerDownAnimatorResource=t,""!=t&&(this.thisPointerDownAnimationTrigger=CAnimator.animatorFromResource(this,t))}get thisPointerUpAnimatorResource(){return this._thisPointerUpAnimatorResource}set thisPointerUpAnimatorResource(t){this._thisPointerUpAnimatorResource=t,""!=t&&(this.thisPointerUpAnimationTrigger=CAnimator.animatorFromResource(this,t))}get overAnimatorResource(){return this._overAnimatorResource}set overAnimatorResource(t){this._overAnimatorResource=t,""!=t&&(this.overAnimationTrigger=CAnimator.animatorFromResource(this,t))}get enterAnimatorResource(){return this._enterAnimatorResource}set enterAnimatorResource(t){this._enterAnimatorResource=t,""!=t&&(this.enterAnimationTrigger=CAnimator.animatorFromResource(this,t))}get clickAnimatorResource(){return this._clickAnimatorResource}set clickAnimatorResource(t){this._clickAnimatorResource=t,""!=t&&(this.clickAnimationTrigger=CAnimator.animatorFromResource(this,t))}get doubleClickAnimatorResource(){return this._doubleClickAnimatorResource}set doubleClickAnimatorResource(t){this._doubleClickAnimatorResource=t,""!=t&&(this.doubleClickAnimationTrigger=CAnimator.animatorFromResource(this,t))}get dragStartAnimatorResource(){return this._dragStartAnimatorResource}set dragStartAnimatorResource(t){this._dragStartAnimatorResource=t,""!=t&&(this.dragStartAnimationTrigger=CAnimator.animatorFromResource(this,t))}get dragCancelAnimatorResource(){return this._dragCancelAnimatorResource}set dragCancelAnimatorResource(t){this._dragCancelAnimatorResource=t,""!=t&&(this.dragCancelAnimationTrigger=CAnimator.animatorFromResource(this,t))}get dragCatchAnimatorResource(){return this._dragCatchAnimatorResource}set dragCatchAnimatorResource(t){this._dragCatchAnimatorResource=t,""!=t&&(this.dragCatchAnimationTrigger=CAnimator.animatorFromResource(this,t))}get keyDownAnimatorResource(){return this._keyDownAnimatorResource}set keyDownAnimatorResource(t){this._keyDownAnimatorResource=t,""!=t&&(this.keyDownAnimationTrigger=CAnimator.animatorFromResource(this,t))}get pressedThisPoints(){return this.__pressedThisPoints}get pressedBubblePoints(){return this.__pressedBubblePoints}get repeatClickTime(){return this._repeatClickTime}set repeatClickTime(t){this._repeatClickTime=t}get isEnter(){return this._isEnter}get isOver(){return this._isOver}get isDrag(){return CSystem.dragControls.has(this)}get isPress(){return this.__pressedThisPoints.length>0}get dragCatchControlNames(){return this._dragCatchControlNames}get dragCatchControlPropertyNames(){return this._dragCatchControlPropertyNames}get useDragAndDrop(){return this._useDragAndDrop}set useDragAndDrop(t){this._useDragAndDrop!=t&&(this._useDragAndDrop=t,this.doChange(CControl.CON_CHANGE_USE_DRAG))}get useDragAndDropCancel(){return this._useDragAndDropCancel}set useDragAndDropCancel(t){this._useDragAndDropCancel!=t&&(this._useDragAndDropCancel=t,this.doChange("useDragAndDropCancel"))}get dragIconResource(){return this._dragIconResource}set dragIconResource(t){this._dragIconResource!=t&&(this._dragIconResource=t,this.doChange(CPointerEventControl.CON_CHANGE_DRAG_ICON))}get hintResource(){return this._hintResource}set hintResource(t){this._hintResource!=t&&(this._hintResource=t,this.doChange(CPointerEventControl.CON_CHANGE_HINT_RESOURCE))}get hint(){return this._hint}set hint(t){this._hint!=t&&(this._hint=t,this.doChange(CPointerEventControl.CON_CHANGE_HINT))}get useHint(){return this._useHint}set useHint(t){this._useHint!=t&&(this._useHint=t,this.doChange(CPointerEventControl.CON_CHANGE_USE_HINT))}get hintPosition(){return this._hintPosition}set hintPosition(t){this._hintPosition=t}get hintFixOffset(){return this._hintFixOffset}get useMove(){return this._useMove}set useMove(t){this._useMove!=t&&(this._useMove=t,this.doChange(CPointerEventControl.CON_CHANGE_USE_MOVE))}get useResize(){return this._useResize}set useResize(t){this._useResize!=t&&(this._useResize=t,this.doChange(CPointerEventControl.CON_CHANGE_USE_RESIZE))}get moveAreaLength(){return this._moveAreaLength}set moveAreaLength(t){this._moveAreaLength!=t&&(this._moveAreaLength=t,this.doChange(CPointerEventControl.CON_CHANGE_MOVE_AREA_LENGTH))}get resizeAreaLength(){return this._resizeAreaLength}set resizeAreaLength(t){this._resizeAreaLength!=t&&(this._resizeAreaLength=t,this.doChange(CPointerEventControl.CON_CHANGE_RESIZE_AREA_LENGTH))}get ignoreResizeKind(){return this._ignoreResizeKind}get usePointerCapture(){return this._usePointerCapture}set usePointerCapture(t){this._usePointerCapture!=t&&(this._usePointerCapture=t,this.doChange(CPointerEventControl.CON_CHANGE_USE_POINTER_CAPTURE))}get useFingerCursor(){return this._useFingerCursor}set useFingerCursor(t){this._useFingerCursor!=t&&(this._useFingerCursor=t)}get fingerCursorLength(){return this._fingerCursorLength}set fingerCursorLength(t){this._fingerCursorLength!=t&&(this._fingerCursorLength=t)}get fingerCursorResource(){return this._fingerCursorResource}set fingerCursorResource(t){this._fingerCursorResource!=t&&(this._fingerCursorResource=t)}constructor(t,e){super(t,e),this.__pressedThisPoints=new CList,this.__pressedBubblePoints=new CList,this.__thisDownPoint=new CPoint(0,0),this.__preMovePoint=new CPoint(0,0),this.__downMovePoint=new CPoint(0,0),this.__pressedThisDown=!1,this.__preClick={time:CTime.now,count:0},this.__maxCount=0,this.__moveKind=EControlMoveKind.NONE,this.__moveResizeDown={offsetx:0,offsety:0,pagex:0,pagey:0,left:0,top:0,width:0,height:0},this._isEnter=!1,this._isOver=!1,this._repeatClickTime=300,this._usePointerCapture=!1,this._useDragAndDrop=!1,this._useDragAndDropCancel=!1,this._dragCatchControlNames=new CStringSet,this._dragCatchControlPropertyNames=new CStringSet,this._dragIconResource="",this._hintResource="",this._hint="",this._useHint=!1,this._hintPosition="auto",this._hintFixOffset=new CPoint(0,0),this._useMove=!1,this.lockMoveX=!1,this.lockMoveY=!1,this.magneticPoints=new Array,this._magneticLength=0,this._useResize=!1,this._moveAreaLength=-1,this._resizeAreaLength=5,this._ignoreResizeKind=new Set,this.resizeMinWidth=50,this.resizeMinHeight=50,this._useFingerCursor=!1,this._fingerCursorLength=30,this._fingerCursors=new Array,this._fingerCursorResource="",this._thisPointerDownAnimatorResource="",this._thisPointerUpAnimatorResource="",this._overAnimatorResource="",this._enterAnimatorResource="",this._clickAnimatorResource="",this._doubleClickAnimatorResource="",this._dragStartAnimatorResource="",this._dragCancelAnimatorResource="",this._dragCatchAnimatorResource="",this._keyDownAnimatorResource="",this.useMoveClick=!1;let i=this;this._stopPropagation.onChange=function(){i.doChange(CControl.CON_CHANGE_STOP_PROPAGATION)},this._controlElement.addEventListener("keydown",function(t){i.enabled&&i.doKeyDown(t),i._stopPropagation.keyboard&&t.stopPropagation()}),this._controlElement.addEventListener("keypress",function(t){i.enabled&&i.doKeyPress(t),i._stopPropagation.keyboard&&t.stopPropagation()}),this._controlElement.addEventListener("keyup",function(t){i.enabled&&i.doKeyUp(t),i._stopPropagation.keyboard&&t.stopPropagation()}),this._controlElement.addEventListener("pointerdown",function(t){i.enabled&&(i.doPointerDown(t),i._stopPropagation.down&&t.stopPropagation())}),this._controlElement.addEventListener("pointermove",function(t){i.enabled&&(i.doPointerMove(t),i._stopPropagation.move&&t.stopPropagation())}),this._controlElement.addEventListener("pointerup",function(t){i.enabled&&(i.doPointerUp(t),i._stopPropagation.up&&t.stopPropagation())}),this._controlElement.addEventListener("pointercancel",function(t){i.enabled&&(i.doPointerCancel(t),i._stopPropagation.cancel&&t.stopPropagation())}),this._controlElement.addEventListener("pointerover",function(t){i.enabled&&(i._isOver=!0,i.doPointerOver(t),i._stopPropagation.over&&t.stopPropagation())}),this._controlElement.addEventListener("pointerout",function(t){i.enabled&&(i._isOver=!1,i.doPointerOut(t),i._stopPropagation.out&&t.stopPropagation())}),this._controlElement.addEventListener("pointerenter",function(t){i.enabled&&(i._isEnter=!0,i.doPointerEnter(t),i._stopPropagation.enter&&t.stopPropagation())}),this._controlElement.addEventListener("pointerleave",function(t){i.enabled&&(i._isEnter=!1,i.doPointerLeave(t),i._stopPropagation.leave&&t.stopPropagation())}),this._controlElement.addEventListener("wheel",function(t){i.enabled&&i.doWheel(t),i._stopPropagation.wheel&&t.stopPropagation()}),this.__pressedThisPoints.onChange=function(){i.enabled&&i.doChangeThisPressedPoints()},this.__pressedBubblePoints.onChange=function(){i.enabled&&i.doChangeBubblePressedPoints()}}doToData(t){super.doToData(t),CDataClass.putData(t,"repeatClickTime",this.repeatClickTime,300),CDataClass.putData(t,"useDragAndDrop",this.useDragAndDrop,!1),CDataClass.putData(t,"useDragAndDropCancel",this.useDragAndDropCancel,!1),CDataClass.putData(t,"dragCatchControlNames",this.dragCatchControlNames.toData(),[],!0),CDataClass.putData(t,"dragCatchControlPropertyNames",this.dragCatchControlPropertyNames.toData(),[],!0),CDataClass.putData(t,"dragIconResource",this.dragIconResource,""),CDataClass.putData(t,"hintResource",this.hintResource,""),CDataClass.putData(t,"hint",this.hint,""),CDataClass.putData(t,"useHint",this.useHint,!1),CDataClass.putData(t,"hintPosition",this.hintPosition,"auto"),CDataClass.putData(t,"hintFixOffset",this.hintFixOffset.toData(),{},!0),CDataClass.putData(t,"usePointerCapture",this.usePointerCapture,!1),CDataClass.putData(t,"useMove",this.useMove,!1),CDataClass.putData(t,"useResize",this.useResize,!1),CDataClass.putData(t,"moveAreaLength",this.moveAreaLength,-1),CDataClass.putData(t,"resizeAreaLength",this.resizeAreaLength,5),CDataClass.putData(t,"resizeMinWidth",this.resizeMinWidth,50),CDataClass.putData(t,"resizeMinHeight",this.resizeMinHeight,50),CDataClass.putData(t,"lockMoveX",this.lockMoveX,!1),CDataClass.putData(t,"lockMoveY",this.lockMoveY,!1),CDataClass.putData(t,"lockMaxX",this.lockMaxX,void 0),CDataClass.putData(t,"lockMinX",this.lockMinX,void 0),CDataClass.putData(t,"lockMaxY",this.lockMaxY,void 0),CDataClass.putData(t,"lockMinY",this.lockMinY,void 0),CDataClass.putData(t,"thisPointerDownAnimatorResource",this.thisPointerDownAnimatorResource,""),CDataClass.putData(t,"thisPointerUpAnimatorResource",this.thisPointerUpAnimatorResource,""),CDataClass.putData(t,"overAnimatorResource",this.overAnimatorResource,""),CDataClass.putData(t,"enterAnimatorResource",this.enterAnimatorResource,""),CDataClass.putData(t,"clickAnimatorResource",this.clickAnimatorResource,""),CDataClass.putData(t,"doubleClickAnimatorResource",this.doubleClickAnimatorResource,""),CDataClass.putData(t,"dragStartAnimatorResource",this.dragStartAnimatorResource,""),CDataClass.putData(t,"dragCancelAnimatorResource",this.dragCancelAnimatorResource,""),CDataClass.putData(t,"dragCatchAnimatorResource",this.dragCatchAnimatorResource,""),CDataClass.putData(t,"keyDownAnimatorResource",this.keyDownAnimatorResource,""),CDataClass.putData(t,"useMoveClick",this.useMoveClick,!1),null!=this.thisPointerDownAnimationTrigger&&CDataClass.putData(t,"thisPointerDownAnimationTrigger",this.thisPointerDownAnimationTrigger.toData(),{},!0),null!=this.thisPointerUpAnimationTrigger&&CDataClass.putData(t,"thisPointerUpAnimationTrigger",this.thisPointerUpAnimationTrigger.toData(),{},!0),null!=this.overAnimationTrigger&&CDataClass.putData(t,"overAnimationTrigger",this.overAnimationTrigger.toData(),{},!0),null!=this.enterAnimationTrigger&&CDataClass.putData(t,"enterAnimationTrigger",this.enterAnimationTrigger.toData(),{},!0),null!=this.clickAnimationTrigger&&CDataClass.putData(t,"clickAnimationTrigger",this.clickAnimationTrigger.toData(),{},!0),null!=this.doubleClickAnimationTrigger&&CDataClass.putData(t,"doubleClickAnimationTrigger",this.doubleClickAnimationTrigger.toData(),{},!0),null!=this.dragStartAnimationTrigger&&CDataClass.putData(t,"dragStartAnimationTrigger",this.dragStartAnimationTrigger.toData(),{},!0),null!=this.dragCancelAnimationTrigger&&CDataClass.putData(t,"dragCancelAnimationTrigger",this.dragCancelAnimationTrigger.toData(),{},!0),null!=this.dragCatchAnimationTrigger&&CDataClass.putData(t,"dragCatchAnimationTrigger",this.dragCatchAnimationTrigger.toData(),{},!0),null!=this.keyDownAnimationTrigger&&CDataClass.putData(t,"keyDownAnimationTrigger",this.keyDownAnimationTrigger.toData(),{},!0)}doFromData(t){super.doFromData(t),this.repeatClickTime=CDataClass.getData(t,"repeatClickTime",300),this.useDragAndDrop=CDataClass.getData(t,"useDragAndDrop",!1),this.useDragAndDropCancel=CDataClass.getData(t,"useDragAndDropCancel",!1),this.dragCatchControlNames.fromData(CDataClass.getData(t,"dragCatchControlNames",[],!0)),this.dragCatchControlPropertyNames.fromData(CDataClass.getData(t,"dragCatchControlPropertyNames",[],!0)),this.dragIconResource=CDataClass.getData(t,"dragIconResource",""),this.hintResource=CDataClass.getData(t,"hintResource",""),this.hint=CDataClass.getData(t,"hint",""),this.useHint=CDataClass.getData(t,"useHint",!1),this.hintPosition=CDataClass.getData(t,"hintPosition","auto"),this.hintFixOffset.fromData(CDataClass.getData(t,"hintFixOffset",{},!0)),this.usePointerCapture=CDataClass.getData(t,"usePointerCapture",!1),this.useMove=CDataClass.getData(t,"useMove",!1),this.useResize=CDataClass.getData(t,"useResize",!1),this.moveAreaLength=CDataClass.getData(t,"moveAreaLength",-1),this.resizeAreaLength=CDataClass.getData(t,"resizeAreaLength",5),this.resizeMinWidth=CDataClass.getData(t,"resizeMinWidth",50),this.resizeMinHeight=CDataClass.getData(t,"resizeMinHeight",50),this.lockMoveX=CDataClass.getData(t,"lockMoveX",!1),this.lockMoveY=CDataClass.getData(t,"lockMoveY",!1),this.lockMaxX=CDataClass.getData(t,"lockMaxX",void 0),this.lockMinX=CDataClass.getData(t,"lockMinX",void 0),this.lockMaxY=CDataClass.getData(t,"lockMaxY",void 0),this.lockMinY=CDataClass.getData(t,"lockMinY",void 0),this.useMoveClick=CDataClass.getData(t,"useMoveClick",!1),CAnimator.fromAnimatorData(t,this,"thisPointerDownAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"thisPointerUpAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"overAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"enterAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"clickAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"doubleClickAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"dragStartAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"dragCancelAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"dragCatchAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"keyDownAnimationTrigger"),this.thisPointerDownAnimatorResource=CDataClass.getData(t,"thisPointerDownAnimatorResource",""),this.thisPointerUpAnimatorResource=CDataClass.getData(t,"thisPointerUpAnimatorResource",""),this.overAnimatorResource=CDataClass.getData(t,"overAnimatorResource",""),this.enterAnimatorResource=CDataClass.getData(t,"enterAnimatorResource",""),this.clickAnimatorResource=CDataClass.getData(t,"clickAnimatorResource",""),this.doubleClickAnimatorResource=CDataClass.getData(t,"doubleClickAnimatorResource",""),this.dragStartAnimatorResource=CDataClass.getData(t,"dragStartAnimatorResource",""),this.dragCancelAnimatorResource=CDataClass.getData(t,"dragCancelAnimatorResource",""),this.dragCatchAnimatorResource=CDataClass.getData(t,"dragCatchAnimatorResource",""),this.keyDownAnimatorResource=CDataClass.getData(t,"keyDownAnimatorResource","")}doRemove(){null!=this.thisPointerDownAnimationTrigger&&this.thisPointerDownAnimationTrigger.remove(),this.thisPointerDownAnimationTrigger=void 0,null!=this.thisPointerUpAnimationTrigger&&this.thisPointerUpAnimationTrigger.remove(),this.thisPointerUpAnimationTrigger=void 0,null!=this.overAnimationTrigger&&this.overAnimationTrigger.remove(),this.overAnimationTrigger=void 0,null!=this.enterAnimationTrigger&&this.enterAnimationTrigger.remove(),this.enterAnimationTrigger=void 0,null!=this.clickAnimationTrigger&&this.clickAnimationTrigger.remove(),this.clickAnimationTrigger=void 0,null!=this.doubleClickAnimationTrigger&&this.doubleClickAnimationTrigger.remove(),this.doubleClickAnimationTrigger=void 0,null!=this.dragStartAnimationTrigger&&this.dragStartAnimationTrigger.remove(),this.dragStartAnimationTrigger=void 0,null!=this.dragCatchAnimationTrigger&&this.dragCatchAnimationTrigger.remove(),this.dragCatchAnimationTrigger=void 0,null!=this.keyDownAnimationTrigger&&this.keyDownAnimationTrigger.remove(),this.keyDownAnimationTrigger=void 0,super.doRemove()}doChange(t,e){super.doChange(t,e),t==CPointerEventControl.CON_CHANGE_THIS_PRESSED_POINTS&&this.doChangeThisPressedPoints(),t==CPointerEventControl.CON_CHANGE_BUBBLE_PRESSED_POINTS&&this.doChangeBubblePressedPoints(),t==CPointerEventControl.CON_CHANGE_USE_POINTER_CAPTURE&&this.doSetTouchAction(),t==CPointerEventControl.CON_CHANGE_USE_MOVE&&this.doSetTouchAction(),t==CPointerEventControl.CON_CHANGE_USE_RESIZE&&this.doSetTouchAction(),t==CPointerEventControl.CON_CHANGE_USE_DRAG&&this.doSetTouchAction()}doSetTouchAction(){this._usePointerCapture||this._useDragAndDrop||this._useMove||this._useResize?this.controlElement.style.touchAction="none":this.controlElement.style.touchAction="auto"}doChangeThisPressedPoints(){null!=this.onThisPressedPointsChange&&this.onThisPressedPointsChange(this,this.pressedThisPoints)}doChangeBubblePressedPoints(){null!=this.onBubblePressedPointsChange&&this.onBubblePressedPointsChange(this,this.pressedBubblePoints)}doKeyDown(t){this.keyDownAnimationTrigger instanceof CAnimator&&this.keyDownAnimationTrigger.start(),this.keyDownAnimationTrigger instanceof CGraphAnimationInfo&&this.keyDownAnimationTrigger.startAnimation(),null!=this.onKeyDown&&this.onKeyDown(this,t)}doKeyPress(t){null!=this.onKeyPress&&this.onKeyPress(this,t)}doKeyUp(t){null!=this.onKeyUp&&this.onKeyUp(this,t)}doPointerDown(t){if(t.target==this.controlElement)this.__pressedThisPoints.add({downTime:(new Date).getTime(),point:t}),this.isMove(t)&&this.bringToFront(),"none"==this.controlElement.style.touchAction&&this.controlElement.setPointerCapture(t.pointerId),this.doThisPointerDown(t,this.__pressedThisPoints);else{let e=CSystem.getControl(t.target);null!=e&&(this.__pressedBubblePoints.add({downTime:(new Date).getTime(),target:e,point:t}),this.doBubblePointerDown(e,t,this.__pressedBubblePoints))}null!=this.onPointerDown&&this.onPointerDown(this,t)}doPointerMove(t){if(t.target==this._controlElement)this.doThisPointerMove(t,this.__pressedThisPoints);else{let e=CSystem.getControl(t.target);null!=e&&this.doBubblePointerMove(e,t,this.__pressedBubblePoints)}null!=this.onPointerMove&&this.onPointerMove(this,t)}doPointerUp(t){if(t.target==this.controlElement){for(let e=this.__pressedThisPoints.length-1;e>=0;e--)this.__pressedThisPoints.get(e).point.pointerId==t.pointerId&&this.__pressedThisPoints.delete(e);"none"==this.controlElement.style.touchAction&&this._controlElement.releasePointerCapture(t.pointerId),this.doThisPointerUp(t,this.__pressedThisPoints)}else{for(let e=this.__pressedBubblePoints.length-1;e>=0;e--)this.__pressedBubblePoints.get(e).point.pointerId==t.pointerId&&this.__pressedBubblePoints.delete(e);let e=CSystem.getControl(t.target);null!=e&&this.doBubblePointerUp(e,t,this.__pressedBubblePoints)}this.__moveKind=EControlMoveKind.NONE,null!=this.onPointerUp&&this.onPointerUp(this,t)}doPointerCancel(t){if(t.target==this._controlElement){for(let e=this.__pressedThisPoints.length-1;e>=0;e--)this.__pressedThisPoints.get(e).point.pointerId==t.pointerId&&this.__pressedThisPoints.delete(e);this.doThisPointerCancel(t,this.__pressedThisPoints)}else{for(let e=this.__pressedBubblePoints.length-1;e>=0;e--)this.__pressedBubblePoints.get(e).point.pointerId==t.pointerId&&this.__pressedBubblePoints.delete(e);let e=CSystem.getControl(t.target);null!=e&&this.doBubblePointerCancel(e,t,this.__pressedBubblePoints)}this.__moveKind=EControlMoveKind.NONE,null!=this.onPointerCancel&&this.onPointerCancel(this,t)}doPointerEnter(t){if(this._isEnter=!0,null!=this.enterAnimationTrigger&&this.triggerTrue(this.enterAnimationTrigger),t.target==this.controlElement)this.doThisPointerEnter(t,this.__pressedThisPoints);else{let e=CSystem.getControl(t.target);null!=e&&this.doBubblePointerEnter(e,t,this.__pressedBubblePoints)}null!=this.onPointerEnter&&this.onPointerEnter(this,t)}doPointerLeave(t){if(this._isEnter=!1,null!=this.enterAnimationTrigger&&this.triggerFalse(this.enterAnimationTrigger),t.target==this.controlElement){if(!this.usePointerCapture)for(let e=this.__pressedThisPoints.length-1;e>=0;e--)this.__pressedThisPoints.get(e).point.pointerId==t.pointerId&&this.__pressedThisPoints.delete(e);this.doThisPointerLeave(t,this.__pressedThisPoints)}else{if(!this.usePointerCapture)for(let e=this.__pressedBubblePoints.length-1;e>=0;e--)this.__pressedBubblePoints.get(e).point.pointerId==t.pointerId&&this.__pressedBubblePoints.delete(e);let e=CSystem.getControl(t.target);null!=e&&this.doBubblePointerLeave(e,t,this.__pressedBubblePoints)}null!=this.onPointerLeave&&this.onPointerLeave(this,t)}doPointerOver(t){if(this._isOver=!0,null!=this.overAnimationTrigger&&this.triggerTrue(this.overAnimationTrigger),t.target==this.controlElement)this.doThisPointerOver(t,this.__pressedThisPoints);else{let e=CSystem.getControl(t.target);null!=e&&this.doBubblePointerOver(e,t,this.__pressedBubblePoints)}null!=this.onPointerOver&&this.onPointerOver(this,t)}doPointerOut(t){if(this._isOver=!1,null!=this.overAnimationTrigger&&this.triggerFalse(this.overAnimationTrigger),t.target==this.controlElement){if(!this.usePointerCapture)for(let e=this.__pressedThisPoints.length-1;e>=0;e--)this.__pressedThisPoints.get(e).point.pointerId==t.pointerId&&this.__pressedThisPoints.delete(e);this.doThisPointerOut(t,this.__pressedThisPoints)}else{if(!this.usePointerCapture)for(let e=this.__pressedBubblePoints.length-1;e>=0;e--)this.__pressedBubblePoints.get(e).point.pointerId==t.pointerId&&this.__pressedBubblePoints.delete(e);let e=CSystem.getControl(t.target);null!=e&&this.doBubblePointerOut(e,t,this.__pressedBubblePoints)}null!=this.onPointerOut&&this.onPointerOut(this,t)}doWheel(t){if(t.target==this.controlElement)this.doThisWheel(t);else{let e=CSystem.getControl(t.target);null!=e&&this.doBubbleWheel(e,t)}null!=this.onWheel&&this.onWheel(this,t)}isResize(t){return this.useResize?t.offsetX<=this.resizeAreaLength&&t.offsetY<=this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_LT)?{result:!0,kind:EControlMoveKind.RESIZE_LT}:t.offsetX>this.position.width-this.resizeAreaLength&&t.offsetY<=this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_RT)?{result:!0,kind:EControlMoveKind.RESIZE_RT}:t.offsetX<=this.resizeAreaLength&&t.offsetY>this.position.height-this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_LB)?{result:!0,kind:EControlMoveKind.RESIZE_LB}:t.offsetX>this.position.width-this.resizeAreaLength&&t.offsetY>this.position.height-this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_RB)?{result:!0,kind:EControlMoveKind.RESIZE_RB}:t.offsetX<=this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_L)?{result:!0,kind:EControlMoveKind.RESIZE_L}:t.offsetY<=this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_T)?{result:!0,kind:EControlMoveKind.RESIZE_T}:t.offsetX>this.position.width-this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_R)?{result:!0,kind:EControlMoveKind.RESIZE_R}:t.offsetY>this.position.height-this.resizeAreaLength&&!this._ignoreResizeKind.has(EControlMoveKind.RESIZE_B)?{result:!0,kind:EControlMoveKind.RESIZE_B}:{result:!1,kind:EControlMoveKind.NONE}:{result:!1,kind:EControlMoveKind.NONE}}isMove(t){return!!this.useMove&&(this.useResize?this.moveAreaLength>=0?t.offsetX>this.resizeAreaLength&&t.offsetX<=this.position.width-this.resizeAreaLength&&t.offsetY>this.resizeAreaLength&&t.offsetY<=this.resizeAreaLength+this.moveAreaLength:t.offsetX>this.resizeAreaLength&&t.offsetX<=this.position.width-this.resizeAreaLength&&t.offsetY>this.resizeAreaLength&&t.offsetY<=this.position.height-this.resizeAreaLength:!(this.moveAreaLength>=0)||this.moveAreaLength>=t.offsetY&&this.position.align==EPositionAlign.NONE)}setDown(t){this.__moveResizeDown.offsetx=t.offsetX,this.__moveResizeDown.offsety=t.offsetY,this.__moveResizeDown.pagex=t.pageX,this.__moveResizeDown.pagey=t.pageY,this.__moveResizeDown.left=this.position.left,this.__moveResizeDown.top=this.position.top,this.__moveResizeDown.width=this.position.width,this.__moveResizeDown.height=this.position.height}doThisPointerDown(t,e){null!=this.thisPointerDownAnimationTrigger&&this.thisPointerDownAnimationTrigger.start(),this.pressedThisPoints.length>this.__maxCount&&(this.__maxCount=this.pressedThisPoints.length),this.__pressedThisDown=!0,this.__thisDownPoint=new CPoint(t.offsetX,t.offsetY);let i=this.isResize(t);i.result?(this.__moveKind=i.kind,this.setDown(t)):this.isMove(t)?(this.__moveKind=EControlMoveKind.MOVE,this.setDown(t),this.__preMovePoint=new CPoint(this.position.left,this.position.top),this.__downMovePoint=new CPoint(this.position.left,this.position.top)):(this.__moveKind=EControlMoveKind.NONE,this.setDown(t)),null!=this.onThisPointerDown&&this.onThisPointerDown(this,t,e)}doThisPointerMove(t,e){if(null!=this.thisPointerUpAnimationTrigger&&this.thisPointerUpAnimationTrigger.start(),this.__moveKind==EControlMoveKind.MOVE&&(this.doMove(t),this.__preMovePoint=new CPoint(this.position.left,this.position.top)),this.__moveKind!=EControlMoveKind.RESIZE_L&&this.__moveKind!=EControlMoveKind.RESIZE_T&&this.__moveKind!=EControlMoveKind.RESIZE_R&&this.__moveKind!=EControlMoveKind.RESIZE_B&&this.__moveKind!=EControlMoveKind.RESIZE_LT&&this.__moveKind!=EControlMoveKind.RESIZE_LB&&this.__moveKind!=EControlMoveKind.RESIZE_RT&&this.__moveKind!=EControlMoveKind.RESIZE_RB||this.doResize(t,t.pageX,t.pageY,this.__moveKind),this.useDragAndDrop&&!CSystem.dragControls.has(this)&&this.__pressedThisDown&&CPoint.getDistancePoints(this.__thisDownPoint,new CPoint(t.offsetX,t.offsetY))>5&&(CSystem.dragControls.add(this),this.__dragId=t.pointerId,this.doDragStart(t)),CSystem.dragControls.has(this)&&this.__dragId==t.pointerId&&this.__pressedThisDown){let i=CSystem.getOverControls(t,e),s=new Array;for(let t=0;t<i.length;t++)if(this!=i[t].control&&i[t].control instanceof CPointerEventControl){let e=i[t].control;(this.dragCatchControlNames.has(e.name)||this.dragCatchControlPropertyNames.has(e.propertyName))&&s.push(e)}this.doDragging(s,t)}this.useHint&&null!=this.__hint&&this.doMoveHint(t),null!=this.onThisPointerMove&&this.onThisPointerMove(this,t,e)}doThisPointerUp(t,e){if(this.useDragAndDrop&&0==e.length&&CSystem.dragControls.has(this)){CSystem.dragControls.delete(this);let i=CSystem.getOverControls(t,e),s=new Array;for(let t=0;t<i.length;t++)if(this!=i[t].control&&i[t].control instanceof CPointerEventControl){let e=i[t].control;(this.dragCatchControlNames.has(e.name)||this.dragCatchControlPropertyNames.has(e.propertyName))&&(s.push(e),e.doDropCatch(this,i[t].x,i[t].y,this.dragData))}this.useDragAndDropCancel&&0==s.length?this.doDragCancel():this.doDrop(s,t),this.__dragId=void 0}let i=this.useMoveClick&&this.__moveKind==EControlMoveKind.MOVE&&Math.abs(this.__downMovePoint.x-this.position.left)<5&&Math.abs(this.__downMovePoint.y-this.position.top)<5;(this.__moveKind==EControlMoveKind.NONE||i)&&(t.offsetX<=this.position.width&&t.offsetX>=0&&t.offsetY<=this.position.height&&t.offsetY>=0&&this.__pressedThisDown&&("mouse"==t.pointerType?0==t.button&&this.doClick(t):this.doClick(t)),0==this.__pressedThisPoints.length&&this.__maxCount>1&&(this.doMultiTouchClick(this.__maxCount),this.__maxCount=0),null!=this.onThisPointerUp&&this.onThisPointerUp(this,t,e)),this.__pressedThisDown=!1}doThisPointerCancel(t,e){0==this.__pressedThisPoints.length&&this.__maxCount>1&&(this.doMultiTouchClick(this.__maxCount),this.__maxCount=0),null!=this.onThisPointerCancel&&this.onThisPointerCancel(this,t,e)}doThisPointerEnter(t,e){null!=this.onThisPointerEnter&&this.onThisPointerEnter(this,t,e)}doThisPointerLeave(t,e){null!=this.onThisPointerLeave&&this.onThisPointerLeave(this,t,e)}doThisPointerOver(t,e){this.useHint&&"mouse"==t.pointerType&&this.doShowHint(),null!=this.onThisPointerOver&&this.onThisPointerOver(this,t,e)}doThisPointerOut(t,e){this.useHint&&"mouse"==t.pointerType&&this.doHideHint(),null!=this.onThisPointerOut&&this.onThisPointerOut(this,t,e)}doThisWheel(t){null!=this.onThisWheel&&this.onThisWheel(this,t)}doBubblePointerDown(t,e,i){null!=this.onBubblePointerDown&&this.onBubblePointerDown(this,t,e,i)}doBubblePointerMove(t,e,i){null!=this.onBubblePointerMove&&this.onBubblePointerMove(this,t,e,i)}doBubblePointerUp(t,e,i){e.offsetX<=t.position.width&&e.offsetY<=t.position.height&&e.offsetX>=0&&e.offsetY>=0&&this.doBubbleClick(e),null!=this.onBubblePointerUp&&this.onBubblePointerUp(this,t,e,i)}doBubblePointerCancel(t,e,i){null!=this.onBubblePointerCancel&&this.onBubblePointerCancel(this,t,e,i)}doBubblePointerEnter(t,e,i){null!=this.onBubblePointerEnter&&this.onBubblePointerEnter(this,t,e,i)}doBubblePointerLeave(t,e,i){null!=this.onBubblePointerLeave&&this.onBubblePointerLeave(this,t,e,i)}doBubblePointerOver(t,e,i){null!=this.onBubblePointerOver&&this.onBubblePointerOver(this,t,e,i)}doBubblePointerOut(t,e,i){null!=this.onBubblePointerOut&&this.onBubblePointerOut(this,t,e,i)}doBubbleWheel(t,e){null!=this.onBubbleWheel&&this.onBubbleWheel(this,t,e)}doClick(t){null!=this.clickAnimationTrigger&&this.clickAnimationTrigger.start();let e=CTime.now;e-this.__preClick.time<this._repeatClickTime?this.__preClick.count++:this.__preClick.count=1,this.__preClick.time=e,null!=this.onClick&&this.onClick(this,t),this.__preClick.count>1&&this.doRepeatClick(this.__preClick.count,t)}doBubbleClick(t){null!=this.onBubbleClick&&this.onBubbleClick(this,t)}doDoubleClick(t){null!=this.doubleClickAnimationTrigger&&this.doubleClickAnimationTrigger.start(),null!=this.onDoubleClick&&this.onDoubleClick(this,t)}doPenDraw(t){}doRepeatClick(t,e){null!=this.onRepeatClick&&this.onRepeatClick(this,t,e),2==t&&this.doDoubleClick(e)}doMultiTouchClick(t){3==t&&this._useFingerCursor&&(0==this._fingerCursors.length?this.doShowFingerCursor():this.doHideFingerCursor()),null!=this.onMultiTouchClick&&this.onMultiTouchClick(this,t)}doDragStart(t){""!=this.dragIconResource&&(this.__dragIcon=CControl.controlFromResource(this.dragIconResource,document.body),this.__dragIcon.hasPointerEvent=!1,this.__dragIcon.position.left=t.pageX-this.__dragIcon.position.width/2,this.__dragIcon.position.top=t.pageY-this.__dragIcon.position.height/2,this.__dragIcon.dragStartPosition.x=this.__dragIcon.position.left,this.__dragIcon.dragStartPosition.y=this.__dragIcon.position.top),null!=this.dragStartAnimationTrigger&&this.dragStartAnimationTrigger.start(),null!=this.onDragStart&&this.onDragStart(this,t)}doDragging(t,e){null!=this.__dragIcon&&(this.__dragIcon.isOverCatchControl=t.length>0,this.__dragIcon.position.left=e.pageX-this.__dragIcon.position.width/2,this.__dragIcon.position.top=e.pageY-this.__dragIcon.position.height/2),null!=this.onDragging&&this.onDragging(this,e)}doDrop(t,e){this.dragData=void 0,null!=this.__dragIcon&&this.__dragIcon.doDrop(),null!=this.onDrop&&this.onDrop(this,t,e)}doDragCancel(){null!=this.dragCancelAnimationTrigger&&this.dragCancelAnimationTrigger.start(),this.dragData=void 0,null!=this.__dragIcon&&this.__dragIcon.doCancel(),null!=this.onDragCancel&&this.onDragCancel(this)}doDropCatch(t,e,i,s){null!=this.dragCatchAnimationTrigger&&this.dragCatchAnimationTrigger.start(),null!=this.onDropCatch&&this.onDropCatch(this,t,e,i,s)}doShowHint(){this.__hint=CControl.controlFromResource(this.hintResource,document.body),this.__hint.showHint(this.hint)}doHideHint(){null!=this.__hint&&(this.__hint.hideHint(),this.__hint=void 0)}doMoveHint(t){null!=this.__hint&&("auto"==this.hintPosition?(this.__hint.position.left=t.pageX,this.__hint.position.top=t.pageY+20):(this.__hint.position.left=this.hintFixOffset.x,this.__hint.position.top=this.hintFixOffset.y))}doBeforeMove(t,e,i){let s=new CPoint(e,i);return 0!=this.magneticLength?(s.x=Math.floor(s.x/this.magneticLength)*this.magneticLength,s.y=Math.floor(s.y/this.magneticLength)*this.magneticLength):t.shiftKey&&(s.x=5*Math.floor(s.x/5),s.y=5*Math.floor(s.y/5)),s}doMove(t){let e=this.position.left,i=this.position.top;this.lockMoveX||(e=this.__moveResizeDown.left+(t.pageX-this.__moveResizeDown.pagex),null!=this.lockMinX&&this.lockMinX>e&&(e=this.lockMinX),null!=this.lockMaxX&&this.lockMaxX<e&&(e=this.lockMaxX)),this.lockMoveY||(i=this.__moveResizeDown.top+(t.pageY-this.__moveResizeDown.pagey),null!=this.lockMinY&&this.lockMinY>i&&(i=this.lockMinY),null!=this.lockMaxY&&this.lockMaxY<i&&(i=this.lockMaxY));let s=this.doBeforeMove(t,e,i);this.position.left=s.x,this.position.top=s.y,null!=this.onMove&&this.onMove(this,t)}doResize(t,e,i,s){if(s==EControlMoveKind.RESIZE_L){this.__moveResizeDown.width-(e-this.__moveResizeDown.pagex)>=this.resizeMinWidth?(this.position.left=this.__moveResizeDown.left+(e-this.__moveResizeDown.pagex),this.position.width=this.__moveResizeDown.width-(e-this.__moveResizeDown.pagex)):(this.position.left=this.__moveResizeDown.left+(this.__moveResizeDown.width-this.resizeMinWidth),this.position.width=this.resizeMinWidth)}if(s==EControlMoveKind.RESIZE_T){this.__moveResizeDown.height-(i-this.__moveResizeDown.pagey)>=this.resizeMinHeight?(this.position.top=this.__moveResizeDown.top+(i-this.__moveResizeDown.pagey),this.position.height=this.__moveResizeDown.height-(i-this.__moveResizeDown.pagey)):(this.position.top=this.__moveResizeDown.top+(this.__moveResizeDown.height-this.resizeMinHeight),this.position.height=this.resizeMinHeight)}if(s==EControlMoveKind.RESIZE_R&&(this.__moveResizeDown.width+(e-this.__moveResizeDown.pagex)>=this.resizeMinWidth?this.position.width=this.__moveResizeDown.width+(e-this.__moveResizeDown.pagex):this.position.width=this.resizeMinWidth),s==EControlMoveKind.RESIZE_B&&(this.__moveResizeDown.height+(i-this.__moveResizeDown.pagey)>=this.resizeMinHeight?this.position.height=this.__moveResizeDown.height+(i-this.__moveResizeDown.pagey):this.position.height=this.resizeMinHeight),s==EControlMoveKind.RESIZE_LT){this.__moveResizeDown.width-(e-this.__moveResizeDown.pagex)>=this.resizeMinWidth?(this.position.left=this.__moveResizeDown.left+(e-this.__moveResizeDown.pagex),this.position.width=this.__moveResizeDown.width-(e-this.__moveResizeDown.pagex)):(this.position.left=this.__moveResizeDown.left+(this.__moveResizeDown.width-this.resizeMinWidth),this.position.width=this.resizeMinWidth),this.__moveResizeDown.height-(i-this.__moveResizeDown.pagey)>=this.resizeMinHeight?(this.position.top=this.__moveResizeDown.top+(i-this.__moveResizeDown.pagey),this.position.height=this.__moveResizeDown.height-(i-this.__moveResizeDown.pagey)):(this.position.top=this.__moveResizeDown.top+(this.__moveResizeDown.height-this.resizeMinHeight),this.position.height=this.resizeMinHeight)}if(s==EControlMoveKind.RESIZE_RT){this.__moveResizeDown.width+(e-this.__moveResizeDown.pagex)>=this.resizeMinWidth?this.position.width=this.__moveResizeDown.width+(e-this.__moveResizeDown.pagex):this.position.width=this.resizeMinWidth,this.__moveResizeDown.height-(i-this.__moveResizeDown.pagey)>=this.resizeMinHeight?(this.position.top=this.__moveResizeDown.top+(i-this.__moveResizeDown.pagey),this.position.height=this.__moveResizeDown.height-(i-this.__moveResizeDown.pagey)):(this.position.top=this.__moveResizeDown.top+(this.__moveResizeDown.height-this.resizeMinHeight),this.position.height=this.resizeMinHeight)}if(s==EControlMoveKind.RESIZE_LB){this.__moveResizeDown.width-(e-this.__moveResizeDown.pagex)>=this.resizeMinWidth?(this.position.left=this.__moveResizeDown.left+(e-this.__moveResizeDown.pagex),this.position.width=this.__moveResizeDown.width-(e-this.__moveResizeDown.pagex)):(this.position.left=this.__moveResizeDown.left+(this.__moveResizeDown.width-this.resizeMinWidth),this.position.width=this.resizeMinWidth),this.__moveResizeDown.height+(i-this.__moveResizeDown.pagey)>=this.resizeMinHeight?this.position.height=this.__moveResizeDown.height+(i-this.__moveResizeDown.pagey):this.position.height=this.resizeMinHeight}s==EControlMoveKind.RESIZE_RB&&(this.__moveResizeDown.width+(e-this.__moveResizeDown.pagex)>=this.resizeMinWidth?this.position.width=this.__moveResizeDown.width+(e-this.__moveResizeDown.pagex):this.position.width=this.resizeMinWidth,this.__moveResizeDown.height+(i-this.__moveResizeDown.pagey)>=this.resizeMinHeight?this.position.height=this.__moveResizeDown.height+(i-this.__moveResizeDown.pagey):this.position.height=this.resizeMinHeight),0!=this.magneticLength?(this.position.left=Math.floor(this.position.left/this.magneticLength)*this.magneticLength,this.position.top=Math.floor(this.position.top/this.magneticLength)*this.magneticLength,this.position.width=Math.floor(this.position.width/this.magneticLength)*this.magneticLength,this.position.height=Math.floor(this.position.height/this.magneticLength)*this.magneticLength):t.shiftKey&&(this.position.left=5*Math.floor(this.position.left/5),this.position.top=5*Math.floor(this.position.top/5),this.position.width=5*Math.floor(this.position.width/5),this.position.height=5*Math.floor(this.position.height/5))}doShowFingerCursor(){if(!this.useFingerCursor)return;let t=this,e=new CMoveControl(this);e.resource=this._fingerCursorResource,this._fingerCursors.push(e),e.text="LT";let i=new CMoveControl(this);i.resource=this._fingerCursorResource,this._fingerCursors.push(i),i.text="T";let s=new CMoveControl(this);s.resource=this._fingerCursorResource,this._fingerCursors.push(s),s.text="RT";let a=new CMoveControl(this);a.resource=this._fingerCursorResource,this._fingerCursors.push(a),a.text="L";let o=new CMoveControl(this);o.resource=this._fingerCursorResource,this._fingerCursors.push(o),o.text="R";let n=new CMoveControl(this);n.resource=this._fingerCursorResource,this._fingerCursors.push(n),n.text="LB";let r=new CMoveControl(this);r.resource=this._fingerCursorResource,this._fingerCursors.push(r),r.text="B";let A=new CMoveControl(this);A.resource=this._fingerCursorResource,this._fingerCursors.push(A),A.text="RB";let h=new CMoveControl(this);h.resource=this._fingerCursorResource,this._fingerCursors.push(h);let g=new CMoveControl(this);g.resource=this._fingerCursorResource,this._fingerCursors.push(g),g.text="RX";let C=new CMoveControl(this);C.resource=this._fingerCursorResource,this._fingerCursors.push(C),C.text="RY";let l=new CMoveControl(this);function u(){e.position.width=t._fingerCursorLength,e.position.height=t._fingerCursorLength,e.position.left=-t._fingerCursorLength/2,e.position.top=-t._fingerCursorLength/2,i.position.width=t._fingerCursorLength,i.position.height=t._fingerCursorLength,i.position.left=(t.position.width-t._fingerCursorLength)/2,i.position.top=-t._fingerCursorLength/2,s.position.width=t._fingerCursorLength,s.position.height=t._fingerCursorLength,s.position.left=t.position.width-t._fingerCursorLength/2,s.position.top=-t._fingerCursorLength/2,a.position.width=t._fingerCursorLength,a.position.height=t._fingerCursorLength,a.position.left=-t._fingerCursorLength/2,a.position.top=(t.position.height-t._fingerCursorLength)/2,o.position.width=t._fingerCursorLength,o.position.height=t._fingerCursorLength,o.position.left=t.position.width-t._fingerCursorLength/2,o.position.top=(t.position.height-t._fingerCursorLength)/2,n.position.width=t._fingerCursorLength,n.position.height=t._fingerCursorLength,n.position.left=-t._fingerCursorLength/2,n.position.top=t.position.height-t._fingerCursorLength/2,r.position.width=t._fingerCursorLength,r.position.height=t._fingerCursorLength,r.position.left=(t.position.width-t._fingerCursorLength)/2,r.position.top=t.position.height-t._fingerCursorLength/2,A.position.width=t._fingerCursorLength,A.position.height=t._fingerCursorLength,A.position.left=t.position.width-t._fingerCursorLength/2,A.position.top=t.position.height-t._fingerCursorLength/2,l.position.width=t._fingerCursorLength,l.position.height=t._fingerCursorLength,l.position.left=(t.position.width-t._fingerCursorLength)/2+t._fingerCursorLength+5,l.position.top=(t.position.height-t._fingerCursorLength)/2,g.position.width=t._fingerCursorLength,g.position.height=t._fingerCursorLength,g.position.left=(t.position.width-t._fingerCursorLength)/2-t._fingerCursorLength-5,g.position.top=(t.position.height-t._fingerCursorLength)/2,C.position.width=t._fingerCursorLength,C.position.height=t._fingerCursorLength,C.position.left=(t.position.width-t._fingerCursorLength)/2,C.position.top=(t.position.height-t._fingerCursorLength)/2,h.position.width=t.position.width-t._fingerCursorLength,h.position.height=t.position.height-t._fingerCursorLength,h.position.left=t._fingerCursorLength/2,h.position.top=t._fingerCursorLength/2}l.resource=this._fingerCursorResource,this._fingerCursors.push(l),l.text="RZ",u(),e.onPointerDown=function(e,i){t.setDown(i)},e.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_LT),u()},i.onPointerDown=function(e,i){t.setDown(i)},i.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_T),u()},s.onPointerDown=function(e,i){t.setDown(i)},s.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_RT),u()},a.onPointerDown=function(e,i){t.setDown(i)},a.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_L),u()},o.onPointerDown=function(e,i){t.setDown(i)},o.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_R),u()},n.onPointerDown=function(e,i){t.setDown(i)},n.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_LB),u()},r.onPointerDown=function(e,i){t.setDown(i)},r.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_B),u()},A.onPointerDown=function(e,i){t.setDown(i)},A.onMove=function(e,i){t.doResize(i,i.pageX,i.pageY,EControlMoveKind.RESIZE_RB),u()};let c=0,d=0;g.onPointerDown=function(t,e){c=e.pageX,d=e.pageY},g.onMove=function(e,i){t.transform.rotateX=CPoint.getAngleFromTwoPoint(new CPoint(c,d),new CPoint(i.pageX,i.pageY)),u()},C.onPointerDown=function(t,e){c=e.pageX,d=e.pageY},C.onMove=function(e,i){t.transform.rotateY=CPoint.getAngleFromTwoPoint(new CPoint(c,d),new CPoint(i.pageX,i.pageY)),u()},l.onPointerDown=function(t,e){c=e.pageX,d=e.pageY},l.onMove=function(e,i){t.transform.rotateZ=CPoint.getAngleFromTwoPoint(new CPoint(c,d),new CPoint(i.pageX,i.pageY)),u()},h.onPointerDown=function(e,i){t.setDown(i)},h.onMove=function(e,i){t.position.left=t.__moveResizeDown.left+(i.pageX-t.__moveResizeDown.pagex),t.position.top=t.__moveResizeDown.top+(i.pageY-t.__moveResizeDown.pagey),u()}}doHideFingerCursor(){for(let t=0;t<this._fingerCursors.length;t++)this._fingerCursors[t].remove();this._fingerCursors=[]}click(){this.doClick(new PointerEvent(""))}deleteProperties(){return(new Set).add("isOver").add("isEnter")}readOnlyProperties(){return(new Set).add("id").add("name")}addProperties(){let t=super.addProperties();return t.push({instance:this.overAnimationTrigger,propertyName:"overAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.thisPointerDownAnimationTrigger,propertyName:"thisPointerDownAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.thisPointerUpAnimationTrigger,propertyName:"thisPointerUpAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.enterAnimationTrigger,propertyName:"enterAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.clickAnimationTrigger,propertyName:"clickAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.doubleClickAnimationTrigger,propertyName:"doubleClickAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.dragStartAnimationTrigger,propertyName:"dragStartAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.dragStartAnimationTrigger,propertyName:"dragCancelAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.dragCatchAnimationTrigger,propertyName:"dragCatchAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.keyDownAnimationTrigger,propertyName:"keyDownAnimationTrigger",readOnly:!1,enum:[]}),t}}class CCanvasLayerControl extends CPointerEventControl{get layers(){return this._layers}get expandedLayers(){return this._expandedLayers}get layersResource(){return this._layersResource}set layersResource(t){this.layersResource!=t&&(this._layersResource=t,this.layers.resource=t)}get pathItemsResource(){return this._pathItemsResource}set pathItemsResource(t){if(this._pathItemsResource!=t){this._pathItemsResource=t;let e=CSystem.resources.get(t);if(null!=e){let t=new CPathItems;t.fromData(e);let i=0,s=0;i=parseFloat(e.width),s=parseFloat(e.height),this.layers.clear();for(let e=0;e<t.length;e++){this.layers.addLayer().items.fromData(t.get(e).toCanvasItems(i,s).toData())}}}}constructor(t,e){super(t,e),this._expandedLayers=new CNotifyRect(0,0,0,0),this._layersResource="",this._pathItemsResource="";let i=this;this._layers=new CCanvasLayers(this),this._layers.onChangeLayer=function(t,e,s){e==CCanvasLayers.CON_CHANGE_ADD_LAYER&&s.setCanvasElementPosition(-i.expandedLayers.left,-i.expandedLayers.top,i.position.width+i.expandedLayers.left+i.expandedLayers.right,i.position.height+i.expandedLayers.top+i.expandedLayers.bottom)},this.layers.onChange=function(){let t=CSystem.getChildControls(i);for(let e=0;e<t.length;e++)t[e].bringToFront();i.doChangeLayerCount()},this._expandedLayers.onChange=function(){i.setLayers()}}doToData(t){super.doToData(t),CDataClass.putData(t,"layers",this.layers.toData(),[],!0),CDataClass.putData(t,"expandedLayers",this.expandedLayers.toData(),{},!0),CDataClass.putData(t,"layersResource",this.layersResource,"")}doFromData(t){super.doFromData(t),this.layers.fromData(CDataClass.getData(t,"layers",[],!0)),this.expandedLayers.fromData(CDataClass.getData(t,"expandedLayers",{},!0)),this.layersResource=CDataClass.getData(t,"layersResource","")}doRemove(){this._layers.remove(),super.doRemove()}doSetElementSize(){super.doSetElementSize(),this.doSetLayers()}doSetLayers(){this._layers.setLayersPosition(-this.expandedLayers.left,-this.expandedLayers.top,this.position.width+this.expandedLayers.left+this.expandedLayers.right,this.position.height+this.expandedLayers.top+this.expandedLayers.bottom),null!=this.onSetLayers&&this.onSetLayers(this)}doChangeLayerCount(){null!=this.onChangeLayerCount&&this.onChangeLayerCount(this)}doDraw(){this._layers.draw()}doLayerDraw(t,e,i){null!=this.onLayerDraw&&this.onLayerDraw(this,t,e,i)}setLayers(){this.doSetLayers()}addLayer(){return this._layers.addLayer()}draw(){this.doDraw()}getCanvasItems(t){return this.layers.getCanvasItems(t)}static createControl(t,e="",i=0,s=0,a=50,o=50){let n=new CCanvasLayerControl(t,e);return n.position.left=i,n.position.top=s,n.position.width=a,n.position.height=o,n}}class CPanel extends CCanvasLayerControl{static get CON_CHANGE_USE_AUTO_SIZE(){return"changeUseAutoSize"}static get CON_CHANGE_TEXT(){return"changeText"}static get CON_CHANGE_TEXTSET(){return"changeTextSet"}get textSet(){return this._textSet}get text(){if(""!=this.textSet.languageKey){let t=CLanguage.getText(this.textSet.languageKey);return null!=t?t:this._text}return this._text}set text(t){this._text!=t&&(this._text=t,this.doChange(CPanel.CON_CHANGE_TEXT))}get useAutoSize(){return this._useAutoSize}set useAutoSize(t){this._useAutoSize!=t&&(this._useAutoSize=t,this.doChange(CPanel.CON_CHANGE_USE_AUTO_SIZE))}constructor(t,e){super(t,e),this._textSet=new CTextSet,this._text="",this._useAutoSize=!1;let i=this;this.textSet.onChange=function(){i.doChange(CPanel.CON_CHANGE_TEXTSET)}}doToData(t){super.doToData(t),CDataClass.putData(t,"textSet",this.textSet.toData(),{},!0),CDataClass.putData(t,"text",this.text,""),CDataClass.putData(t,"useAutoSize",this.useAutoSize,!1)}doFromData(t){super.doFromData(t),this.textSet.fromData(CDataClass.getData(t,"textSet",{},!0)),this.text=CDataClass.getData(t,"text",""),this.useAutoSize=CDataClass.getData(t,"useAutoSize",!1)}doChange(t,e){super.doChange(t,e),t==CPanel.CON_CHANGE_TEXT&&(this.doChangeText(),this.doSetAutoSize()),t==CPanel.CON_CHANGE_TEXTSET&&(this.doChangeTextSet(),this.doSetAutoSize()),t==CPanel.CON_CHANGE_USE_AUTO_SIZE&&this.doSetAutoSize()}doSetAutoSize(){this._useAutoSize&&(this.position.width=Math.round(CStringUtil.getTextWidth(this.textSet,this.text))+20)}doChangeTextSet(){for(let t=0;t<this.layers.length;t++){let e=this.layers.get(t).items.getItem("text");for(let t=0;t<e.length;t++)e[t].textSet.fromData(this.textSet.toData())}this.draw(),null!=this.onChangeTextSet&&this.onChangeTextSet(this)}doChangeText(){for(let t=0;t<this.layers.length;t++){let e=this.layers.get(t).items.getItem("text");for(let t=0;t<e.length;t++)e[t].text=this.text}this.draw(),null!=this.onChangeText&&this.onChangeText(this)}doThisPointerUp(t,e){if(super.doThisPointerUp(t,e),"mouse"==t.pointerType&&2==t.button&&null!=this.popup){this.popup.resource=this.popup.popupResource,t.pageX+this.popup.popupWidth<=window.innerWidth?this.popup.position.left=t.pageX:this.popup.position.left=t.pageX-this.popup.popupWidth;let e=30*this.popup.items.length+10;t.pageY+e<=window.innerHeight?this.popup.position.top=t.pageY:this.popup.position.top=t.pageY-e,this.popup.position.width=this.popup.popupWidth,this.popup.popupCaller=this,this.popup.show()}}canvasItemText(t,e){for(let i=0;i<this.layers.length;i++){let s=this.layers.get(i).items.getItem(t);for(let t=0;t<s.length;t++)s[t].text=e}}}class CCover extends CPanel{get showAnimatorResource(){return this._showAnimatorResource}set showAnimatorResource(t){this._showAnimatorResource=t,""!=t&&(this.showAnimationTrigger=CAnimator.animatorFromResource(this,t))}get hideAnimatorResource(){return this._hideAnimatorResource}set hideAnimatorResource(t){this._hideAnimatorResource=t,""!=t&&(this.hideAnimationTrigger=CAnimator.animatorFromResource(this,t))}constructor(t,e){super(t,e),this.isClickHide=!0,this.isHideClear=!1,this._showAnimatorResource="",this._hideAnimatorResource="",this.visible=!1}doClick(t){super.doClick(t),this.isClickHide&&this.hideCover()}doToData(t){super.doToData(t),CDataClass.putData(t,"showAnimatorResource",this.showAnimatorResource,""),CDataClass.putData(t,"hideAnimatorResource",this.hideAnimatorResource,""),null!=this.showAnimationTrigger&&CDataClass.putData(t,"showAnimationTrigger",this.showAnimationTrigger.toData(),{},!0),null!=this.hideAnimationTrigger&&CDataClass.putData(t,"hideAnimationTrigger",this.hideAnimationTrigger.toData(),{},!0)}doFromData(t){super.doFromData(t),CAnimator.fromAnimatorData(t,this,"showAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"hideAnimationTrigger"),this.showAnimatorResource=CDataClass.getData(t,"showAnimatorResource",""),this.hideAnimatorResource=CDataClass.getData(t,"hideAnimatorResource","")}doShowCover(){if(this.bringToFront(),null!=this.parent&&(this.position.left=0,this.position.top=0,this.position.width=this.parent.position.width,this.position.height=this.parent.position.height),null!=this.onBeforeShow&&this.onBeforeShow(this),this.visible=!0,null!=this.showAnimationTrigger){let t=this;this.showAnimationTrigger.onAfterAnimation=function(){null!=t.onShow&&t.onShow(t)},this.showAnimationTrigger.start()}else null!=this.onShow&&this.onShow(this)}doHideCover(){null!=this.onBeforeHide&&this.onBeforeHide(this);let t=this;function e(){if(t.isHideClear){let e=CSystem.getChildControls(t);for(let t=e.length-1;t>=0;t--)e[t].remove()}}null!=this.hideAnimationTrigger?(this.hideAnimationTrigger.onAfterAnimation=function(){t.visible=!1,e(),null!=t.onHide&&t.onHide(t)},this.hideAnimationTrigger.start()):(this.visible=!1,e(),null!=this.onHide&&this.onHide(this))}showCover(t=!0){this.isClickHide=t,this.doShowCover()}hideCover(){this.doHideCover()}addProperties(){let t=super.addProperties();return t.push({instance:this.showAnimationTrigger,propertyName:"showAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.hideAnimationTrigger,propertyName:"hideAnimationTrigger",readOnly:!1,enum:[]}),t}}class CDragIcon extends CPanel{constructor(){super(...arguments),this._isOverCatchControl=!1,this.dragStartPosition=new CPoint,this._dropAnimatorResource="",this._cancelAnimatorResource="",this._changeOverCatchControlAnimatorResource=""}get dropAnimatorResource(){return this._dropAnimatorResource}set dropAnimatorResource(t){this._dropAnimatorResource=t,""!=t&&(this.dropAnimationTrigger=CAnimator.animatorFromResource(this,t))}get cancelAnimatorResource(){return this._cancelAnimatorResource}set cancelAnimatorResource(t){this._cancelAnimatorResource=t,""!=t&&(this.cancelAnimationTrigger=CAnimator.animatorFromResource(this,t))}get changeOverCatchControlAnimatorResource(){return this._changeOverCatchControlAnimatorResource}set changeOverCatchControlAnimatorResource(t){this._changeOverCatchControlAnimatorResource=t,""!=t&&(this.changeOverCatchControlAnimationTrigger=CAnimator.animatorFromResource(this,t))}get isOverCatchControl(){return this._isOverCatchControl}set isOverCatchControl(t){this._isOverCatchControl!=t&&(this._isOverCatchControl=t,this.doChangeOverCatchControl())}doToData(t){super.doToData(t),CDataClass.putData(t,"dropAnimatorResource",this.dropAnimatorResource,""),CDataClass.putData(t,"cancelAnimatorResource",this.cancelAnimatorResource,""),CDataClass.putData(t,"changeOverCatchControlAnimatorResource",this.changeOverCatchControlAnimatorResource,""),null!=this.dropAnimationTrigger&&CDataClass.putData(t,"dropAnimationTrigger",this.dropAnimationTrigger.toData(),{},!0),null!=this.cancelAnimationTrigger&&CDataClass.putData(t,"cancelAnimationTrigger",this.cancelAnimationTrigger.toData(),{},!0),null!=this.changeOverCatchControlAnimationTrigger&&CDataClass.putData(t,"changeOverCatchControlAnimationTrigger",this.changeOverCatchControlAnimationTrigger.toData(),{},!0)}doFromData(t){super.doFromData(t),CAnimator.fromAnimatorData(t,this,"dropAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"cancelAnimationTrigger"),CAnimator.fromAnimatorData(t,this,"changeOverCatchControlAnimationTrigger"),this.dropAnimatorResource=CDataClass.getData(t,"dropAnimatorResource",""),this.cancelAnimatorResource=CDataClass.getData(t,"cancelAnimatorResource",""),this.changeOverCatchControlAnimatorResource=CDataClass.getData(t,"changeOverCatchControlAnimatorResource","")}doChangeOverCatchControl(){null!=this.changeOverCatchControlAnimationTrigger&&(this.isOverCatchControl?this.triggerTrue(this.changeOverCatchControlAnimationTrigger):this.triggerFalse(this.changeOverCatchControlAnimationTrigger))}doDrop(){if(null!=this.dropAnimationTrigger){let t=this;this.dropAnimationTrigger.onAfterAnimation=function(){t.remove()},this.dropAnimationTrigger.start()}else this.remove()}doCancel(){if(console.log("do cancel",this.cancelAnimationTrigger),null!=this.cancelAnimationTrigger){let t=this;this.cancelAnimationTrigger.onAfterAnimation=function(){t.remove()},this.cancelAnimationTrigger.start()}else this.remove()}addProperties(){let t=super.addProperties();return t.push({instance:this.dropAnimationTrigger,propertyName:"dropAnimationTrigger",readOnly:!1,enum:[]}),t.push({instance:this.cancelAnimationTrigger,propertyName:"cancelAnimationTrigger",readOnly:!1,enum:[]}),t}}class CHint extends CPanel{constructor(){super(...arguments),this._hintAnimatorResource=""}get hintAnimatorResource(){return this._hintAnimatorResource}set hintAnimatorResource(t){this._hintAnimatorResource=t,""!=t&&(this.hideAnimationTrigger=CAnimator.animatorFromResource(this,t))}doToData(t){super.doToData(t),CDataClass.putData(t,"hintAnimatorResource",this.hintAnimatorResource,""),null!=this.hideAnimationTrigger&&CDataClass.putData(t,"hideAnimationTrigger",this.hideAnimationTrigger.toData(),{},!0)}doFromData(t){super.doFromData(t),CAnimator.fromAnimatorData(t,this,"hideAnimationTrigger"),this.hintAnimatorResource=CDataClass.getData(t,"hintAnimatorResource","")}doShowh(t){this.hasPointerEvent=!1,this.text=t}doHideh(){this.visible=!1}doHide(){super.doHide(),this.remove()}showHint(t){this.doShowh(t)}hideHint(){this.doHideh()}addProperties(){let t=super.addProperties();return t.push({instance:this.hideAnimationTrigger,propertyName:"hideAnimationTrigger",readOnly:!1,enum:[]}),t}}class CGraphicInfo extends CResourceClass{constructor(){super(...arguments),this.opacity=1,this.position=new CPosition,this.transform=new CTransform,this.filter=new CFilter,this.layers=new CCanvasLayers(void 0)}doToData(t){super.doToData(t),CDataClass.putData(t,"opacity",this.opacity,1),CDataClass.putData(t,"position",this.position.toData(),{},!0),CDataClass.putData(t,"transform",this.transform.toData(),{},!0),CDataClass.putData(t,"filter",this.filter.toData(),{},!0),CDataClass.putData(t,"layers",this.layers.toData(),{},!0)}doFromData(t){super.doFromData(t),this.opacity=CDataClass.getData(t,"opacity",1),this.position.fromData(CDataClass.getData(t,"position",{},!0)),this.transform.fromData(CDataClass.getData(t,"transform",{},!0)),this.filter.fromData(CDataClass.getData(t,"filter",{},!0)),this.layers.fromData(CDataClass.getData(t,"layers",{},!0))}doRemove(){this.layers.remove(),super.doRemove()}static controlGraphicInfo(t,e){let i=new CGraphicInfo;return i.opacity=t.opacity,null==e?i.position.fromData(t.position.toData()):i.position.fromData(e),i.transform.fromData(t.transform.toData()),i.filter.fromData(t.filter.toData()),i.layers.fromData(t.layers.toData()),i}static setControlGraphicInfo(t,e){e.opacity=t.opacity,e.position.fromData(t.position.toData()),e.transform.fromData(t.transform.toData()),e.filter.fromData(t.filter.toData()),e.layers.fromData(t.layers.toData())}}class CAnimationControlSceneSection extends CResourceClass{constructor(){super(...arguments),this.controlName="",this.property="",this.script="",this._graphData="",this.graphPath=new CPathPointList,this.positionPoints=new Array,this.positionPath=new CPathPointList,this.timeTag=new Array,this.objectData=new CList,this.startTime=0,this.duration=100,this.startValue=0,this.stopValue=0,this.isLoop=!1}get graphData(){return this._graphData}set graphData(t){if("string"==typeof t){let e=CSystem.resources.get(t);null!=e&&(this._graphData=e)}else this._graphData=t}doToData(t){super.doToData(t),CDataClass.putData(t,"controlName",this.controlName,""),CDataClass.putData(t,"property",this.property,""),CDataClass.putData(t,"script",this.script,""),"string"==typeof this.graphData?CDataClass.putData(t,"graphData",this.graphData,""):CDataClass.putData(t,"graphData",this.graphData,[],!0),CDataClass.putData(t,"graphPath",this.graphPath.toData(),{},!0);let e=new Array;for(let t=0;t<this.objectData.length;t++)e.push({duration:this.objectData.get(t).sectionT,centerX:this.objectData.get(t).centerX,centerY:this.objectData.get(t).centerY,info:this.objectData.get(t).info.toData()});CDataClass.putData(t,"objectData",e,[],!0);let i=new Array;for(let t=0;t<this.positionPoints.length;t++)i.push({x:this.positionPoints[t].x,y:this.positionPoints[t].y});CDataClass.putData(t,"positionPoints",i,[],!0),CDataClass.putData(t,"positionPath",this.positionPath.toData(),{},!0),CDataClass.putData(t,"timeTag",this.timeTag,[],!0),CDataClass.putData(t,"startTime",this.startTime,0),CDataClass.putData(t,"duration",this.duration,100),CDataClass.putData(t,"startValue",CGraphAnimationValue.graphValueToData(this.startValue)),CDataClass.putData(t,"stopValue",CGraphAnimationValue.graphValueToData(this.stopValue)),CDataClass.putData(t,"isLoop",this.isLoop,!1)}doFromData(t){super.doFromData(t),this.controlName=CDataClass.getData(t,"controlName",""),this.property=CDataClass.getData(t,"property",""),this.script=CDataClass.getData(t,"script",""),this.graphData=CDataClass.getData(t,"graphData"),this.graphPath.fromData(CDataClass.getData(t,"graphPath",{},!0)),this.clearObjectData();let e=CDataClass.getData(t,"objectData",[],!0);for(let t=0;t<e.length;t++){let i=new CGraphicInfo;i.fromData(e[t].info);let s={sectionT:e[t].duration,centerX:e[t].centerX,centerY:e[t].centerY,info:i};this.objectData.add(s)}let i=CDataClass.getData(t,"positionPoints",[],!0);this.positionPoints=[];for(let t=0;t<i.length;t++){let e=new CPoint(i[t].x,i[t].y);this.positionPoints.push(e)}this.positionPath.fromData(CDataClass.getData(t,"positionPath",{},!0)),this.timeTag=CDataClass.getData(t,"timeTag",[],!0),this.startTime=CDataClass.getData(t,"startTime",0),this.duration=CDataClass.getData(t,"duration",100),this.startValue=CGraphAnimationValue.graphValueFromData(CDataClass.getData(t,"startValue")),this.stopValue=CGraphAnimationValue.graphValueFromData(CDataClass.getData(t,"stopValue")),this.isLoop=CDataClass.getData(t,"isLoop",!1)}doRemove(){this.clearObjectData(),super.doRemove()}clearObjectData(){for(let t=0;t<this.objectData.length;t++)this.objectData.get(t).info.remove();this.objectData.clear()}graphDataCopy(){let t=new Array;if("string"!=typeof this.graphData)for(let e=0;e<this.graphData.length;e++)t.push(this.graphData[e]);return t}graphDataFromData(t){this.graphData=[];for(let e=0;e<t.length;e++)this.graphData.push(t[e])}timeTagCopy(){let t=new Array;for(let e=0;e<this.timeTag.length;e++)t.push({tagName:this.timeTag[e].tagName,tagColor:this.timeTag[e].tagColor,duration:this.timeTag[e].duration});return t}timeTagFromData(t){this.timeTag=[];for(let e=0;e<t.length;e++)this.timeTag.push({tagName:t[e].tagName,tagColor:t[e].tagColor,duration:t[e].duration})}}class CAnimationControlScene extends CResourceClass{constructor(){super(...arguments),this.sections=new CList,this.startTime=0,this.duration=1e3,this.speedStartValue=1,this.speedStopValue=1}doToData(t){super.doToData(t);let e=new Array;for(let t=0;t<this.sections.length;t++)e.push(this.sections.get(t).toData());CDataClass.putData(t,"sections",e,[],!0),CDataClass.putData(t,"startTime",this.startTime,0),CDataClass.putData(t,"duration",this.duration,1e3),CDataClass.putData(t,"speedStopValue",this.speedStopValue,0),CDataClass.putData(t,"speedStartValue",this.speedStartValue,0),CDataClass.putData(t,"speedGraphData",this.speedGraphData,void 0)}doFromData(t){super.doFromData(t),this.clearSections();let e=CDataClass.getData(t,"sections",[],!0);for(let t=0;t<e.length;t++){let i=new CAnimationControlSceneSection;i.fromData(e[t]),this.sections.add(i)}this.startTime=CDataClass.getData(t,"startTime",0),this.duration=CDataClass.getData(t,"duration",1e3),this.speedStartValue=CDataClass.getData(t,"speedStartValue",0),this.speedStopValue=CDataClass.getData(t,"speedStopValue",0),this.speedGraphData=CDataClass.getData(t,"speedGraphData",void 0)}doRemove(){this.clearSections(),super.doRemove()}clearSections(){for(let t=0;t<this.sections.length;t++)this.sections.get(t).remove();this.sections.clear()}}class CAnimationControl extends CPanel{get transformerPoints(){return this._transformerPoints}get sceneData(){return this._sceneData}get isScene(){return this.__isScene}get objectsCount(){return this._objectsCount}set objectsCount(t){if(this._objectsCount=t,this.objects.length<t){let e=t-this.objects.length;for(let t=0;t<e;t++){let t=new CAnimationControl(this);this.objects.add(t)}}else if(this.objects.length>t){let e=this.objects.length-t;for(let t=0;t<e;t++)this.objects.get(this.objects.length-1).remove(),this.objects.delete(this.objects.length-1)}}constructor(t,e){super(t,e),this.__isScene=!1,this.__objectsIndex=new Map,this.__orgBounds=new CRect,this._objectsCount=0,this._transformerPoints=new CTransformerPoints,this._sceneData=new CAnimationControlScene,this.orgTransfrom=new CTransform,this.orgPosition=new CPosition,this.objects=new CList;let i=this;this.objects.onChange=function(){i.setObjectIndex()}}doToData(t){super.doToData(t);let e=new Array;for(let t=0;t<this.objects.length;t++)e.push(this.objects.get(t).toData());CDataClass.putData(t,"objects",e,[],!0),CDataClass.putData(t,"objectsCount",this.objectsCount,0),CDataClass.putData(t,"orgPosition",this.position.toData(),{},!0),CDataClass.putData(t,"orgTransfrom",this.transform.toData(),{},!0),CDataClass.putData(t,"sceneData",this.sceneData.toData(),{},!0)}doFromData(t){super.doFromData(t),this.clear(),this.objectsCount=CDataClass.getData(t,"objectsCount",0);let e=CDataClass.getData(t,"objects",[],!0);for(let t=0;t<e.length;t++)this.objects.get(t).fromData(e[t]);this.orgPosition.fromData(CDataClass.getData(t,"orgPosition",{},!0)),this.orgTransfrom.fromData(CDataClass.getData(t,"orgTransfrom",{},!0)),this.sceneData.fromData(CDataClass.getData(t,"sceneData",{},!0)),this.setObjectIndex();for(let t=0;t<this.sceneData.sections.length;t++)this.sceneData.sections.get(t).control=this.getObject(this.sceneData.sections.get(t).controlName);this.orgData=t}doRemove(){null!=this.orgPathData&&this.orgPathData.remove(),this.clear(),super.doRemove()}doChangeSize(){super.doChangeSize();let t=this.position.width/this.orgPosition.width,e=this.position.height/this.orgPosition.height;this.objectsScale(t,e)}doScene(){let t=this;if(!this.__isScene){t.doSetStart();let e=t.getSceneAnimation();e.duration=this.sceneData.duration,e.onFinish=function(){t.__isScene=!1,e.remove()},this.__isScene=!0,e.start(),null!=this.onScene&&this.onScene(this)}}doSetStart(){this.doSetTime(0)}doSetTime(t){let e=this.getSceneAnimation();e.doBeforeStart(),e.moveTime(t),e.remove()}addAnimationObject(){let t=new CAnimationControl(this);return this.objects.add(t),t}clear(){for(let t=0;t<this.objects.length;t++)this.objects.get(t).remove();this.objects.clear()}objectsScale(t,e){for(let i=0;i<this.objects.length;i++)this.objects.get(i).position.left=this.objects.get(i).orgPosition.left*t,this.objects.get(i).position.top=this.objects.get(i).orgPosition.top*e,this.objects.get(i).position.width=this.objects.get(i).orgPosition.width*t,this.objects.get(i).position.height=this.objects.get(i).orgPosition.height*e}orgPathdataSet(){null!=this.orgPathData&&this.orgPathData.remove();let t=new CCanvasLayers(void 0);t.fromData(this.layers.toData()),this.orgPathData=t,this.__orgBounds=new CRect(0,0,this.position.width,this.position.height)}scene(){this.doScene()}getObject(t){return this.__objectsIndex.get(t)}setObjectIndex(){this.__objectsIndex.clear(),this.__objectsIndex.set(this.propertyName,this);for(let t=0;t<this.objects.length;t++)this.__objectsIndex.set(this.objects.get(t).propertyName,this.objects.get(t))}copyTo(){let t=new CAnimationControl;return t.fromData(this.toData()),t}getSceneAnimation(){let t=new CSceneAnimator;if(1e3==this.sceneData.duration){let e=0;for(let t=0;t<this.sceneData.sections.length;t++)e=CCalc.max(e,this.sceneData.sections.get(t).startTime+this.sceneData.sections.get(t).duration);t.duration=e}else t.duration=this.sceneData.duration;return t.animationControl=this,t}setOriginalData(){null!=this.orgData&&this.fromData(this.orgData)}deleteObject(t){for(let e=0;e<this.objects.length;e++)if(this.objects.get(e)==t){this.objects.get(e).remove(),this.objects.delete(e),this.objectsCount--;break}}}class CTimes extends CDataClass{constructor(){super(...arguments),this._times=new CTableData(["name","object"],["name","object"])}get times(){return this._times}get length(){return this.times.length}add(t,e){this._times.add([t,e])}delete(t){if("string"==typeof t){let e=this._times.findIndexRow("name",t);this._times.delete(e)}else{let e=this._times.findIndexRow("object",t);this._times.delete(e)}}clear(){this._times.clear()}loopTime(t){for(let e=0;e<this._times.length;e++)t(this._times.getRow(e).get(1).asObject)}}class CTime extends CDataClass{get preTime(){return this._preTime}get changeTime(){return this._changeTime}get time(){return this._time}set time(t){t!=this._time&&(this._time=t,this.doChangeTime())}get timeString(){let t=new Date(this._time);return CDatetime.toTimeString(t,!0,!0)}get speed(){return this._speed}set speed(t){this._speed=t}get isPause(){return this._isPause}set isPause(t){this._isPause!=t&&(this._isPause=t,this.doChangePause())}get isReverse(){return this._isReverse}set isReverse(t){this._isReverse!=t&&(this._isReverse=t,this.doChangeReverse())}get childs(){return this._childs}get timePoints(){return this._timePoints}get timeSections(){return this._timeSections}set timeSections(t){this._timeSections=t}constructor(t,e=1){super(),this._time=0,this._speed=1,this._isPause=!1,this._isReverse=!1,this._childs=new CTimes,this._timePoints=new Array,this._timeSections=new Array,this._time=null==t?(new Date).getTime():t,this.speed=e}doChangeTime(){null!=this.onChangeTime&&this.onChangeTime(this)}doChangePause(){null!=this.onChangePause&&this.onChangePause(this)}doChangeReverse(){null!=this.onChangeReverse&&this.onChangeReverse(this)}doRemove(){CTime.times.delete(this),this._childs.loopTime(function(t){t.doRemove()}),this._childs.clear(),super.doRemove()}setTime(t,e){let i=(e-t)*this.speed;if(!this.isPause){this._preTime=this.time,this._changeTime=i,this.isReverse?this.time-=i:this.time+=i;let t=this;if(this.childs.loopTime(function(e){null!=t.preTime&&e.setTime(t.preTime,t.time)}),null!=this.preTime){for(let t=0;t<this._timePoints.length;t++)this._timePoints[t].checkTime(this.preTime,this.time);for(let t=0;t<this._timeSections.length;t++)if(this._timeSections[t].isLoop){if(this.time>=this._timeSections[t].startTime){let e=this._timeSections[t].stopTime-this._timeSections[t].startTime,i=this._timeSections[t].startTime+e*Math.floor((this.time-this._timeSections[t].startTime)/e),s=i+e;this._timeSections[t].doTick(this.preTime,this.time,CCalc.crRange2Value(i,s,this.time,0,1))}}else this.isReverse?this.preTime>=this._timeSections[t].startTime&&this.time<=this._timeSections[t].startTime?this._timeSections[t].doTick(this.preTime,this.time,0):this.time<=this._timeSections[t].stopTime&&this.preTime>=this._timeSections[t].stopTime?this._timeSections[t].doTick(this.preTime,this.time,1):this.time>this._timeSections[t].startTime&&this.time<this._timeSections[t].stopTime&&this._timeSections[t].doTick(this.preTime,this.time,CCalc.crRange2Value(this._timeSections[t].startTime,this._timeSections[t].stopTime,this.time,0,1)):this.preTime<=this._timeSections[t].startTime&&this.time>=this._timeSections[t].startTime?this._timeSections[t].doTick(this.preTime,this.time,0):this.time>=this._timeSections[t].stopTime&&this.preTime<=this._timeSections[t].stopTime?this._timeSections[t].doTick(this.preTime,this.time,1):this.time>this._timeSections[t].startTime&&this.time<this._timeSections[t].stopTime&&this._timeSections[t].doTick(this.preTime,this.time,CCalc.crRange2Value(this._timeSections[t].startTime,this._timeSections[t].stopTime,this.time,0,1))}}}hasTimePoint(t){let e=!1;for(let i=0;i<this.timePoints.length;i++)if(this.timePoints[i]==t){e=!0;break}return e}deleteTimePoint(t){for(let e=0;e<this._timePoints.length;e++)if(this._timePoints[e]==t){this._timePoints.splice(e,1);break}}clearTimePoint(){for(let t=this._timePoints.length-1;t>=0;t--)this._timePoints[t].remove(),this._timePoints.splice(t,1)}clearTimeSection(){for(let t=this._timeSections.length-1;t>=0;t--)this._timeSections[t].remove(),this._timeSections.splice(t,1)}timeMove(t){if(t!=this.time){let e=t-this.time;this._preTime=void 0,this._changeTime=void 0,this.time=t,this.childs.loopTime(function(t){t.timeMove(t.time+e*t.speed)})}}pause(){this.isPause=!this.isPause}reverse(){this.isReverse=!this.isReverse}static get now(){return(new Date).getTime()}static doAnimationFrame(t,e){this.systemTime=e,this.isPause||CTime.times.loopTime(function(i){i.setTime(t,e)})}static pause(){CTime.isPause=!CTime.isPause}static execAfterTimework(t){let e=setInterval(function(){0==CTime.times.length&&(clearInterval(e),t())},50)}}CTime.isPause=!1,CTime.times=new CTimes,CTime.systemTime=0;class CTimePoint extends CDataClass{get parent(){return this._parent}get afterRemove(){return this._afterRemove}set afterRemove(t){this._afterRemove=t}get time(){return this._time}set time(t){this._time=t}get timePointCount(){return this._timePointCount}set timePointCount(t){this._timePointCount=t}get notifyDirection(){return this._notifyDirection}set notifyDirection(t){this._notifyDirection=t}constructor(t,e,i){super(),this._afterRemove=!1,this._timePointCount=0,this._notifyDirection="both",this._parent=t,this._time=null==e?(new Date).getTime():e,null!=i&&(this._afterRemove=i)}doRemove(){null!=this._parent&&(this._parent.deleteTimePoint(this),this._parent=void 0),super.doRemove()}doBeforeTime(){null!=this.onBeforeTime&&this.onBeforeTime(this,this.parent,this.timePointCount)}doTime(t){this._timePointCount++,null!=this.onTime&&this.onTime(this,this.parent,this.timePointCount),this._afterRemove&&this.doRemove()}checkTime(t,e){let i=CCalc.min(t,e),s=CCalc.max(t,e);if("both"==this.notifyDirection&&i<this.time&&s>=this.time){let i=0;i=t<e?this.time-t:t-this.time,this.doBeforeTime(),this.doTime(i)}else if("go"==this.notifyDirection&&t<this.time&&e>=this.time){let e=this.time-t;this.doBeforeTime(),this.doTime(e)}else if("back"==this.notifyDirection&&e<this.time&&t>=this.time){let e=t-this.time;this.doBeforeTime(),this.doTime(e)}}}class CTimeSection extends CDataClass{get parent(){return this._parent}constructor(t){super(),this.startTime=0,this.stopTime=0,this.isLoop=!1,null!=t&&t.timeSections.push(this)}doRemove(){this._parent=void 0,super.doRemove()}doTick(t,e,i){null!=this.onTick&&this.onTick(this,t,e,i)}}class CTimePointReserve extends CTimePoint{doTime(t){0==this.timePointCount&&null!=this._parent&&(this._parent.isReverse?this._parent.timeMove(this._parent.time+t):this._parent.timeMove(this._parent.time-t),this._parent.reverse()),super.doTime(t)}}class CTimePointPause extends CTimePoint{doTime(t){0==this.timePointCount&&null!=this._parent&&this._parent.pause(),super.doTime(t)}}class CTimePointMoveTime extends CTimePoint{get moveTime(){return this._moveTime}set moveTime(t){this._moveTime=t}constructor(t,e,i,s){super(t,i,s),this._moveTime=e}doTime(t){0==this.timePointCount&&null!=this._parent&&this._parent.timeMove(this._moveTime+t),super.doTime(t)}}class CTimePointRemoveTimeFromTimes extends CTimePoint{doTime(t){null!=this._parent&&CTime.times.delete(this._parent),super.doTime(t)}}{let t;function _t(e){let i=(new Date).getTime();if(null!=t)try{CTime.doAnimationFrame(t,i)}catch(t){console.log(t)}t=i,window.requestAnimationFrame(_t)}window.requestAnimationFrame(_t)}class CAnimation extends CResourceClass{constructor(t,e,i){super(),this._animate=!1,this._value=0,this._invertValue=!1,this.duration=200,this.cancelDuration=100,this.delay=0,this.isLoop=!1,null!=t&&(this.duration=t),null!=e&&(this.delay=e),null!=i&&(this.isLoop=i)}doToData(t){super.doToData(t),CDataClass.putData(t,"duration",this.duration,200),CDataClass.putData(t,"cancelDuration",this.cancelDuration,100),CDataClass.putData(t,"delay",this.delay,0),CDataClass.putData(t,"isLoop",this.isLoop,!1)}doFromData(t){super.doFromData(t),this.duration=CDataClass.getData(t,"duration",200),this.cancelDuration=CDataClass.getData(t,"cancelDuration",100),this.delay=CDataClass.getData(t,"delay",0),this.isLoop=CDataClass.getData(t,"isLoop",!1)}doAnimate(t,e,i){null!=this.onAnimate&&this.onAnimate(this,t,e,i)}doBeforeAnimation(){null!=this.onBeforeAnimation&&this.onBeforeAnimation(this)}doAfterAnimation(){this._animate=!1,null!=this._time&&this._time.doRemove(),this._time=void 0,null!=this.onAfterAnimation&&this.onAfterAnimation(this)}doStart(t){let e=this;this._time=new CTime,this._invertValue=t,this._animate=!0,null!=this.onStart&&this.onStart(this,this._time),CAnimation.animate(this.duration,function(t,i,s){null!=e&&e._animate&&(e._value=i,e.doAnimate(t,i,s))},this.delay,this._invertValue,this.isLoop,function(){null!=e&&e.doBeforeAnimation()},function(){null!=e&&e.doAfterAnimation(),e=void 0},this._time)}doCancel(){if(null!=this._time){null!=this.onCancel&&this.onCancel(this,this._time),this._time.doRemove(),this._time=void 0,this._animate=!1;let t=this;CAnimation.animate(this.cancelDuration,function(e,i,s){t.doAnimate(e,t._value-CCalc.crRange2Value(0,1,i,0,t._value),s)},0,this._invertValue,!1,void 0,function(){t.doAfterAnimation()},this._time)}}doPause(){null!=this._time&&(this._time.pause(),null!=this.onPause&&this.onPause(this,this._time))}start(){this.doStart(!1)}invert(){this.doStart(!0)}startOnce(t,e,i){CAnimation.animate(this.duration,t,this.delay,!1,this.isLoop,e,i,this._time)}reverse(){null!=this._time&&this._time.reverse()}cancel(){this.doCancel()}pause(){this.doPause()}isAnimate(){return this._animate}static animateResource(t,e,i,s,a){let o=CSystem.resources.get(t);CAnimation.graphAnimate(o.duration,o.graphNames,e,o.pointsNames,i,o.delay,!1,o.isLoop,s,a)}static animate(t,e,i,s,a,o,n,r){let A=null==i?0:"number"==typeof i?i:Math.random()*(i.randomRangeStop-i.randomRangeStart)+i.randomRangeStart,h=null==t?0:"number"==typeof t?t:Math.random()*(t.randomRangeStop-t.randomRangeStart)+t.randomRangeStart,g=(new Date).getTime()+A,C=g+h;function l(t){if(null!=o&&o(),e(t,s?1:0,0),a){let e=new CTimePointMoveTime(t,g,C);e.notifyDirection="go";let i=new CTimePointMoveTime(t,C,g);i.notifyDirection="back",e.onTime=function(t,e){t.timePointCount=0},i.onTime=function(t,e){t.timePointCount=0},t.timePoints.push(e),t.timePoints.push(i)}else{let e=new CTimePointRemoveTimeFromTimes(t,C);e.notifyDirection="go";let i=new CTimePointRemoveTimeFromTimes(t,g);i.notifyDirection="back",e.onTime=function(){e.remove(),i.remove(),null!=n&&n()},i.onTime=function(){e.remove(),i.remove(),null!=n&&n()},t.timePoints.push(e),t.timePoints.push(i)}t.onChangeTime=function(i){if(null!=t.changeTime){let i=CCalc.crRange2Value(g,C,t.time,0,1);i<0&&(i=0),i>1&&(i=1),s&&(i=1-i),e(t,i,t.changeTime)}}}if(0==A)if(null!=r)CTime.times.add(CSequence.getSequence("tempAnimation"),r),l(r);else{let t=new CTime;CTime.times.add(CSequence.getSequence("tempAnimation"),t),l(t)}else null!=r&&CTime.times.add(CSequence.getSequence("tempAnimation"),r),setTimeout(()=>{if(null!=r)l(r);else{let t=new CTime;CTime.times.add(CSequence.getSequence("tempAnimation"),t),l(t)}},A);return{duration:h,delay:A,startTime:g,stopTime:C}}static graphAnimate(t,e,i,s,a,o,n,r,A,h,g){let C=new Array,l=new Array;for(let t=0;t<e.length;t++){let i=CSystem.resources.get(e[t]);null!=i&&C.push({name:e[t],values:i})}if(null!=s)for(let t=0;t<s.length;t++){let e=CSystem.resources.get("pathpoints"+s[t]);if(null!=e){let i=CSystem.resources.get(e.graphName);null!=i&&l.push({graphName:e.graphName,graphValues:i,pointsName:s[t],points:e.points})}}CAnimation.animate(t,function(t,e,o){for(let s=0;s<C.length;s++)i(t,e,o,C[s].name,C[s].values[Math.round(CCalc.cr(C[s].values.length-1,0,1,e,2))]);if(null!=s&&null!=a)for(let i=0;i<l.length;i++){let s=l[i].graphValues[Math.round(CCalc.cr(l[i].graphValues.length-1,0,1,e,2))];s<0&&(s=0),s>1&&(s=1),a(t,e,o,l[i].pointsName,l[i].points[Math.round(CCalc.cr(l[i].points.length-1,0,1,s,2))])}},o,n,r,A,h,g)}}class CGraphAnimationInfo extends CResourceClass{constructor(t,e,i,s,a,o,n,r,A,h){super(),this.duration=200,this.graphNames=new Array,this.duration=t,this.graphNames=e,this.graphProc=i,this.pointsNames=s,this.pointsProc=a,this.delay=o,this.invertValue=n,this.isLoop=r,this.beforeAnimation=A,this.afterAnimation=h}doStartAnimation(){let t=this.getAnimation();return null!=this.onStartAnimation&&this.onStartAnimation(this,t),null!=this.invertValue&&this.invertValue?t.invert():t.start(),t}getAnimation(){let t=new CGraphAnimation(this.graphNames,this.pointsNames,this.duration,this.delay,this.isLoop);return null!=this.graphProc&&(t.onGraphAnimate=this.graphProc),null!=this.pointsProc&&(t.onPointsAnimate=this.pointsProc),null!=this.beforeAnimation&&(t.onBeforeAnimation=this.beforeAnimation),null!=this.afterAnimation&&(t.onAfterAnimation=this.afterAnimation),t}startAnimation(){return this.doStartAnimation()}}class CGraphAnimation extends CAnimation{constructor(t,e,i,s,a){super(i,s,a),this._arr=new Array,this._arrPoints=new Array,this.graphNames=t,this.pointsNames=e}doToData(t){super.doToData(t),CDataClass.putData(t,"graphNames",this.graphNames,[],!0),CDataClass.putData(t,"pointsNames",this.pointsNames,void 0)}doFromData(t){super.doFromData(t),this.graphNames=CDataClass.getData(t,"graphNames",[],!0),this.pointsNames=CDataClass.getData(t,"pointsNames",void 0)}doStart(t){this._arr=[],this._arrPoints=[];for(let t=0;t<this.graphNames.length;t++){let e=CSystem.resources.get(this.graphNames[t]);null!=e&&this._arr.push({name:this.graphNames[t],values:e})}if(null!=this.pointsNames)for(let t=0;t<this.pointsNames.length;t++){let e=CSystem.resources.get(this.pointsNames[t]);if(null!=e){let i=CSystem.resources.get(e.graphName);null!=i&&this._arrPoints.push({graphName:e.graphName,graphValues:i,pointsName:this.pointsNames[t],points:e.points})}}super.doStart(t)}doAnimate(t,e,i){super.doAnimate(t,e,i);for(let s=0;s<this._arr.length;s++)this.doGraphAnimate(t,e,i,this._arr[s].name,this._arr[s].values[Math.round(CCalc.cr(this._arr[s].values.length-1,0,1,e,2))]);if(null!=this.pointsNames)for(let s=0;s<this._arrPoints.length;s++){let a=this._arrPoints[s].graphValues[Math.round(CCalc.cr(this._arrPoints[s].graphValues.length-1,0,1,e,2))];a<0&&(a=0),a>1&&(a=1),this.doPointsAnimate(t,e,i,this._arrPoints[s].pointsName,this._arrPoints[s].points[Math.round(CCalc.cr(this._arrPoints[s].points.length-1,0,1,a,2))])}}doGraphAnimate(t,e,i,s,a){null!=this.onGraphAnimate&&this.onGraphAnimate(this,t,e,i,s,a)}doPointsAnimate(t,e,i,s,a){null!=this.onPointsAnimate&&this.onPointsAnimate(this,t,e,i,s,a)}}class CColorInfo extends CDataClass{constructor(t,e,i,s){super(),this.r=255,this.g=255,this.b=255,this.a=1,null!=t&&(this.r=t),null!=e&&(this.g=e),null!=i&&(this.b=i),null!=s&&(this.a=s)}doToData(t){super.doToData(t),CDataClass.putData(t,"r",this.r,255),CDataClass.putData(t,"g",this.g,255),CDataClass.putData(t,"b",this.b,255),CDataClass.putData(t,"a",this.a,1)}doFromData(t){super.doFromData(t),this.r=CDataClass.getData(t,"r",255),this.g=CDataClass.getData(t,"g",255),this.b=CDataClass.getData(t,"b",255),this.a=CDataClass.getData(t,"a",1)}toColor(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}}!function(t){t[t.GRAPH=0]="GRAPH",t[t.POINTS=1]="POINTS"}(EGraphAnimationValueKind||(EGraphAnimationValueKind={})),function(t){t[t.POINT=0]="POINT",t[t.RECT=1]="RECT",t[t.NOTIFYRECT=2]="NOTIFYRECT"}(EPointsValueKind||(EPointsValueKind={}));class CGraphAnimationValue extends CDataClass{get startValueString(){let t="";return"number"==typeof this.startValue?t=this.startValue+"":this.startValue instanceof CColorInfo?t="new CColorInfo("+this.startValue.r+","+this.startValue.g+","+this.startValue.b+","+this.startValue.a+")":this.startValue instanceof CPoint&&(t="new CPoint("+this.startValue.x+","+this.startValue.y+")"),t}get stopValueString(){let t="";return"number"==typeof this.stopValue?t=this.stopValue+"":this.stopValue instanceof CColorInfo?t="new CColorInfo("+this.stopValue.r+","+this.stopValue.g+","+this.stopValue.b+","+this.stopValue.a+")":this.startValue instanceof CPoint&&(t="new CPoint("+this.startValue.x+","+this.startValue.y+")"),t}constructor(t,e,i){super(),this.name=t,this.startValue=e,this.stopValue=i}doToData(t){super.doToData(t),CDataClass.putData(t,"name",this.name,""),"number"==typeof this.startValue?(CDataClass.putData(t,"startKind","number"),CDataClass.putData(t,"startValue",this.startValue,0)):this.startValue instanceof CPoint?(CDataClass.putData(t,"startKind","CPoint"),CDataClass.putData(t,"startValue",this.startValue.toData(),{x:0,y:0},!0)):this.startValue instanceof CRect?(CDataClass.putData(t,"startKind","CRect"),CDataClass.putData(t,"startValue",this.startValue.toData(),{left:0,top:0,right:0,bottom:0},!0)):this.startValue instanceof CNotifyPoint?(CDataClass.putData(t,"startKind","CNotifyPoint"),CDataClass.putData(t,"startValue",this.startValue.toData(),{x:0,y:0},!0)):this.startValue instanceof CNotifyRect?(CDataClass.putData(t,"startKind","CNotifyRect"),CDataClass.putData(t,"startValue",this.startValue.toData(),{left:0,top:0,right:0,bottom:0},!0)):this.startValue instanceof CColorInfo&&(CDataClass.putData(t,"startKind","CColorInfo"),CDataClass.putData(t,"startValue",this.startValue.toData(),{r:255,g:255,b:255,a:1},!0)),"number"==typeof this.stopValue?(CDataClass.putData(t,"stopKind","number"),CDataClass.putData(t,"stopValue",this.stopValue,0)):this.stopValue instanceof CPoint?(CDataClass.putData(t,"stopKind","CPoint"),CDataClass.putData(t,"stopValue",this.stopValue.toData(),{x:0,y:0},!0)):this.stopValue instanceof CRect?(CDataClass.putData(t,"stopKind","CRect"),CDataClass.putData(t,"stopValue",this.stopValue.toData(),{left:0,top:0,right:0,bottom:0},!0)):this.stopValue instanceof CNotifyPoint?(CDataClass.putData(t,"stopKind","CNotifyPoint"),CDataClass.putData(t,"stopValue",this.stopValue.toData(),{x:0,y:0},!0)):this.stopValue instanceof CNotifyRect?(CDataClass.putData(t,"stopKind","CNotifyRect"),CDataClass.putData(t,"stopValue",this.stopValue.toData(),{left:0,top:0,right:0,bottom:0},!0)):this.stopValue instanceof CColorInfo&&(CDataClass.putData(t,"stopKind","CColorInfo"),CDataClass.putData(t,"stopValue",this.stopValue.toData(),{r:255,g:255,b:255,a:1},!0))}doFromData(t){super.doFromData(t),this.name=CDataClass.getData(t,"name","");let e=CDataClass.getData(t,"startKind"),i=CDataClass.getData(t,"stopKind");"number"==e&&(this.startValue=CDataClass.getData(t,"startValue",0)),"CPoint"==e&&(this.startValue=new CPoint,this.startValue.fromData(CDataClass.getData(t,"startValue",{x:0,y:0},!0))),"CRect"==e&&(this.startValue=new CRect,this.startValue.fromData(CDataClass.getData(t,"startValue",{left:0,top:0,right:0,bottom:0},!0))),"CNotifyPoint"==e&&(this.startValue=new CNotifyPoint,this.startValue.fromData(CDataClass.getData(t,"startValue",{x:0,y:0},!0))),"CNotifyRect"==e&&(this.startValue=new CNotifyRect,this.startValue.fromData(CDataClass.getData(t,"startValue",{left:0,top:0,right:0,bottom:0},!0))),"CColorInfo"==e&&(this.startValue=new CColorInfo,this.startValue.fromData(CDataClass.getData(t,"startValue",{r:255,g:255,b:255,a:1},!0))),"number"==i&&(this.stopValue=CDataClass.getData(t,"stopValue",0)),"CPoint"==i&&(this.stopValue=new CPoint,this.stopValue.fromData(CDataClass.getData(t,"stopValue",{x:0,y:0},!0))),"CRect"==i&&(this.stopValue=new CRect,this.stopValue.fromData(CDataClass.getData(t,"stopValue",{left:0,top:0,right:0,bottom:0},!0))),"CNotifyPoint"==i&&(this.stopValue=new CNotifyPoint,this.stopValue.fromData(CDataClass.getData(t,"stopValue",{x:0,y:0},!0))),"CNotifyRect"==i&&(this.stopValue=new CNotifyRect,this.stopValue.fromData(CDataClass.getData(t,"stopValue",{left:0,top:0,right:0,bottom:0},!0))),"CColorInfo"==i&&(this.stopValue=new CColorInfo,this.stopValue.fromData(CDataClass.getData(t,"stopValue",{r:255,g:255,b:255,a:1},!0)))}getValue(t){if("number"==typeof this.startValue&&"number"==typeof this.stopValue)return CCalc.crRange2Value(0,1,t,this.startValue,this.stopValue);if(this.startValue instanceof CPoint&&this.stopValue instanceof CPoint){let e=CCalc.crRange2Value(0,1,t,this.startValue.x,this.stopValue.x),i=CCalc.crRange2Value(0,1,t,this.startValue.y,this.stopValue.y);return CPoint.create(e,i)}if(this.startValue instanceof CNotifyPoint&&this.stopValue instanceof CNotifyPoint){let e=CCalc.crRange2Value(0,1,t,this.startValue.x,this.stopValue.x),i=CCalc.crRange2Value(0,1,t,this.startValue.y,this.stopValue.y);return CNotifyPoint.create(e,i)}if(this.startValue instanceof CRect&&this.stopValue instanceof CRect){let e=CCalc.crRange2Value(0,1,t,this.startValue.left,this.stopValue.left),i=CCalc.crRange2Value(0,1,t,this.startValue.top,this.stopValue.top),s=CCalc.crRange2Value(0,1,t,this.startValue.right,this.stopValue.right),a=CCalc.crRange2Value(0,1,t,this.startValue.bottom,this.stopValue.bottom);return CRect.create(e,i,s,a)}if(this.startValue instanceof CNotifyRect&&this.stopValue instanceof CNotifyRect){let e=CCalc.crRange2Value(0,1,t,this.startValue.left,this.stopValue.left),i=CCalc.crRange2Value(0,1,t,this.startValue.top,this.stopValue.top),s=CCalc.crRange2Value(0,1,t,this.startValue.right,this.stopValue.right),a=CCalc.crRange2Value(0,1,t,this.startValue.bottom,this.stopValue.bottom);return new CNotifyRect(e,i,s,a)}if(this.startValue instanceof CColorInfo&&this.stopValue instanceof CColorInfo){let e=CCalc.crRange2Value(0,1,t,this.startValue.r,this.stopValue.r),i=CCalc.crRange2Value(0,1,t,this.startValue.g,this.stopValue.g),s=CCalc.crRange2Value(0,1,t,this.startValue.b,this.stopValue.b),a=CCalc.crRange2Value(0,1,t,this.startValue.a,this.stopValue.a);return new CColorInfo(e,i,s,a)}}static graphValueToData(t){return"number"==typeof t?{kind:"number",value:t}:t instanceof CPoint?{kind:"CPoint",value:t.toData()}:t instanceof CRect?{kind:"CRect",value:t.toData()}:t instanceof CNotifyPoint?{kind:"CNotifyPoint",value:t.toData()}:t instanceof CNotifyRect?{kind:"CNotifyRect",value:t.toData()}:t instanceof CColorInfo?{kind:"CColorInfo",value:t.toData()}:void 0}static graphValueFromData(t){if("number"==t.kind)return t.value;if("CPoint"==t.kind){let e=new CPoint;return e.fromData(t.value),e}if("CRect"==t.kind){let e=new CRect;return e.fromData(t.value),e}if("CNotifyPoint"==t.kind){let e=new CNotifyPoint;return e.fromData(t.value),e}if("CNotifyRect"==t.kind){let e=new CNotifyRect;return e.fromData(t.value),e}{let e=new CColorInfo;return e.fromData(t.valeu),e}}}class CPointsAnimationValue extends CDataClass{constructor(t,e,i,s){super(),this.name=t,this.pointsArea=e,this.rectWidth=i,this.rectHeight=s}doToData(t){super.doToData(t),CDataClass.putData(t,"name",this.name,""),CDataClass.putData(t,"pointsArea",this.pointsArea.toData(),{left:0,top:0,right:0,bottom:0},!0),CDataClass.putData(t,"rectWidth",this.rectWidth,void 0),CDataClass.putData(t,"rectHeight",this.rectHeight,void 0)}doFromData(t){super.doFromData(t),this.name=CDataClass.getData(t,"name",""),this.pointsArea.fromData(CDataClass.getData(t,"pointsArea",{left:0,top:0,right:0,bottom:0},!0)),this.rectWidth=CDataClass.getData(t,"rectWidth",void 0),this.rectHeight=CDataClass.getData(t,"rectHeight",void 0)}getPointValue(t,e){if(e==EPointsValueKind.POINT){let e=CCalc.crRange2Value(0,1,t.x,this.pointsArea.left,this.pointsArea.right),i=CCalc.crRange2Value(0,1,t.y,this.pointsArea.top,this.pointsArea.bottom);return CPoint.create(e,i)}if(e==EPointsValueKind.RECT&&null!=this.rectWidth&&null!=this.rectHeight){let e=new CRect;return e.left=CCalc.crRange2Value(0,1,t.x,this.pointsArea.left,this.pointsArea.right),e.top=CCalc.crRange2Value(0,1,t.y,this.pointsArea.top,this.pointsArea.bottom),e.width=this.rectWidth,e.height=this.rectHeight,e}if(e==EPointsValueKind.NOTIFYRECT&&null!=this.rectWidth&&null!=this.rectHeight){let e=new CNotifyRect;return e.left=CCalc.crRange2Value(0,1,t.x,this.pointsArea.left,this.pointsArea.right),e.top=CCalc.crRange2Value(0,1,t.y,this.pointsArea.top,this.pointsArea.bottom),e.width=this.rectWidth,e.height=this.rectHeight,e}}}class CProperty extends CDataClass{get property(){return new Function("obj","return obj."+this.properties)(this.obj)}set property(t){let e=this.properties.split("."),i="";for(let t=0;t<e.length;t++){if(i+="."+e[t],new Function("obj","return obj"+i+" == undefined")(this.obj))return}new Function("obj","v","if(obj."+this.properties+" != undefined) obj."+this.properties+" = v")(this.obj,t)}constructor(t,e){super(),this.properties="",this.obj=t,this.properties=e}doToData(t){super.doToData(t),CDataClass.putData(t,"properties",this.properties,"")}doFromData(t){super.doFromData(t),this.properties=CDataClass.getData(t,"properties","")}static getProperty(t,e){return new Function("obj","return obj."+e)(t)}static setProperty(t,e,i){new Function("obj","v","obj."+e+" = v")(t,i)}}class CAnimatorSetProperty extends CProperty{constructor(t,e,i){super(t,e),this.value=i}doToData(t){super.doToData(t),CDataClass.putData(t,"value",this.value)}doFromData(t){super.doFromData(t),this.value=CDataClass.getData(t,"changeValue")}}class CAnimatorGraphProperty extends CProperty{constructor(t,e,i,s,a){super(t,e),this.changeValue=new CGraphAnimationValue(i,s,a)}doToData(t){super.doToData(t),CDataClass.putData(t,"changeValue",this.changeValue.toData())}doFromData(t){super.doFromData(t),this.changeValue.fromData(CDataClass.getData(t,"changeValue"))}}class CAnimatorPointsProperty extends CProperty{constructor(t,e,i,s,a,o){super(t,e),this.changeValue=new CPointsAnimationValue(i,s,a,o)}doToData(t){super.doToData(t),CDataClass.putData(t,"changeValue",this.changeValue)}doFromData(t){super.doFromData(t),this.changeValue.fromData(CDataClass.getData(t,"changeValue"))}}class CAnimator extends CGraphAnimation{get parent(){return this._parent}set parent(t){this._parent=t;for(let e=0;e<this._graphProperties.length;e++)this._graphProperties[e].obj=t;for(let e=0;e<this._pointsProperties.length;e++)this._pointsProperties[e].obj=t}get beforeProperties(){return this._beforeProperties}set beforeProperties(t){this._beforeProperties=t}get graphProperties(){return this._graphProperties}get pointsProperties(){return this._pointsProperties}get afterProperties(){return this._afterProperties}set afterProperties(t){this._afterProperties=t}constructor(t,e=[],i,s,a,o){super(e,i,s,a,o),this._beforeProperties=new Array,this._graphProperties=new Array,this._pointsProperties=new Array,this._afterProperties=new Array,this.beforeScript="//parameter : animator, params",this.animationScript="//parameter : animator, params, graphName, graphValue",this.afterScript="//parameter : animator, params",this._parent=t}doToData(t){super.doToData(t);let e=new Array;for(let t=0;t<this._graphProperties.length;t++)e.push(this._graphProperties[t].toData());let i=new Array;for(let t=0;t<this._pointsProperties.length;t++)i.push(this._pointsProperties[t].toData());CDataClass.putData(t,"className",this.className),CDataClass.putData(t,"beforeProperties",this.beforeProperties,[],!0),CDataClass.putData(t,"graphProperties",e,[],!0),CDataClass.putData(t,"pointsProperties",i,[],!0),CDataClass.putData(t,"afterProperties",this.afterProperties,[],!0),CDataClass.putData(t,"beforeScript",this.beforeScript,"//parameter : animator, params"),CDataClass.putData(t,"animationScript",this.animationScript,"//parameter : animator, params, graphName, graphValue"),CDataClass.putData(t,"afterScript",this.afterScript,"//parameter : animator, params")}doFromData(t){super.doFromData(t),this.beforeProperties=CDataClass.getData(t,"beforeProperties",[],!0),this._graphProperties=[];let e=CDataClass.getData(t,"graphProperties",[],!0);for(let t=0;t<e.length;t++){let i=new CAnimatorGraphProperty(this._parent,"","",0,0);i.fromData(e[t]),this._graphProperties.push(i)}this._pointsProperties=[],e=CDataClass.getData(t,"pointsProperties",[],!0);for(let t=0;t<e.length;t++){let i=new CAnimatorPointsProperty(this._parent,"","",new CRect);i.fromData(e[t]),this._pointsProperties.push(i)}this.afterProperties=CDataClass.getData(t,"afterProperties",[],!0),this.beforeScript=CDataClass.getData(t,"beforeScript","//parameter : animator, params"),this.animationScript=CDataClass.getData(t,"animationScript","//parameter : animator, params, graphName, graphValue"),this.afterScript=CDataClass.getData(t,"afterScript","//parameter : animator, params")}doRemove(){this.parent=void 0,this._beforeProperties=[],this._afterProperties=[],this._pointsProperties=[],this._graphProperties=[],this.__obj={},super.doRemove()}doBeforeAnimation(){super.doBeforeAnimation();for(let t=0;t<this._beforeProperties.length;t++)this._beforeProperties[t].property=this._beforeProperties[t].value;if("//parameter : animator, params"!=this.animationScript){this.__obj={},new Function("animator","params",this.beforeScript)(this,this.__obj)}}doAfterAnimation(){super.doAfterAnimation();for(let t=0;t<this._afterProperties.length;t++)this._afterProperties[t].property=this._afterProperties[t].value;if("//parameter : animator, params"!=this.animationScript){new Function("animator","params",this.afterScript)(this,this.__obj)}this.__obj={}}doGraphAnimate(t,e,i,s,a){super.doGraphAnimate(t,e,i,s,a);for(let t=0;t<this._graphProperties.length;t++){let e=this._graphProperties[t].changeValue;if(e.name==s){let i=e.getValue(a);null!=i&&(this._graphProperties[t].property=i instanceof CColorInfo?i.toColor():i)}}if("//parameter : animator, params, graphName, graphValue"!=this.animationScript){new Function("animator","params","graphName","graphValue",this.animationScript)(this,this.__obj,s,a)}}doPointsAnimate(t,e,i,s,a){super.doPointsAnimate(t,e,i,s,a);for(let t=0;t<this._pointsProperties.length;t++){let e=this._pointsProperties[t].changeValue;if(e.name==s){if(this._pointsProperties[t].property instanceof CRect){let i=e.getPointValue(a,EPointsValueKind.RECT);null!=i&&(this._pointsProperties[t].property=i)}if(this._pointsProperties[t].property instanceof CPoint){let i=e.getPointValue(a,EPointsValueKind.POINT);null!=i&&(this._pointsProperties[t].property=i)}if(this._pointsProperties[t].property instanceof CNotifyRect){let i=e.getPointValue(a,EPointsValueKind.NOTIFYRECT);null!=i&&(this._pointsProperties[t].property=i)}}}}addBeforeSetProperty(t,e){let i=new CAnimatorSetProperty(this._parent,t,e);this._beforeProperties.push(i)}addAnimationGraphProperty(t,e,i,s){let a=new CAnimatorGraphProperty(this._parent,t,e,i,s);this._graphProperties.push(a)}addAnimationPointsProperty(t,e,i,s,a){let o=new CAnimatorPointsProperty(this._parent,t,e,i,s,a);this._pointsProperties.push(o)}addAfterSetProperty(t,e){let i=new CAnimatorSetProperty(this._parent,t,e);this._afterProperties.push(i)}static fromAnimatorData(t,e,i){let s=CDataClass.getData(t,i,void 0);null!=s&&(null==e[i]&&(null==s.className||"CAnimator"==s.className?e[i]=new CAnimator(e):"CResourceAnimator"==s.className?e[i]=new CResourceAnimator(e):"CCopyCanvasAnimator"==s.className&&(e[i]=new CCopyCanvasAnimator(e))),e[i].fromData(s))}static animatorFromResource(t,e){let i=CSystem.resources.get(e);if(null!=i&&null!=i.className){let s=new Function("return new "+i.className+"()")();return s.resource=e,s.parent=t,s}}}class CResourceAnimator extends CAnimator{constructor(t,e,i,s,a,o,n){super(void 0,i,s,a,o,n),this.controlResource=t,this.parentControlName=e}doToData(t){super.doToData(t),CDataClass.putData(t,"controlResource",this.controlResource,""),CDataClass.putData(t,"parentControlName",this.parentControlName,void 0)}doFromData(t){super.doFromData(t),this.controlResource=CDataClass.getData(t,"controlResource",""),this.parentControlName=CDataClass.getData(t,"parentControlName",void 0)}doAfterAnimation(){super.doAfterAnimation(),this.parent.remove(),this.parent=void 0}start(){let t=CControl.controlFromResource(this.controlResource);if(t.hasPointerEvent=!1,null==this.parentControlName)t.parent=document.body;else{let e=CControl.getControl(this.parentControlName);e.length>0&&(t.parent=e[0])}t.position.left=0,t.position.top=0,t.position.width=t.parent.position.width,t.position.height=t.parent.position.height;let e=new CAnimator(void 0);e.fromData(this.toData()),e.parent=t,e.onAfterAnimation=function(){t.remove(),e.remove()},e.start()}}class CCopyCanvasAnimator extends CAnimator{start(){let t=new CCanvasLayerControl(this.parent);t.hasPointerEvent=!1,t.layers.fromData(this.parent.layers.toData()),t.position.left=0,t.position.top=0,t.position.width=this.parent.position.width,t.position.height=this.parent.position.height;let e=new CAnimator(void 0);e.fromData(this.toData()),e.parent=t;let i=this;e.onAfterAnimation=function(){t.remove(),e.remove(),null!=i.onAfterAnimation&&i.onAfterAnimation(i)},e.start()}}class CAsmStream{constructor(t,e=0){this._position=0,this._mem=new Uint8Array(t.memory.buffer),this._view=new DataView(this._mem.buffer,0),this._startOffset=e,this._size=0}get position(){return this._position}set position(t){this._position=t}get view(){return this._view}get size(){return this._size}getRealPosition(){return this._startOffset+this._position}first(){this._position=0}putString(t){let e=(new TextEncoder).encode(t);this._view.setInt32(this.getRealPosition(),e.byteLength,!0);this._position;this._position+=4;for(let t=0;t<e.byteLength;t++)this._mem[this.getRealPosition()]=e[t],this._position++;this._size+=e.byteLength+4}getString(){let t=this._view.getInt32(this.getRealPosition(),!0);this._position+=4;let e=new Uint8Array(t);for(let i=0;i<t;i++)e[i]=this._mem[this.getRealPosition()],this._position++;return new TextDecoder("utf-8").decode(e)}putInt8(t){this._view.setInt8(this.getRealPosition(),t),this._position+=1,this._size+=1}getInt8(){let t=this._view.getInt8(this.getRealPosition());return this._position+=1,t}putInt16(t){this._view.setInt16(this.getRealPosition(),t,!0),this._position+=2,this._size+=2}getInt16(){let t=this._view.getInt16(this.getRealPosition(),!0);return this._position+=2,t}putInt32(t){this._view.setInt32(this.getRealPosition(),t,!0),this._position+=4,this._size+=4}getInt32(){let t=this._view.getInt32(this.getRealPosition(),!0);return this._position+=4,t}putNumber(t){this._view.setFloat64(this.getRealPosition(),t,!0),this._position+=8,this._size+=8}getNumber(){let t=this._view.getFloat64(this.getRealPosition(),!0);return this._position+=8,t}putUInt8(t){this._view.setUint8(this.getRealPosition(),t),this._position+=1,this._size+=1}getUInt8(){let t=this._view.getUint8(this.getRealPosition());return this._position+=1,t}putUInt16(t){this._view.setUint16(this.getRealPosition(),t,!0),this._position+=2,this._size+=2}getUInt16(){let t=this._view.getUint16(this.getRealPosition(),!0);return this._position+=2,t}putUInt32(t){this._view.setUint32(this.getRealPosition(),t,!0),this._position+=4,this._size+=4}getUInt32(){let t=this._view.getUint32(this.getRealPosition(),!0);return this._position+=4,t}}function loadAnimationAssembly(){WebAssembly.instantiate(CByte.base64ToBuffer("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fiAvQv////8Pg3whMCAwQv////8HfCEwIC9CIIghLyAwQiCIITAgLCAtfiAvfCAwfAwAC0IBfSExAn8jGSESIA4hEyASIBNqQcAAagwACyEUAn4jGCEyIB0hMyAyQv////8PgyE0IDNC/////w+DITUgMkIgiCE2IDNCIIghNyA0IDV+ITggNiA1fiA4QiCIfCE5IDQgN34gOUL/////D4N8ITogOkL/////B3whOiA5QiCIITkgOkIgiCE6IDYgN34gOXwgOnwMAAtCAXwhOyAxIDt9ITwgAyAnIBEgMSAUIDwgBBByDAALIRUgACACQQF0aiAVIAJrIxoQcyEVIBUgAmoPCwgAIAAQ8wEPCxEAIAAgATYCACAAIAFBABA1CxEAIAAgATYCBCAAIAFBABA1CwcAIAAoAgALBwAgACgCBAsRACAAIAE2AgAgACABQQAQNQsJACAAIAE2AgQLEQAgACABNgIIIAAgAUEAEDULCQAgACABNgIMCwkAIAAgATYCEAsJACAAIAE2AhQLpwECAX4Bf0EAGkEAGkEBGkEIQQRGGkEIQQhGGgJ/IAC9IQFBAEGxz9myAWpBCGohAiACIAGnQb3cypV8bGohAiACQRF3Qa/W074CbCECIAIgAUIgiKdBvdzKlXxsaiECIAJBEXdBr9bTvgJsIQIgAiACQQ92cyECIAJB95Svr3hsIQIgAiACQQ12cyECIAJBvdzKlXxsIQIgAiACQRB2cyECIAIMAAsPCwcAIAAoAgALBwAgACgCBAsHACAAKAIQCwcAIAArAwALCQAgACABOQMICwcAIAAoAhALBwAgACgCDAsHACAAKAIUCwcAIAAoAggLCQAgACABOQMACwcAIAArAwgLCQAgACABNgIQC0oCA34DfyABIABrQQFqrSEFIAMgAEEBdGshCCACIAhqIQkgBCAIakEBaiEKIAmtQh6GIAWAIQYgCq1CHoYgBYAhByAGIAeFp2cPCwcAIAAoAgALHQEBfCACIAChIAEgAKGjIQUgBCADoSAFoiADoA8LBwAgACgCBAtMAQF/QeCu4gQgABAWQbCw4gQgABAWQYC14gQgABAWQeDR4gQgABAWQaCt4gQgABAWQcC04gQgABAWQeC94gQgABAWQYDG4gQgABAWCxsBAX8gACABEJMBIAAoAgAiAgRAIAIgARAWCwsDAAEL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ADMAMQAzADIAMwAzADMANAAzADUAMwA2ADMANwAzADgAMwA5ADMAYQAzAGIAMwBjADMAZAAzAGUAMwBmADQAMAA0ADEANAAyADQAMwA0ADQANAA1ADQANgA0ADcANAA4ADQAOQA0AGEANABiADQAYwA0AGQANABlADQAZgA1ADAANQAxADUAMgA1ADMANQA0ADUANQA1ADYANQA3ADUAOAA1ADkANQBhADUAYgA1AGMANQBkADUAZQA1AGYANgAwADYAMQA2ADIANgAzADYANAA2ADUANgA2ADYANwA2ADgANgA5ADYAYQA2AGIANgBjADYAZAA2AGUANgBmADcAMAA3ADEANwAyADcAMwA3ADQANwA1ADcANgA3ADcANwA4ADcAOQA3AGEANwBiADcAYwA3AGQANwBlADcAZgA4ADAAOAAxADgAMgA4ADMAOAA0ADgANQA4ADYAOAA3ADgAOAA4ADkAOABhADgAYgA4AGMAOABkADgAZQA4AGYAOQAwADkAMQA5ADIAOQAzADkANAA5ADUAOQA2ADkANwA5ADgAOQA5ADkAYQA5AGIAOQBjADkAZAA5AGUAOQBmAGEAMABhADEAYQAyAGEAMwBhADQAYQA1AGEANgBhADcAYQA4AGEAOQBhAGEAYQBiAGEAYwBhAGQAYQBlAGEAZgBiADAAYgAxAGIAMgBiADMAYgA0AGIANQBiADYAYgA3AGIAOABiADkAYgBhAGIAYgBiAGMAYgBkAGIAZQBiAGYAYwAwAGMAMQBjADIAYwAzAGMANABjADUAYwA2AGMANwBjADgAYwA5AGMAYQBjAGIAYwBjAGMAZABjAGUAYwBmAGQAMABkADEAZAAyAGQAMwBkADQAZAA1AGQANgBkADcAZAA4AGQAOQBkAGEAZABiAGQAYwBkAGQAZABlAGQAZgBlADAAZQAxAGUAMgBlADMAZQA0AGUANQBlADYAZQA3AGUAOABlADkAZQBhAGUAYgBlAGMAZQBkAGUAZQBlAGYAZgAwAGYAMQBmADIAZgAzAGYANABmADUAZgA2AGYANwBmADgAZgA5AGYAYQBmAGIAZgBjAGYAZABmAGUAZgBmAAAAAAAAAAAAAAAAAABB7MXiBAtgXAAAAAAAAAAAAAAAAgAAAEgAAAAwADEAMgAzADQANQA2ADcAOAA5AGEAYgBjAGQAZQBm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"),{asm:{js:t=>{let e=new CAsmStream(CAssembly.asm,t).getString();new Function(e)()}},env:{abort(t,e,i,s){console.error("abort called "+i+":"+s)}}}).then(t=>{CAssembly.asm=t.instance.exports}).catch(console.error)}class CAssembly{static getBezierGraphValue(t,e,i,s,a,o,n){let r=new CAsmStream(CAssembly.asm,0);t.putStream(r),r.putNumber(e),r.putNumber(i),r.putNumber(s),r.putNumber(a),r.putNumber(o),r.putNumber(n),CAssembly.asm.getBezierGraphValue();let A=new CAsmStream(CAssembly.asm,0);if("error"==A.getString())return A.getString();{let t=A.getNumber(),e=new Array;for(let i=0;i<t;i++)e.push(A.getNumber());return e}}static getBezierPoints(t,e){let i=new CAsmStream(CAssembly.asm,0);t.putStream(i),i.putNumber(e),CAssembly.asm.getBezierPoints();let s=new CAsmStream(CAssembly.asm,0);if("error"==s.getString())return s.getString();{let t=s.getNumber(),e=new Array;for(let i=0;i<t;i++){let t=new CPoint;t.x=s.getNumber(),t.y=s.getNumber(),e.push(t)}return e}}}loadAnimationAssembly();class CSceneAnimation extends CResourceClass{constructor(){super(...arguments),this.__startTime=0,this._timeSections=new CList,this.time=new CTime,this.duration=1e3,this.startTimeSpeed=1,this.stopTimeSpeed=1}get timeSections(){return this._timeSections}doRemove(){this._timeSections.clear(),this.time.remove(),super.doRemove()}doTick(t,e,i,s,a){null!=this.onTick&&this.onTick(this,t,e,i,s,a)}doBeforeStart(){null!=this.onBeforeStart&&this.onBeforeStart(this)}doFinish(){null!=this.onFinish&&this.onFinish(this)}doStart(){let t=this,e=CTime.now;this.time.time=e,this.time.clearTimeSection();for(let i=0;i<this._timeSections.length;i++){let s=new CTimeSection(this.time),a=this._timeSections.get(i).graphNameOrData;if("string"==typeof a){let t=CSystem.resources.get(a);s.values=t}else s.values=a;s.startTime=e+this._timeSections.get(i).startTime,s.stopTime=e+this._timeSections.get(i).startTime+this._timeSections.get(i).duration,s.isLoop=this._timeSections.get(i).isLoop;let o=this._timeSections.get(i).sectionName;s.onTick=function(e,i,a,n){if(null!=a){let e=s.values[Math.round(CCalc.cr(s.values.length-1,0,1,n,2))];t.doTick(o,i,a,n,e)}}}let i=!1;this.time.onChangeTime=function(){if(this.time>t.__startTime+t.duration&&(i?(CTime.times.delete(t.time),t.doFinish()):i=!0),null!=t.timeSpeedGraphData){let e=CCalc.crRange2Value(t.__startTime,t.__startTime+t.duration,t.time.time,0,t.timeSpeedGraphData.length-1),i=Math.round(e);e=i>t.timeSpeedGraphData.length-1?t.timeSpeedGraphData.length-1:i,t.time.speed=t.startTimeSpeed+(t.stopTimeSpeed-t.startTimeSpeed)*t.timeSpeedGraphData[e]}},this.__startTime=e,CTime.times.add(CSequence.getSequence("tempAnimation"),this.time)}start(){this.doBeforeStart(),this.doStart()}addSection(t,e,i,s,a=!1){this._timeSections.add({sectionName:t,graphNameOrData:e,startTime:i,duration:s,isLoop:a})}moveTime(t){let e=this,i=CTime.now;this.time.time=i,this.time.clearTimeSection();for(let t=0;t<this._timeSections.length;t++){let s=new CTimeSection(this.time),a=this._timeSections.get(t).graphNameOrData;if("string"==typeof a){let t=CSystem.resources.get(a);s.values=t}else s.values=a;s.startTime=i+this._timeSections.get(t).startTime,s.stopTime=i+this._timeSections.get(t).startTime+this._timeSections.get(t).duration;let o=this._timeSections.get(t).sectionName;s.onTick=function(t,i,a,n){null!=a&&e.doTick(o,i,a,n,s.values[Math.round(CCalc.cr(s.values.length-1,0,1,n,2))])}}for(let e=0;e<this.time.timeSections.length;e++){let s=this.time.timeSections[e],a=i+t;s.startTime<=a&&s.stopTime>a?s.doTick(a-1,a,CCalc.crRange2Value(s.startTime,s.stopTime,a,0,1)):s.startTime>a?s.doTick(a-1,a,0):s.doTick(a-1,a,1)}}}class CSceneAnimator extends CSceneAnimation{constructor(){super(...arguments),this.__sections=new Map}doRemove(){this.__sections.clear(),this.animationControl=void 0,super.doRemove()}doBeforeStart(){if(null!=this.animationControl){this.timeSections.clear(),this.__sections.clear();let t=this.animationControl.sceneData;for(let e=0;e<t.sections.length;e++)t.sections.get(e).control=this.animationControl.getObject(t.sections.get(e).controlName),delete t.sections.get(e).__lastSet,this.addSection(t.sections.get(e).controlName+"."+t.sections.get(e).property+e,t.sections.get(e).graphData,t.sections.get(e).startTime,t.sections.get(e).duration,t.sections.get(e).isLoop),this.__sections.set(t.sections.get(e).controlName+"."+t.sections.get(e).property+e,t.sections.get(e))}super.doBeforeStart()}doTick(t,e,i,s,a){if(null!=this.animationControl){let e=this.__sections.get(t);null!=e&&this.setObjects(t,i-this.__startTime,a,e)}super.doTick(t,e,i,s,a)}setObjects(t,e,i,s){if(null!=s.control)if(s.property.indexOf("script")>=0){new Function("animationControl","sectionName","workingTime","graphValue","info","control",s.script)(this.animationControl,t,e,i,s,s.control)}else{if("number"==typeof s.startValue&&"number"==typeof s.stopValue)s.property.indexOf("position.left")>=0||s.property.indexOf("position.width")>=0||s.property.indexOf("transform.translateX")>=0?new Function("c","c."+s.property+" = "+this.getValue("x",CCalc.crRange2Value(0,1,i,s.startValue,s.stopValue)))(s.control):s.property.indexOf("position.top")>=0||s.property.indexOf("position.height")>=0||s.property.indexOf("transform.translateY")>=0?new Function("c","c."+s.property+" = "+this.getValue("y",CCalc.crRange2Value(0,1,i,s.startValue,s.stopValue)))(s.control):new Function("c","c."+s.property+" = "+CCalc.crRange2Value(0,1,i,s.startValue,s.stopValue))(s.control);else if(s.startValue instanceof CPoint&&s.stopValue instanceof CPoint)new Function("c","c."+s.property+".x = "+CCalc.crRange2Value(0,1,i,s.startValue.x,s.stopValue.x)+";c."+s.property+".y = "+CCalc.crRange2Value(0,1,i,s.startValue.y,s.stopValue.y)+";")(s.control);else if(s.startValue instanceof CRect&&s.stopValue instanceof CRect)new Function("c","c."+s.property+".left = "+CCalc.crRange2Value(0,1,i,s.startValue.left,s.stopValue.left)+";c."+s.property+".top = "+CCalc.crRange2Value(0,1,i,s.startValue.top,s.stopValue.top)+";c."+s.property+".right = "+CCalc.crRange2Value(0,1,i,s.startValue.right,s.stopValue.right)+";c."+s.property+".bottom = "+CCalc.crRange2Value(0,1,i,s.startValue.bottom,s.stopValue.bottom)+";")(s.control);else if(s.startValue instanceof CNotifyPoint&&s.stopValue instanceof CNotifyPoint)new Function("c","c."+s.property+".x = "+CCalc.crRange2Value(0,1,i,s.startValue.x,s.stopValue.x)+";c."+s.property+".y = "+CCalc.crRange2Value(0,1,i,s.startValue.y,s.stopValue.y)+";")(s.control);else if(s.startValue instanceof CNotifyRect&&s.stopValue instanceof CNotifyRect)new Function("c","c."+s.property+".left = "+CCalc.crRange2Value(0,1,i,s.startValue.left,s.stopValue.left)+";c."+s.property+".top = "+CCalc.crRange2Value(0,1,i,s.startValue.top,s.stopValue.top)+";c."+s.property+".right = "+CCalc.crRange2Value(0,1,i,s.startValue.right,s.stopValue.right)+";c."+s.property+".bottom = "+CCalc.crRange2Value(0,1,i,s.startValue.bottom,s.stopValue.bottom)+";")(s.control);else if(s.startValue instanceof CColorInfo&&s.stopValue instanceof CColorInfo){let t="rgba("+CCalc.crRange2Value(0,1,i,s.startValue.r,s.stopValue.r)+","+CCalc.crRange2Value(0,1,i,s.startValue.g,s.stopValue.g)+","+CCalc.crRange2Value(0,1,i,s.startValue.b,s.stopValue.b)+","+CCalc.crRange2Value(0,1,i,s.startValue.a,s.stopValue.a)+")";new Function("c","c."+s.property+' = "'+t+'";')(s.control)}if(s.objectData.length>0)if(s.objectData.get(s.objectData.length-1).sectionT<i&&null==s.__lastSet)s.control.opacity=s.objectData.get(s.objectData.length-1).info.opacity,0==s.positionPoints.length&&(s.control.position.left=this.getValue("x",s.objectData.get(s.objectData.length-1).info.position.left),s.control.position.top=this.getValue("y",s.objectData.get(s.objectData.length-1).info.position.top)),s.control.position.width=this.getValue("x",s.objectData.get(s.objectData.length-1).info.position.width),s.control.position.height=this.getValue("y",s.objectData.get(s.objectData.length-1).info.position.height),s.control.transform.rotateX=s.objectData.get(s.objectData.length-1).info.transform.rotateX,s.control.transform.rotateY=s.objectData.get(s.objectData.length-1).info.transform.rotateY,s.control.transform.rotateZ=s.objectData.get(s.objectData.length-1).info.transform.rotateZ,s.control.transform.translateX=this.getValue("x",s.objectData.get(s.objectData.length-1).info.transform.translateX),s.control.transform.translateY=this.getValue("y",s.objectData.get(s.objectData.length-1).info.transform.translateY),s.control.transform.translateZ=s.objectData.get(s.objectData.length-1).info.transform.translateZ,s.control.transform.scaleX=s.objectData.get(s.objectData.length-1).info.transform.scaleX,s.control.transform.scaleY=s.objectData.get(s.objectData.length-1).info.transform.scaleY,s.control.transform.scaleZ=s.objectData.get(s.objectData.length-1).info.transform.scaleZ,s.control.transform.rotationPointX=s.objectData.get(s.objectData.length-1).info.transform.rotationPointX,s.control.transform.rotationPointY=s.objectData.get(s.objectData.length-1).info.transform.rotationPointY,s.control.transform.rotationPointZ=s.objectData.get(s.objectData.length-1).info.transform.rotationPointZ,s.control.filter.blurValue=s.objectData.get(s.objectData.length-1).info.filter.blurValue,s.control.filter.brightnessValue=s.objectData.get(s.objectData.length-1).info.filter.brightnessValue,s.control.filter.constrastValue=s.objectData.get(s.objectData.length-1).info.filter.constrastValue,s.control.filter.grayscaleValue=s.objectData.get(s.objectData.length-1).info.filter.grayscaleValue,s.control.filter.hueRotateValue=s.objectData.get(s.objectData.length-1).info.filter.hueRotateValue,s.control.filter.invertValue=s.objectData.get(s.objectData.length-1).info.filter.invertValue,s.control.filter.opacityValue=s.objectData.get(s.objectData.length-1).info.filter.opacityValue,s.control.filter.shadowBlur=s.objectData.get(s.objectData.length-1).info.filter.shadowBlur,s.control.filter.filterSet.shadow&&(s.control.filter.shadowColor=s.objectData.get(s.objectData.length-1).info.filter.shadowColor),s.control.filter.shadowX=this.getValue("x",s.objectData.get(s.objectData.length-1).info.filter.shadowX),s.control.filter.shadowY=this.getValue("y",s.objectData.get(s.objectData.length-1).info.filter.shadowY),CCanvasLayers.setLayersMiddlePathData(s.objectData.get(s.objectData.length-1).info.layers,s.objectData.get(s.objectData.length-1).info.layers,s.control.layers,1),s.__lastSet=!0;else{let t,e,a=0,o=-1;if(i>0)for(let t=0;t<s.objectData.length;t++){if(a<i&&i<=s.objectData.get(t).sectionT){o=t;break}a=s.objectData.get(t).sectionT}if(-1!=o&&(e=s.objectData.get(o),o>0&&(t=s.objectData.get(o-1))),null==t&&((t=s.objectData.get(0)).sectionT=0),null!=e){if(s.control.opacity=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.opacity,e.info.opacity),0==s.positionPoints.length&&(s.control.position.left=this.getValue("x",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.position.left,e.info.position.left)),s.control.position.top=this.getValue("y",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.position.top,e.info.position.top))),s.control.position.width=this.getValue("x",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.position.width,e.info.position.width)),s.control.position.height=this.getValue("y",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.position.height,e.info.position.height)),s.control.transform.rotateX=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.rotateX,e.info.transform.rotateX),s.control.transform.rotateY=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.rotateY,e.info.transform.rotateY),s.control.transform.rotateZ=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.rotateZ,e.info.transform.rotateZ),s.control.transform.translateX=this.getValue("x",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.translateX,e.info.transform.translateX)),s.control.transform.translateY=this.getValue("y",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.translateY,e.info.transform.translateY)),s.control.transform.translateZ=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.translateZ,e.info.transform.translateZ),s.control.transform.scaleX=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.scaleX,e.info.transform.scaleX),s.control.transform.scaleY=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.scaleY,e.info.transform.scaleY),s.control.transform.scaleZ=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.scaleZ,e.info.transform.scaleZ),s.control.transform.rotationPointX=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.rotationPointX,e.info.transform.rotationPointX),s.control.transform.rotationPointY=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.rotationPointY,e.info.transform.rotationPointY),s.control.transform.rotationPointZ=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.transform.rotationPointZ,e.info.transform.rotationPointZ),s.control.filter.blurValue=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.blurValue,e.info.filter.blurValue),s.control.filter.brightnessValue=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.brightnessValue,e.info.filter.brightnessValue),s.control.filter.constrastValue=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.constrastValue,e.info.filter.constrastValue),s.control.filter.grayscaleValue=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.grayscaleValue,e.info.filter.grayscaleValue),s.control.filter.hueRotateValue=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.hueRotateValue,e.info.filter.hueRotateValue),s.control.filter.invertValue=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.invertValue,e.info.filter.invertValue),s.control.filter.opacityValue=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.opacityValue,e.info.filter.opacityValue),s.control.filter.shadowBlur=CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.shadowBlur,e.info.filter.shadowBlur),s.control.filter.filterSet.shadow){let a=new CColor(t.info.filter.shadowColor),o=new CColor(e.info.filter.shadowColor),n=CCalc.crRange2Value(t.sectionT,e.sectionT,i,a.r,o.r),r=CCalc.crRange2Value(t.sectionT,e.sectionT,i,a.g,o.g),A=CCalc.crRange2Value(t.sectionT,e.sectionT,i,a.b,o.b),h=CCalc.crRange2Value(t.sectionT,e.sectionT,i,a.a,o.a);s.control.filter.shadowColor="rgba("+n+","+r+","+A+","+h+")"}s.control.filter.shadowX=this.getValue("x",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.shadowX,e.info.filter.shadowX)),s.control.filter.shadowY=this.getValue("y",CCalc.crRange2Value(t.sectionT,e.sectionT,i,t.info.filter.shadowY,e.info.filter.shadowY)),CCanvasLayers.setLayersMiddlePathData(t.info.layers,e.info.layers,s.control.layers,CCalc.crRange2Value(t.sectionT,e.sectionT,i,0,1))}}if(s.positionPoints.length>0){let t=Math.round(CCalc.crRange2Value(0,1,i,0,s.positionPoints.length-1)),e=s.positionPoints[t];s.control.position.left=this.getValue("x",e.x)-s.control.transform.rotationPointX*s.control.position.width,s.control.position.top=this.getValue("y",e.y)-s.control.transform.rotationPointY*s.control.position.height}}}getValue(t,e){return null!=this.animationControl?"x"==t?e*(this.animationControl.position.width/this.animationControl.orgPosition.width):e*(this.animationControl.position.height/this.animationControl.orgPosition.height):e}}class CObjectPanel extends CPanel{constructor(t,e){super(t,e),this.btnClose=new CButton(this);let i=this;this.btnClose.resource="button_gray_gra.control",this.btnClose.position.align=EPositionAlign.BOTTOM,this.btnClose.position.height=30,this.btnClose.text="Close",this.btnClose.onClick=function(){i.remove(),null!=i.editor&&(i.editor.objectPanel=void 0,i.editor=void 0,i.section=void 0)},this.position.align=EPositionAlign.CLIENT,this.onDoubleClick=function(){let t=CSystem.getChildControls(this);for(let e=0;e<t.length;e++)t[e]instanceof CAnimationControl&&t[e].remove();i.setSection()},this.onClick=function(){i.setSection()}}setObjects(t){if(null!=t.control&&null!=this.editor){this.section=t;for(let e=0;e<t.objectData.length;e++){let i=t.control.copyTo();i.parent=this,CGraphicInfo.setControlGraphicInfo(t.objectData.get(e).info,i),i.sectionT=t.objectData.get(e).sectionT,i.centerX=t.objectData.get(e).centerX,i.centerY=t.objectData.get(e).centerY,0==t.positionPoints.length&&(i.position.left+=this.editor.controlResizer.position.left+10,i.position.top+=this.editor.controlResizer.position.top+20);let s=this.editor;i.onClick=function(){s.properties.clear(),s.properties.addInstance(i);let t=i.centerX+s.controlResizer.position.left+10,e=i.centerY+s.controlResizer.position.top+20;i.position.left=t-i.transform.rotationPointX*i.position.width,i.position.top=e-i.transform.rotationPointY*i.position.height};let a=this;i.onDoubleClick=function(){a.setSection()}}}}setSection(){if(null!=this.editor){let t=new Array,e=CSystem.getChildControls(this);for(let i=0;i<e.length;i++)e[i]instanceof CAnimationControl&&t.push(e[i]);t.sort(function(t,e){let i=0;return t.sectionT<e.sectionT&&(i=-1),t.sectionT>e.sectionT&&(i=1),i});let i=this.editor.getSelectedSection();if(null!=i){i.objectData.clear();for(let e=0;e<t.length;e++){let s=t[e].position.toData();s.left-=this.editor.controlResizer.position.left+10,s.top-=this.editor.controlResizer.position.top+20,i.objectData.add({sectionT:t[e].sectionT,centerX:t[e].centerX,centerY:t[e].centerY,info:CGraphicInfo.controlGraphicInfo(t[e],s)})}}this.editor.refreshGrid()}}}class CAnimationControlSceneEditorModel extends CPanel{constructor(t,e){super(t,e),this.toolbar=new CPanel(this),this.btnShowPositionEditor=new CSelectBox(this.toolbar),this.btnShowObjectEditor=new CSelectBox(this.toolbar),this.btnSave=new CButton(this.toolbar),this.btnOpen=new CButton(this.toolbar),this.lblWidth=new CPanel(this.toolbar),this.edtWidth=new CTextBox(this.toolbar),this.lblHeight=new CPanel(this.toolbar),this.edtHeight=new CTextBox(this.toolbar),this.btnSize=new CButton(this.toolbar),this.lClient=new CPanel(this),this.lCBottom=new CPanel(this.lClient),this.objectsTool=new CWindowChildTool(this),this.lLTop=new CPanel(this.objectsTool.body),this.btnAddObject=new CButton(this.lLTop),this.btnDeleteObject=new CButton(this.lLTop),this.btnAddProperty=new CButton(this.lLTop),this.list=new CObjectTreeListBox(this.objectsTool.body),this.controlResizer=new CPanel(this.lClient),this.con=new CAnimationControl(this.controlResizer),this.transformer=new CCanvasControlTransfomer(this.controlResizer),this.pathEditor=new CPathEditorControl(this.lClient),this.pathEditorToolbar=new CPanel(this.pathEditor),this.btnNone=new CButton(this.pathEditorToolbar),this.btnMoveTo=new CButton(this.pathEditorToolbar),this.btnLineTo=new CButton(this.pathEditorToolbar),this.btnCurveTo=new CButton(this.pathEditorToolbar),this.btnApplyPosition=new CButton(this.pathEditorToolbar),this.btnToolbarClose=new CButton(this.pathEditorToolbar),this.timeAnimationTool=new CWindowChildTool(this),this.lBTopTime=new CPanel(this.timeAnimationTool.body),this.edtTimeFrom=new CTextBox(this.lBTopTime),this.edtTimeTo=new CTextBox(this.lBTopTime),this.edtTime=new CTextBox(this.lBTopTime),this.btnTimeApply=new CButton(this.lBTopTime),this.btnTimeLeft=new CButton(this.lBTopTime),this.btnTimeRight=new CButton(this.lBTopTime),this.scrollTime=new CScrollbar(this.lBTopTime),this.lBTop=new CPanel(this.timeAnimationTool.body),this.btnPropertyUp=new CButton(this.lBTop),this.btnPropertyDown=new CButton(this.lBTop),this.btnDeleteProperty=new CButton(this.lBTop),this.btnGraphEdit=new CButton(this.lBTop),this.btnPositionEdit=new CButton(this.lBTop),this.btnApply=new CButton(this.lBTop),this.btnAnimationSpeedGraph=new CButton(this.lBTop),this.btnStart=new CButton(this.lBTop),this.edtDuration=new CTextBox(this.lBTop),this.lblDuration=new CPanel(this.lBTop),this.lBTop2=new CPanel(this.timeAnimationTool.body),this.lblTag=new CPanel(this.lBTop2),this.btnTagAdd=new CButton(this.lBTop2),this.btnTagDelete=new CButton(this.lBTop2),this.lblObject=new CPanel(this.lBTop2),this.btnObjectDataAdd=new CButton(this.lBTop2),this.btnObjectDataDelete=new CButton(this.lBTop2),this.btnObjectCopy=new CButton(this.lBTop2),this.btnObjectPaste=new CButton(this.lBTop2),this.btnObjectTransformer=new CButton(this.lBTop2),this.timeline=new CDataGrid(this.timeAnimationTool.body),this.timelineScriptTool=new CWindowChildTool(this),this.lTimelineScriptTop=new CPanel(this.timelineScriptTool.body),this.btnTimelineScriptApply=new CButton(this.lTimelineScriptTop),this.txtTimelineScript=new CTextArea(this.timelineScriptTool.body),this.propertyTool=new CWindowChildTool(this),this.properties=new CTabPropertyEditor(this.propertyTool.body),this.frmGraph=new CWindowTool(CSystem.desktopList.get(0).applicationLayer),this.fraGraph=new CGraphEditorFrame(this.frmGraph.body),this.timeSpeedStart=1,this.timeSpeedStop=1,this.startData=new CAnimationControl;let i=this;this.frmGraph.close(),this.con.position.align=EPositionAlign.CLIENT,this.resource="sceneEditor.frame",this.pathEditor.position.align=EPositionAlign.CLIENT,this.pathEditor.pathPointList=this.pathEditor.layers.get(0).items.get(1).pathData,this.fraGraph.resource="graphEditor.frame",this.fraGraph.position.align=EPositionAlign.CLIENT,this.fraGraph.btnApply.onClick=async function(){let t=i.fraGraph.getGraphData();if("string"==typeof t)CSystem.showMessage("에러",t);else{let e=i.getSelectedSection();null!=e&&(e.graphData=t)}},this.properties.onlyShowProperty.push("overflow"),this.properties.onlyShowProperty.push("filter"),this.properties.onlyShowProperty.push("position"),this.properties.onlyShowProperty.push("transform"),this.properties.onlyShowProperty.push("opacity"),this.properties.onlyShowProperty.push("useMove"),this.properties.onlyShowProperty.push("visible"),this.properties.onlyShowProperty.push("propertyName"),this.btnShowPositionEditor.onChangeSelected=function(){},this.btnShowObjectEditor.onChangeSelected=function(){i.btnShowObjectEditor.selected?i.showObjectPanel():null!=i.objectPanel&&(i.objectPanel.remove(),i.objectPanel=void 0)},this.btnOpen.onClick=function(){CSystem.loadFromFile(function(t){t.text().then(function(t){let e=JSON.parse(t);"CAnimationControl"==e.className?i.con.fromData(e):null!=e.control&&(i.con.fromData(e.control),null!=e.position1&&i.objectsTool.position.fromData(e.position1),null!=e.position2&&i.propertyTool.position.fromData(e.position2),null!=e.position3&&i.timeAnimationTool.position.fromData(e.position3),null!=e.position4&&i.controlResizer.position.fromData(e.position4),null!=e.position5&&null!=i.parent&&null!=i.parent.parent&&(i.parent.parent.position.width=e.position5.width,i.parent.parent.position.height=e.position5.height),null!=e.position6&&i.timelineScriptTool.position.fromData(e.position6),null!=e.duration&&(i.edtDuration.text=e.duration,i.edtTimeFrom.text="0",i.edtTimeTo.text=e.duration,i.btnTimeApply.click())),i.con.position.align=EPositionAlign.CLIENT,i.startData.fromData(i.con.toData()),i.refresh(),i.refreshGrid()})})},this.btnSave.onClick=function(){CSystem.prompt("Data save",["File name"],CSystem.browserCovers.get("cover"),function(t){let e;null!=i.parent&&null!=i.parent.parent&&(e=i.parent.parent.position.toData());let s={control:i.con.toData(),position1:i.objectsTool.position.toData(),position2:i.propertyTool.position.toData(),position3:i.timeAnimationTool.position.toData(),position4:i.controlResizer.position.toData(),position5:e,position6:i.timelineScriptTool.position.toData(),duration:i.edtDuration.text};CSystem.saveAsFile(JSON.stringify(s),t[0]+".scene")})},this.btnSize.onClick=function(){let t=parseInt(i.edtWidth.text)+20,e=parseInt(i.edtHeight.text)+30;i.controlResizer.position.width=t,i.controlResizer.position.height=e},this.controlResizer.onChangeSize=function(){i.edtWidth.text=i.controlResizer.position.width-20+"",i.edtHeight.text=i.controlResizer.position.height-30+"",i.startData.position.width=i.controlResizer.position.width-20,i.startData.position.height=i.controlResizer.position.height-30},this.btnAddProperty.onClick=function(){i.doAddSection()},this.btnAddObject.onClick=function(){CSystem.prompt("Add object",["Object name"],CSystem.browserCovers.get("cover"),function(t){CSystem.loadFromFile(function(e){e.text().then(function(e){let s=JSON.parse(e);i.con.objectsCount++,i.con.objects.get(i.con.objectsCount-1).fromData(s),i.con.objects.get(i.con.objectsCount-1).propertyName=t[0],i.con.setObjectIndex(),i.refresh()})})})},this.btnDeleteObject.onClick=function(){if(i.list.selectItems.length>0){let t=i.list.selectItems[0];i.con.deleteObject(t.value.asObject.control),i.con.setObjectIndex(),i.refresh()}},this.btnPropertyUp.onClick=function(){i.doPropertyUp()},this.btnPropertyDown.onClick=function(){i.doPropertyDown()},this.btnDeleteProperty.onClick=function(){i.doDeleteSection()};let s="";this.timeline.onShowEditor=function(t,e,a,o){s=i.timeline.cell(1,a)},this.timeline.onEditorApply=function(t,e,a,o){i.doTimeLineEdit(e,a,s,o)},this.timeline.onSelectItem=function(t,e,s){i.doChangeTimeLineItem(e,s)},this.timeline.onKeyDown=function(t,e){i.doTimeLineKeyDown(e)},this.btnGraphEdit.onClick=function(){i.doGraphEditorShow(!0)},this.btnPositionEdit.onClick=function(){i.doPositionEdit()},this.btnTagAdd.onClick=function(){i.doAddTag()},this.btnTagDelete.onClick=function(){i.doTagDelete()},this.btnObjectDataAdd.onClick=function(){i.doObjectAdd()},this.btnObjectDataDelete.onClick=function(){i.doObjectDelete()},this.btnObjectTransformer.onClick=function(){i.doShowTransformer()},this.btnObjectCopy.onClick=function(){i.doObjectCopy()},this.btnObjectPaste.onClick=function(){i.doObjectPaste()},this.btnTimeApply.onClick=function(){i.scrollTime.min=parseInt(i.edtTimeFrom.text),i.scrollTime.max=parseInt(i.edtTimeTo.text),i.scrollTime.value=parseInt(i.edtTimeFrom.text),i.edtTime.text=i.edtTimeFrom.text},this.scrollTime.onChangeValue=function(){i.edtTime.text=Math.round(i.scrollTime.value)+"",i.doSetTime(Math.round(i.scrollTime.value))},this.edtTime.onKeyDown=function(t,e){"Enter"==e.key&&(i.scrollTime.value=parseInt(i.edtTime.text))},this.btnTimeLeft.onClick=function(){i.scrollTime.value--},this.btnTimeRight.onClick=function(){i.scrollTime.value++},this.list.onSelectItem=function(){i.doSelectItem()},this.btnApply.onClick=function(){null!=i.objectPanel&&i.objectPanel.remove(),i.pathEditor.visible=!1,i.doScene()},this.btnStart.onClick=function(){i.doSetStart()},this.btnAnimationSpeedGraph.onClick=function(){i.doAnimationSpeedGraphEdit()},this.transformer.resource="path_controller.control",this.transformer.position.align=EPositionAlign.CLIENT,this.transformer.visible=!1,this.transformer.onFreeTransformHandleTrack=function(){i.doTransform()},this.objectsTool.showCenter(200,400,"Object info","hide"),this.propertyTool.showCenter(300,300,"Properties","hide"),this.timeAnimationTool.showCenter(850,300,"Section animation info","hide"),this.timelineScriptTool.showCenter(850,300,"Section animation script","hide"),this.properties.tabButtons.visible=!1,this.btnNone.onClick=function(){i.pathEditor.mode="None"},this.btnMoveTo.onClick=function(){i.pathEditor.mode="MoveTo"},this.btnLineTo.onClick=function(){i.pathEditor.mode="LineTo"},this.btnCurveTo.onClick=function(){i.pathEditor.mode="CurveTo"},this.btnApplyPosition.onClick=function(){i.doSetSectionPosition()},this.btnToolbarClose.onClick=function(){i.pathEditor.visible=!1},this.btnTimelineScriptApply.onClick=function(){let t=i.getSelectedSection();null!=t&&(t.script=i.txtTimelineScript.text)},this.properties.editorCover=CSystem.browserCovers.get("cover")}doToData(t){super.doToData(t),CDataClass.putData(t,"toolbar",this.toolbar.toData(),{},!0),CDataClass.putData(t,"btnSave",this.btnSave.toData(),{},!0),CDataClass.putData(t,"btnOpen",this.btnOpen.toData(),{},!0),CDataClass.putData(t,"lblWidth",this.lblWidth.toData(),{},!0),CDataClass.putData(t,"edtWidth",this.edtWidth.toData(),{},!0),CDataClass.putData(t,"lblHeight",this.lblHeight.toData(),{},!0),CDataClass.putData(t,"edtHeight",this.edtHeight.toData(),{},!0),CDataClass.putData(t,"btnSize",this.btnSize.toData(),{},!0),CDataClass.putData(t,"lLTop",this.lLTop.toData(),{},!0),CDataClass.putData(t,"lClient",this.lClient.toData(),{},!0),CDataClass.putData(t,"lBTop",this.lBTop.toData(),{},!0),CDataClass.putData(t,"btnAddObject",this.btnAddObject.toData(),{},!0),CDataClass.putData(t,"btnDeleteObject",this.btnDeleteObject.toData(),{},!0),CDataClass.putData(t,"btnAddProperty",this.btnAddProperty.toData(),{},!0),CDataClass.putData(t,"list",this.list.toData(),{},!0),CDataClass.putData(t,"controlResizer",this.controlResizer.toData(),{},!0),CDataClass.putData(t,"lBTopTime",this.lBTopTime.toData(),{},!0),CDataClass.putData(t,"edtTimeFrom",this.edtTimeFrom.toData(),{},!0),CDataClass.putData(t,"edtTimeTo",this.edtTimeTo.toData(),{},!0),CDataClass.putData(t,"edtTime",this.edtTime.toData(),{},!0),CDataClass.putData(t,"btnTimeApply",this.btnTimeApply.toData(),{},!0),CDataClass.putData(t,"btnTimeLeft",this.btnTimeLeft.toData(),{},!0),CDataClass.putData(t,"btnTimeRight",this.btnTimeRight.toData(),{},!0),CDataClass.putData(t,"scrollTime",this.scrollTime.toData(),{},!0),CDataClass.putData(t,"timeline",this.timeline.toData(),{},!0),CDataClass.putData(t,"btnPropertyUp",this.btnPropertyUp.toData(),{},!0),CDataClass.putData(t,"btnPropertyDown",this.btnPropertyDown.toData(),{},!0),CDataClass.putData(t,"btnDeleteProperty",this.btnDeleteProperty.toData(),{},!0),CDataClass.putData(t,"btnApply",this.btnApply.toData(),{},!0),CDataClass.putData(t,"btnAnimationSpeedGraph",this.btnAnimationSpeedGraph.toData(),{},!0),CDataClass.putData(t,"btnStart",this.btnStart.toData(),{},!0),CDataClass.putData(t,"edtDuration",this.edtDuration.toData(),{},!0),CDataClass.putData(t,"lblDuration",this.lblDuration.toData(),{},!0),CDataClass.putData(t,"lCBottom",this.lCBottom.toData(),{},!0),CDataClass.putData(t,"btnGraphEdit",this.btnGraphEdit.toData(),{},!0),CDataClass.putData(t,"btnPositionEdit",this.btnPositionEdit.toData(),{},!0),CDataClass.putData(t,"lBTop2",this.lBTop2.toData(),{},!0),CDataClass.putData(t,"lblTag",this.lblTag.toData(),{},!0),CDataClass.putData(t,"btnTagAdd",this.btnTagAdd.toData(),{},!0),CDataClass.putData(t,"btnTagDelete",this.btnTagDelete.toData(),{},!0),CDataClass.putData(t,"lblObject",this.lblObject.toData(),{},!0),CDataClass.putData(t,"btnObjectDataAdd",this.btnObjectDataAdd.toData(),{},!0),CDataClass.putData(t,"btnObjectDataDelete",this.btnObjectDataDelete.toData(),{},!0),CDataClass.putData(t,"btnObjectCopy",this.btnObjectCopy.toData(),{},!0),CDataClass.putData(t,"btnObjectPaste",this.btnObjectPaste.toData(),{},!0),CDataClass.putData(t,"btnObjectTransformer",this.btnObjectTransformer.toData(),{},!0),CDataClass.putData(t,"pathEditor",this.pathEditor.toData(),{},!0),CDataClass.putData(t,"pathEditorToolbar",this.pathEditorToolbar.toData(),{},!0),CDataClass.putData(t,"btnNone",this.btnNone.toData(),{},!0),CDataClass.putData(t,"btnMoveTo",this.btnMoveTo.toData(),{},!0),CDataClass.putData(t,"btnLineTo",this.btnLineTo.toData(),{},!0),CDataClass.putData(t,"btnCurveTo",this.btnCurveTo.toData(),{},!0),CDataClass.putData(t,"btnApplyPosition",this.btnApplyPosition.toData(),{},!0),CDataClass.putData(t,"btnToolbarClose",this.btnToolbarClose.toData(),{},!0),CDataClass.putData(t,"properties",this.properties.toData(),{},!0),CDataClass.putData(t,"lTimelineScriptTop",this.lTimelineScriptTop.toData(),{},!0),CDataClass.putData(t,"btnTimelineScriptApply",this.btnTimelineScriptApply.toData(),{},!0),CDataClass.putData(t,"txtTimelineScript",this.txtTimelineScript.toData(),{},!0),CDataClass.putData(t,"objectsToolPosition",this.objectsTool.position.toData(),{},!0),CDataClass.putData(t,"propertyToolPosition",this.propertyTool.position.toData(),{},!0),CDataClass.putData(t,"timeAnimationToolPosition",this.timeAnimationTool.position.toData(),{},!0),CDataClass.putData(t,"timelineScriptToolPosition",this.timelineScriptTool.position.toData(),{},!0)}doFromData(t){super.doFromData(t),this.toolbar.fromData(CDataClass.getData(t,"toolbar",{},!0)),this.btnSave.fromData(CDataClass.getData(t,"btnSave",{},!0)),this.btnOpen.fromData(CDataClass.getData(t,"btnOpen",{},!0)),this.lblWidth.fromData(CDataClass.getData(t,"lblWidth",{},!0)),this.edtWidth.fromData(CDataClass.getData(t,"edtWidth",{},!0)),this.lblHeight.fromData(CDataClass.getData(t,"lblHeight",{},!0)),this.edtHeight.fromData(CDataClass.getData(t,"edtHeight",{},!0)),this.btnSize.fromData(CDataClass.getData(t,"btnSize",{},!0)),this.lLTop.fromData(CDataClass.getData(t,"lLTop",{},!0)),this.lClient.fromData(CDataClass.getData(t,"lClient",{},!0)),this.lBTop.fromData(CDataClass.getData(t,"lBTop",{},!0)),this.list.fromData(CDataClass.getData(t,"list",{},!0)),this.btnAddObject.fromData(CDataClass.getData(t,"btnAddObject",{},!0)),this.btnDeleteObject.fromData(CDataClass.getData(t,"btnDeleteObject",{},!0)),this.btnAddProperty.fromData(CDataClass.getData(t,"btnAddProperty",{},!0)),this.controlResizer.fromData(CDataClass.getData(t,"controlResizer",{},!0)),this.lBTopTime.fromData(CDataClass.getData(t,"lBTopTime",{},!0)),this.edtTimeFrom.fromData(CDataClass.getData(t,"edtTimeFrom",{},!0)),this.edtTimeTo.fromData(CDataClass.getData(t,"edtTimeTo",{},!0)),this.btnTimeApply.fromData(CDataClass.getData(t,"btnTimeApply",{},!0)),this.btnTimeLeft.fromData(CDataClass.getData(t,"btnTimeLeft",{},!0)),this.btnTimeRight.fromData(CDataClass.getData(t,"btnTimeRight",{},!0)),this.edtTime.fromData(CDataClass.getData(t,"edtTime",{},!0)),this.scrollTime.fromData(CDataClass.getData(t,"scrollTime",{},!0)),this.timeline.fromData(CDataClass.getData(t,"timeline",{},!0)),this.btnPropertyUp.fromData(CDataClass.getData(t,"btnPropertyUp",{},!0)),this.btnPropertyDown.fromData(CDataClass.getData(t,"btnPropertyDown",{},!0)),this.btnDeleteProperty.fromData(CDataClass.getData(t,"btnDeleteProperty",{},!0)),this.btnApply.fromData(CDataClass.getData(t,"btnApply",{},!0)),this.btnStart.fromData(CDataClass.getData(t,"btnStart",{},!0)),this.btnAnimationSpeedGraph.fromData(CDataClass.getData(t,"btnAnimationSpeedGraph",{},!0)),this.edtDuration.fromData(CDataClass.getData(t,"edtDuration",{},!0)),this.lblDuration.fromData(CDataClass.getData(t,"lblDuration",{},!0)),this.lCBottom.fromData(CDataClass.getData(t,"lCBottom",{},!0)),this.btnGraphEdit.fromData(CDataClass.getData(t,"btnGraphEdit",{},!0)),this.btnPositionEdit.fromData(CDataClass.getData(t,"btnPositionEdit",{},!0)),this.lBTop2.fromData(CDataClass.getData(t,"lBTop2",{},!0)),this.lblTag.fromData(CDataClass.getData(t,"lblTag",{},!0)),this.btnTagAdd.fromData(CDataClass.getData(t,"btnTagAdd",{},!0)),this.btnTagDelete.fromData(CDataClass.getData(t,"btnTagDelete",{},!0)),this.lblObject.fromData(CDataClass.getData(t,"lblObject",{},!0)),this.btnObjectDataAdd.fromData(CDataClass.getData(t,"btnObjectDataAdd",{},!0)),this.btnObjectDataDelete.fromData(CDataClass.getData(t,"btnObjectDataDelete",{},!0)),this.btnObjectCopy.fromData(CDataClass.getData(t,"btnObjectCopy",{},!0)),this.btnObjectPaste.fromData(CDataClass.getData(t,"btnObjectPaste",{},!0)),this.btnObjectTransformer.fromData(CDataClass.getData(t,"btnObjectTransformer",{},!0)),this.pathEditor.fromData(CDataClass.getData(t,"pathEditor",{},!0)),this.pathEditorToolbar.fromData(CDataClass.getData(t,"pathEditorToolbar",{},!0)),this.btnNone.fromData(CDataClass.getData(t,"btnNone",{},!0)),this.btnMoveTo.fromData(CDataClass.getData(t,"btnMoveTo",{},!0)),this.btnLineTo.fromData(CDataClass.getData(t,"btnLineTo",{},!0)),this.btnCurveTo.fromData(CDataClass.getData(t,"btnCurveTo",{},!0)),this.btnApplyPosition.fromData(CDataClass.getData(t,"btnApplyPosition",{},!0)),this.btnToolbarClose.fromData(CDataClass.getData(t,"btnToolbarClose",{},!0)),this.properties.fromData(CDataClass.getData(t,"properties",{},!0)),this.lTimelineScriptTop.fromData(CDataClass.getData(t,"lTimelineScriptTop",{},!0)),this.btnTimelineScriptApply.fromData(CDataClass.getData(t,"btnTimelineScriptApply",{},!0)),this.txtTimelineScript.fromData(CDataClass.getData(t,"txtTimelineScript",{},!0)),this.objectsTool.position.fromData(CDataClass.getData(t,"objectsToolPosition",{},!0)),this.propertyTool.position.fromData(CDataClass.getData(t,"propertyToolPosition",{},!0)),this.timeAnimationTool.position.fromData(CDataClass.getData(t,"timeAnimationToolPosition",{},!0)),this.timelineScriptTool.position.fromData(CDataClass.getData(t,"timelineScriptToolPosition",{},!0)),this.properties.tabButtons.visible=!1}doRemove(){this.frmGraph.remove(),this.objectsTool.remove(),this.propertyTool.remove(),this.timeAnimationTool.remove(),this.timelineScriptTool.remove(),this.startData.remove(),super.doRemove()}doSetAnimation(){}doAnimationSpeedGraphEdit(){let t=this,e=new CTimeSpeedGraphEditor(CSystem.desktopList.get(0).applicationLayer);e.showCenter(860,550,"시간 속도 편집기","remove"),e.editor.btnApply.onClick=async function(){let i=await e.editor.getGraphData();"string"==typeof i?CSystem.showMessage("에러",i):(t.con.sceneData.speedGraphData=i,t.con.sceneData.speedStartValue=parseFloat(e.editor.edtStartSpeed.text),t.con.sceneData.speedStopValue=parseFloat(e.editor.edtStopSpeed.text))}}doSetStart(){this.doSetTime(0)}doSetTime(t){let e=this.getSceneAnimation();e.doBeforeStart(),e.moveTime(t),e.remove()}async doSetSectionPosition(){if(null!=this.pathEditor.pathPointList){let t=CAssembly.getBezierPoints(this.pathEditor.pathPointList,1);if("string"==typeof t)CSystem.showMessage("에러",t);else{let e=this.getSelectedSection();if(null==e)CSystem.showMessage("경고","구간 애니메이션을 선택하세요.");else{e.positionPath.fromData(this.pathEditor.pathPointList.toData()),e.positionPath.movePoint(-(this.controlResizer.position.left+10),-(this.controlResizer.position.top+20));for(let e=0;e<t.length;e++)t[e].x-=this.controlResizer.position.left+10,t[e].y-=this.controlResizer.position.top+20,t[e].x*=this.con.orgPosition.width/this.con.position.width,t[e].y*=this.con.orgPosition.height/this.con.position.height;e.positionPoints=t,this.refreshGrid()}}}}doAddSection(){if(this.list.selectItems.length>0){let t=this;CSystem.prompt("Add section animation",["Property name","StartTime(ms)","Duration","Graph","StartValue","StopValue","Loop"],CSystem.browserCovers.get("cover"),function(e){let i=new CAnimationControlSceneSection;i.control=t.list.selectItems[0].value.asObject.control,i.controlName=t.list.selectItems[0].value.asObject.text,""==e[0]?i.property="Unknown":i.property=e[0],i.startTime=parseInt(e[1]),i.duration=parseInt(e[2]),i.graphData=e[3],i.startValue=parseFloat(e[4]),i.stopValue=parseFloat(e[5]),i.isLoop="Y"==e[6].toUpperCase(),t.con.sceneData.sections.add(i),t.refreshGrid()},["","0","200","line_10000.graph","0","0","N"],400)}}doDeleteSection(){if(-1!=this.timeline.row){for(let t=0;t<this.con.sceneData.sections.length;t++)if(this.con.sceneData.sections.get(t).control==this.timeline.cell(9,this.timeline.row)&&this.con.sceneData.sections.get(t).property==this.timeline.cell(1,this.timeline.row)){this.con.sceneData.sections.delete(t);break}this.refreshGrid()}}doTimeLineKeyDown(t){if(t.ctrlKey&&"C"==t.key.toUpperCase()&&5==this.timeline.column){let t={positionPoints:JSON.stringify(this.con.sceneData.sections.get(this.timeline.row).positionPoints),positionPath:this.con.sceneData.sections.get(this.timeline.row).positionPath.toData(),graphData:this.con.sceneData.sections.get(this.timeline.row).graphDataCopy(),graphPath:this.con.sceneData.sections.get(this.timeline.row).graphPath.toData(),tags:this.con.sceneData.sections.get(this.timeline.row).timeTagCopy()};CSystem.copyData=t}t.ctrlKey&&"V"==t.key.toUpperCase()&&5==this.timeline.column&&(this.con.sceneData.sections.get(this.timeline.row).positionPoints=JSON.parse(CSystem.copyData.positionPoints),this.con.sceneData.sections.get(this.timeline.row).positionPath.fromData(CSystem.copyData.positionPath),this.con.sceneData.sections.get(this.timeline.row).graphDataFromData(CSystem.copyData.graphData),this.con.sceneData.sections.get(this.timeline.row).graphPath.fromData(CSystem.copyData.graphPath),this.con.sceneData.sections.get(this.timeline.row).timeTagFromData(CSystem.copyData.tags),this.refreshGrid())}async doGraphEditorShow(t=!1){this.frmGraph.showCenter(860,550,"그래프 편집기","hide"),this.fraGraph.tagItem.pathData.clear();let e=this.getSelectedSection();if(null!=e&&(null!=this.fraGraph.pathData&&this.fraGraph.pathData.fromData(e.graphPath.toData()),t)){for(let t=0;t<e.timeTag.length;t++){let i=CCalc.crRange2Value(e.startTime,e.startTime+e.duration,e.timeTag[t].duration,0,this.fraGraph.pathGraphic.position.width),s=CCalc.crRange2Value(e.startTime,e.startTime+e.duration,e.timeTag[t].duration,0,this.fraGraph.pathGraphic.position.height);this.fraGraph.tagItem.pathData.addPointMoveTo(new CPoint(i,0)),this.fraGraph.tagItem.pathData.addPointLineTo(new CPoint(i,this.fraGraph.pathGraphic.position.height)),this.fraGraph.tagItem.pathData.addPointMoveTo(new CPoint(0,this.fraGraph.pathGraphic.position.height-s)),this.fraGraph.tagItem.pathData.addPointLineTo(new CPoint(this.fraGraph.pathGraphic.position.width,this.fraGraph.pathGraphic.position.height-s))}this.fraGraph.pathGraphic.draw()}}doPositionEdit(){if(this.pathEditor.visible)this.pathEditor.visible=!1;else{this.pathEditor.visible=!0,this.pathEditor.bringToFront(),this.pathEditor.pathPointList=this.pathEditor.layers.get(0).items.get(1).pathData,this.pathEditor.pathPointList.clear();let t=this.getSelectedSection();null!=t&&t.positionPoints.length>0&&null!=this.pathEditor.pathPointList&&(this.pathEditor.pathPointList.fromData(t.positionPath.toData()),this.pathEditor.pathPointList.movePoint(this.controlResizer.position.left+10,this.controlResizer.position.top+20)),this.pathEditor.refresh()}}doChangeTimeLineItem(t,e){let i=this.getSelectedSection();null!=i&&(this.pathEditor.visible=!0,this.pathEditor.bringToFront(),this.pathEditor.pathPointList=this.pathEditor.layers.get(0).items.get(1).pathData,this.pathEditor.pathPointList.clear(),this.pathEditor.pathPointList.fromData(i.positionPath.toData()),this.pathEditor.pathPointList.movePoint(this.controlResizer.position.left+10,this.controlResizer.position.top+20),this.pathEditor.refresh(),this.showObjectPanel(),this.txtTimelineScript.text=i.script)}doSelectItem(){this.list.selectItems.length>0&&(this.properties.clear(),this.properties.addInstance(this.list.selectItems[0].value.asObject.control))}doShowTransformer(){if(null!=this.objectPanel){let t=this.properties.propertyEditors.get(0).classInstance;this.transformer.parent=this.lClient,this.transformer.visible=!0,this.transformer.toolbar.position.align=EPositionAlign.BOTTOM,this.transformer.toolbar.position.margins.all=0,this.transformer.bringToFront(),this.transformer.setControl(t)}}doTransform(){if(this.list.selectItems.length>0){let t=this.list.selectItems[0].value.asObject.control;t.orgPathdataSet(),t.orgPosition.fromData(t.position.toData())}}doTimeLineEdit(t,e,i,s){for(let e=0;e<this.con.sceneData.sections.length;e++)if(this.con.sceneData.sections.get(e).control==this.timeline.cell(9,this.timeline.row)&&this.con.sceneData.sections.get(e).property==i){1==t&&(this.con.sceneData.sections.get(e).property=s),2==t&&(this.con.sceneData.sections.get(e).startTime=parseInt(s)),3==t&&(this.con.sceneData.sections.get(e).duration=parseInt(s)),4==t&&(this.con.sceneData.sections.get(e).graphData=s),6==t&&(this.con.sceneData.sections.get(e).startValue=parseFloat(s)),7==t&&(this.con.sceneData.sections.get(e).stopValue=parseFloat(s)),8==t&&(this.con.sceneData.sections.get(e).isLoop="Y"==s.toUpperCase());break}this.refreshGrid()}doScene(){this.doSetStart();let t=this.getSceneAnimation();t.onFinish=function(){t.remove()},t.start()}doAddTag(){let t=this.getSelectedSection();if(null!=t){let e=t,i=this;CSystem.prompt("타임태그 추가",["태그명","색상","시간"],CSystem.browserCovers.get("cover"),function(t){e.timeTag.push({tagName:t[0],tagColor:t[1],duration:parseInt(t[2])})},["tag","rgba(255,255,0,1)",i.edtTime.text])}}doTagDelete(){let t=this.getSelectedSection();null!=t&&(t.timeTag=[])}doObjectAdd(){let t=parseInt(this.edtTime.text),e=this.getSelectedSection();if(null!=e&&t>=e.startTime&&t<=e.startTime+e.duration&&null!=e.control){null==this.objectPanel&&this.showObjectPanel();let i=CCalc.crRange2Value(e.startTime,e.startTime+e.duration,t,0,1),s=this.startData.getObject(e.control.propertyName).copyTo();if(null!=s){s.parent=this.objectPanel,s.position.left+=this.controlResizer.position.left+10,s.position.top+=this.controlResizer.position.top+20,s.sectionT=i,s.centerX=e.control.position.left+e.control.transform.rotationPointX*e.control.position.width,s.centerY=e.control.position.top+e.control.transform.rotationPointY*e.control.position.height;let t=this;t.properties.clear(),t.properties.addInstance(s),s.onClick=function(){if(t.properties.clear(),t.properties.addInstance(s),null!=s){let e=s.centerX+t.controlResizer.position.left+10,i=s.centerY+t.controlResizer.position.top+20;s.position.left=e-s.transform.rotationPointX*s.position.width,s.position.top=i-s.transform.rotationPointY*s.position.height}},s.onDoubleClick=function(){null!=t.objectPanel&&t.objectPanel.setSection()}}}else alert("에러")}doObjectCopy(){if(this.properties.propertyEditors.get(0).classInstance instanceof CAnimationControl){let t=this.properties.propertyEditors.get(0).classInstance;null!=this.copyObject&&this.copyObject.remove(),this.copyObject=t.copyTo()}}doObjectPaste(){if(null!=this.copyObject){let t=parseInt(this.edtTime.text),e=this.getSelectedSection();if(null!=e&&t>=e.startTime&&t<=e.startTime+e.duration&&null!=e.control){null==this.objectPanel&&this.showObjectPanel();let i=CCalc.crRange2Value(e.startTime,e.startTime+e.duration,t,0,1),s=this.copyObject.copyTo();if(null!=s){s.parent=this.objectPanel,s.position.left+=this.controlResizer.position.left+10,s.position.top+=this.controlResizer.position.top+20,s.sectionT=i,s.centerX=e.control.position.left+e.control.transform.rotationPointX*e.control.position.width,s.centerY=e.control.position.top+e.control.transform.rotationPointY*e.control.position.height;let t=this;t.properties.clear(),t.properties.addInstance(s),s.onClick=function(){if(t.properties.clear(),t.properties.addInstance(s),null!=s){let e=s.centerX+t.controlResizer.position.left+10,i=s.centerY+t.controlResizer.position.top+20;s.position.left=e-s.transform.rotationPointX*s.position.width,s.position.top=i-s.transform.rotationPointY*s.position.height}},s.onDoubleClick=function(){null!=t.objectPanel&&t.objectPanel.setSection()}}}else alert("에러")}}doObjectDelete(){let t=this.properties.propertyEditors.get(0).classInstance;if(null!=t&&null!=this.objectPanel){let e=CSystem.getChildControls(this.objectPanel);for(let i=0;i<e.length;i++)e[i]instanceof CAnimationControl&&e[i]==t&&(e[i].remove(),this.properties.clear())}}doPropertyUp(){if(this.timeline.row>0){let t=this.timeline.row;this.con.sceneData.sections.swap(this.timeline.row,this.timeline.row-1),this.refreshGrid(),this.timeline.row=t-1}}doPropertyDown(){if(-1!=this.timeline.row&&this.timeline.row<this.timeline.length-1){let t=this.timeline.row;this.con.sceneData.sections.swap(this.timeline.row,this.timeline.row+1),this.refreshGrid(),this.timeline.row=t+1}}refresh(){this.list.clear(),function t(e,i){let s=i.addItem({text:e.propertyName,control:e});for(let i=0;i<e.objects.length;i++)t(e.objects.get(i),s.items)}(this.con,this.list.items),this.list.items.expandAll()}refreshGrid(){this.timeline.clear();for(let t=0;t<this.con.sceneData.sections.length;t++){let e=this.con.sceneData.sections.get(t),i="없음",s=this.con.sceneData.sections.get(t).graphData,a="";a="string"==typeof s?s:s.length+"";let o="N";this.con.sceneData.sections.get(t).isLoop&&(o="Y"),e.positionPoints.length>0&&(i="있음("+e.positionPoints.length+")"),this.timeline.add([this.con.sceneData.sections.get(t).controlName+"("+this.con.sceneData.sections.get(t).objectData.length+")",this.con.sceneData.sections.get(t).property,this.con.sceneData.sections.get(t).startTime,this.con.sceneData.sections.get(t).duration,a,i,this.con.sceneData.sections.get(t).startValue,this.con.sceneData.sections.get(t).stopValue,o,this.con.sceneData.sections.get(t).control])}}getSceneAnimation(){let t=new CSceneAnimator;return t.duration=parseInt(this.edtDuration.text),t.animationControl=this.con,t.timeSpeedGraphData=this.con.sceneData.speedGraphData,t.startTimeSpeed=this.con.sceneData.speedStartValue,t.stopTimeSpeed=this.con.sceneData.speedStopValue,t}scene(){this.doScene()}getSelectedSection(){for(let t=0;t<this.con.sceneData.sections.length;t++)if(this.con.sceneData.sections.get(t).control==this.timeline.cell(9,this.timeline.row)&&this.con.sceneData.sections.get(t).property==this.timeline.cell(1,this.timeline.row))return this.con.sceneData.sections.get(t)}loopObjects(t){if(this.list.selectItems.length>0){!function e(i){t(i);for(let t=0;t<i.objects.length;t++)e(i.objects.get(t))}(this.list.selectItems[0].value.asObject.control)}}showObjectPanel(){let t=this.getSelectedSection();if(null!=t){null!=this.objectPanel&&this.objectPanel.remove();let e=new CObjectPanel(this.lClient);e.editor=this,e.setObjects(t),e.bringToFront(),this.objectPanel=e}}}class CControls extends CTableData{constructor(){super(["control","id","element","className","controlNamePath","name"],["control","id","element","className","controlNamePath","name"],["object","id","controlNamePath"])}findControls(t){let e=new Array,i=this.find(t);for(let t=0;t<i.length;t++)e.push({control:i[t].get(0).asObject,id:i[t].get(1).asString,element:i[t].get(2).asObject,className:i[t].get(3).asString,controlNamePath:i[t].get(4).asString,name:i[t].get(5).asString});return e}addControl(t){CSystem.controls.add([t,t.id,t.controlElement,t.className,t.getNamPath(),t.name]),window[t.name]=t}deleteControl(t){let e=this.findIndexRow("control",t);this.delete(e),delete window[t.name]}getControlFromElement(t){let e=CSystem.controls.findControls([{columnName:"element",value:t}]);return e.length>0?e[0].control:void 0}getControlFromId(t){let e=CSystem.controls.findControls([{columnName:"id",value:t}]);return e.length>0?e[0].control:void 0}}class CSystem{static doAnimationFrame(t,e){try{CSystem.isDraw&&CSystem.doRequestLayersDraw();for(let i=0;i<CSystem.onAnimationFrame.length;i++)CSystem.onAnimationFrame[i](t,e)}catch(t){console.log("do animation frame error",t)}}static doRequestLayersDraw(){CSystem.requestDraw.size>0&&(CSystem.requestDraw.forEach(function(t){try{t.doDraw()}catch(t){console.log("layer draw error",t)}}),CSystem.requestDraw.clear())}static doResourceLoad(){for(let t=0;t<CSystem.requestResources.length;t++)CSystem.requestResources[t].doResource();CSystem.requestResources=[];for(let t=0;t<CSystem.onResourceLoad.length;t++)CSystem.onResourceLoad[t]()}static doGlobalPointerDown(t){let e=t.target;CSystem.hidePickups(e),CSystem.points.set(t.pointerId,t);for(let e=0;e<CSystem.onPointerDown.length;e++)CSystem.onPointerDown[e](t)}static doGlobalPointerMove(t){for(let e=0;e<CSystem.onPointerMove.length;e++)CSystem.onPointerMove[e](t)}static doGlobalPointerUp(t){for(let e=0;e<CSystem.onPointerUp.length;e++)CSystem.onPointerUp[e](t);CSystem.points.delete(t.pointerId)}static doGlobalPointerCancel(t){for(let e=0;e<CSystem.onPointerCancel.length;e++)CSystem.onPointerCancel[e](t);CSystem.points.delete(t.pointerId)}static hidePickups(t){let e=new Set,i=CSystem.controls.findControls([{columnName:"className",value:"CPickupControl"}]),s=CSystem.controls.findControls([{columnName:"className",value:"CPopup"}]);for(let t=0;t<s.length;t++)i.push(s[t]);for(let t=0;t<i.length;t++)e.add(i[t].control);if(0==e.size)return;let a,o=CSystem.controls.getControlFromElement(t),n=t;for(;null!=n;){if("CONTROL"==n.tagName){let t=CSystem.controls.getControlFromElement(n);if(t instanceof CPickupControl){a=t;break}}n=n.parentElement}e.forEach(function(t){null!=a?t!=a&&t.hide():null!=o&&t.ignoreControls.has(o)||t.hide()})}static getOverControls(t,e){let i=new Array;for(let s=0;s<CSystem.controls.length;s++){let a=CSystem.controls.getRow(s).get(0).asObject,o=a.getElementBounds(),n=0,r=0,A=o.left<=t.pageX&&o.right>=t.pageX&&o.top<=t.pageY&&o.bottom>=t.pageY;A&&(n=t.pageX-o.left,r=t.pageY-o.top);let h=!1;for(let t=0;t<e.length;t++)o.left<=e.get(t).point.pageX&&o.right>=e.get(t).point.pageX&&o.top<=e.get(t).point.pageY&&o.bottom>=e.get(t).point.pageY&&(h=!0,n=e.get(t).point.pageX-o.left,r=e.get(t).point.pageY-o.top);(A||h)&&i.push({control:a,x:n,y:r})}return i}static getControl(t){if(t instanceof HTMLElement){let e=this.controls.findIndex(2,t);if(e.length>0)return e[0].get(0).asObject}else{let e=this.controls.findIndex(1,t);if(e.length>0)return e[0].get(0).asObject}}static getControlsFromClassName(t){let e=new Array,i=CSystem.controls.findIndex(3,t);for(let t=0;t<i.length;t++)e.push(i[t].get(0).asObject);return e}static getControlsFromName(t){let e=new Array,i=CSystem.controls.findIndex(4,t);for(let t=0;t<i.length;t++)e.push(i[t].get(0).asObject);return e}static getBroControls(t){let e=new Array,i=t.parent;if(null!=i)for(let t=0;t<i.controlElement.children.length;t++){let s=i.controlElement.children[t];if("CONTROL"==s.tagName){let t=this.getControl(s);e.push(t)}}else if(null!=t.controlElement.parentElement)for(let i=0;i<t.controlElement.parentElement.children.length;i++){let s=t.controlElement.parentElement.children[i];if("CONTROL"==s.tagName){let t=this.getControl(s);e.push(t)}}return e}static getBroVisiblePositions(t){let e=new Array,i=CSystem.getBroControls(t);for(let t=0;t<i.length;t++)i[t].visible&&e.push(i[t].position);return e}static getChildControls(t){let e=new Array;for(let i=0;i<t.controlElement.children.length;i++){let s=t.controlElement.children[i];if("CONTROL"==s.tagName){let t=this.getControl(s);e.push(t)}}return e}static getAllChildControls(t){let e=new Array;function i(t,e){e.push(t);let s=CSystem.getChildControls(t);for(let t=0;t<s.length;t++)i(s[t],e)}let s=CSystem.getChildControls(t);for(let t=0;t<s.length;t++)i(s[t],e);return e}static findControls(t){let e=new Array;for(let i=0;i<t.children.length;i++){let s=t.children[i];if("CONTROL"==s.tagName){let t=this.getControl(s);e.push(t)}}return e}static async threadExec(t){}static scriptExec(t){let e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.innerText=t,e.appendChild(i)}static styleLoad(t){let e=document.getElementsByTagName("head")[0],i=document.createElement("style");i.innerText=t,e.appendChild(i)}static showBrowserCover(t,e,i=!0){let s=CSystem.browserCovers.get(t);null!=s&&(null!=e&&e(s),s.bringToFront(),s.position.left=0,s.position.top=0,s.position.width=window.innerWidth,s.position.height=window.innerHeight,s.showCover(i))}static hideBrowserCover(t){let e=CSystem.browserCovers.get(t);null!=e&&e.hideCover()}static getZPlus(){return CSystem.zPlus++,this.zPlus}static getZMinus(){return CSystem.zMinus--,CSystem.zMinus}static showMessage(t,e,i,s){let a=CSystem.browserCovers.get("cover");if(null!=a){let o=new CPanel(a),n=o.addLayer().addItem();n.fill.styleKind=EStyleKind.SOLID,n.fill.solidColor="#181818",n.radiusX=5,n.radiusY=5,o.position.align=EPositionAlign.CENTER,o.position.width=null==s?300:s;let r=new CLabel(o);r.position.align=EPositionAlign.TOP,r.position.height=40,r.textSet.fill.solidColor="#FFFFFF",r.text=t;let A=new CButton(r);A.resource="button8.control",A.position.align=EPositionAlign.RIGHT,A.position.width=50,A.position.margins.all=5,A.text="확인",A.onClick=function(){null!=a&&a.hideCover(),null!=i&&i()},(A=new CButton(r)).resource="button8.control",A.position.align=EPositionAlign.LEFT,A.position.width=50,A.position.margins.all=5,A.text="취소",A.onClick=function(){null!=a&&a.hideCover()};let h=new CLabel(o);h.position.align=EPositionAlign.CLIENT,h.textSet.fill.solidColor="#FFFFFF",h.text=e;let g=CStringUtil.getTextWidth(h.textSet,e),C=CStringUtil.getTextHeight(h.textSet,e);g+20>o.position.width&&(o.position.width=g+20),o.position.height=85,C+20>40&&(o.position.height=C+20+45),o.filter.filterSet.shadow=!0,o.filter.shadowX=0,o.filter.shadowY=0,a.onHide=function(){o.remove()},a.showCover()}}static confirm(t,e,i,s,a,o){let n=new CPanel(s),r=n.addLayer().addItem();r.fill.styleKind=EStyleKind.SOLID,r.fill.solidColor="#181818",r.radiusX=5,r.radiusY=5,n.position.align=EPositionAlign.CENTER,n.position.width=null==o?300:o;let A=new CLabel(n);A.position.align=EPositionAlign.TOP,A.position.height=40,A.textSet.fill.solidColor="#FFFFFF",A.text=t;let h=new CLabel(n);h.position.align=EPositionAlign.TOP,h.position.height=40,h.textSet.fill.solidColor="#FFFFFF",h.text=e;for(let t=0;t<i.length;t++){let e=new CButton(n);e.resource="button8.control",e.position.align=EPositionAlign.TOP,e.position.height=30,e.position.margins.all=5,e.position.margins.bottom=0,e.text=i[t],e.index=t,e.onClick=function(){s.hideCover(),a(e.index)}}n.position.height=35*i.length+85,n.filter.filterSet.shadow=!0,n.filter.shadowX=0,n.filter.shadowY=0,s.onHide=function(){n.remove()},s.showCover()}static prompt(t,e,i,s,a,o){let n=new CPanel(i),r=n.addLayer().addItem();r.fill.styleKind=EStyleKind.SOLID,r.fill.solidColor="#181818",r.radiusX=5,r.radiusY=5,n.position.align=EPositionAlign.CENTER,n.position.width=null==o?300:o;let A=new CLabel(n);A.position.align=EPositionAlign.TOP,A.position.height=40,A.textSet.fill.solidColor="#FFFFFF",A.text=t;let h=new CButton(A);h.resource="button8.control",h.position.align=EPositionAlign.RIGHT,h.position.width=50,h.position.margins.all=5,h.text="확인",h.onClick=function(){let t=new Array;for(let e=0;e<g.length;e++)t.push(g[e].value);null!=i&&i.hideCover(),s(t)},(h=new CButton(A)).resource="button8.control",h.position.align=EPositionAlign.LEFT,h.position.width=50,h.position.margins.all=5,h.text="취소",h.onClick=function(){null!=i&&i.hideCover()};let g=new Array;for(let t=0;t<e.length;t++){let i=new CLabelTextBox(n);i.textBox.resource="textbox32.control",i.textBox.position.width=200,i.textSet.fill.solidColor="#808080",i.position.align=EPositionAlign.TOP,i.position.height=30,i.position.margins.all=5,i.position.margins.bottom=0,i.label=e[t],g.push(i)}if(null!=a)for(let t=0;t<a.length;t++)g[t].value=a[t];n.position.height=35*e.length+45,n.filter.filterSet.shadow=!0,n.filter.shadowX=0,n.filter.shadowY=0,null!=i&&(i.onHide=function(){n.remove()},i.showCover())}static promptSystem(t,e,i,s,a){let o=CSystem.browserCovers.get("cover");null!=o&&CSystem.prompt(t,e,o,i,s,a)}static elementSendToBack(t){if(null!=t.parentElement){let e=t.parentElement;e.removeChild(t),e.prepend(t)}}static elementBrintToFront(t){if(null!=t.parentElement){let e=t.parentElement;e.removeChild(t),e.appendChild(t)}}static setClipborad(t){}static getClipboard(){return""}static init(t){let e=CSystem.resources.get(t);if(null!=e.init){return new Function(e.init)()}}static setToArray(t){let e=new Array;return t.forEach(function(t){e.push(t)}),e}static setFromArray(t,e){t.clear();for(let i=0;i<e.length;i++)t.add(e[i])}static uploadFiles(t){let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("webkitdirectory",""),e.setAttribute("directory",""),e.onchange=function(i){const s=e.files;null!=s&&null!=t&&t(s),e.remove()},e.click()}static uploadFilesEach(t){let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("webkitdirectory",""),e.setAttribute("directory",""),e.onchange=function(i){const s=e.files;if(null!=s)for(let e=0;e<s.length;e++)t(s[e]);e.remove()},e.click()}static saveAsFile(t,e){const i=new Blob([t],{type:"text/plain"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download=e,s.click(),URL.revokeObjectURL(s.href)}static saveBlobAsFile(t,e){var i=URL.createObjectURL(t),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",e),s.click(),s.remove(),URL.revokeObjectURL(i)}static loadFromFile(t){let e=document.createElement("input");e.type="file",e.click(),e.onchange=function(i){null!=e.files&&t(e.files[0])}}static loadFromFiles(t){let e=document.createElement("input");e.type="file",e.multiple=!0,e.click(),e.onchange=function(i){null!=e.files&&t(e.files)}}static async loadSystemResource(){CTimeChecker.startChecker(),await loadSystemResource(),console.log("system resource load",CTimeChecker.stopChecker())}static isDarkMode(){return!!window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}static setDesktopSize(t){if(null==t||"client"==t)for(let t=0;t<CSystem.desktopList.length;t++)CSystem.desktopList.get(t).position.left=0,CSystem.desktopList.get(t).position.top=0,CSystem.desktopList.get(t).position.width=window.innerWidth,CSystem.desktopList.get(t).position.height=window.innerHeight;else if("vert"==t){let t=window.innerHeight/CSystem.desktopList.length;for(let e=0;e<CSystem.desktopList.length;e++)CSystem.desktopList.get(e).position.left=0,CSystem.desktopList.get(e).position.top=e*t,CSystem.desktopList.get(e).position.width=window.innerWidth,CSystem.desktopList.get(e).position.height=t}else if("horz"==t){let t=window.innerWidth/CSystem.desktopList.length;for(let e=0;e<CSystem.desktopList.length;e++)CSystem.desktopList.get(e).position.left=e*t,CSystem.desktopList.get(e).position.top=0,CSystem.desktopList.get(e).position.width=t,CSystem.desktopList.get(e).position.height=window.innerHeight}else if("grid"==t){let t=Math.floor(Math.sqrt(CSystem.desktopList.length)),e=0,i=0,s=0,a=window.innerWidth/t,o=window.innerHeight/Math.ceil(CSystem.desktopList.length/t);for(;;){let n=i*a,r=s*o;if(CSystem.desktopList.get(e).position.left=n,CSystem.desktopList.get(e).position.top=r,CSystem.desktopList.get(e).position.width=a,CSystem.desktopList.get(e).position.height=o,++i>=t&&(i=0,s++),++e>=CSystem.desktopList.length)break}}}static newDesktop(){let t=new CDesktop(CSystem.clientBody,CSequence.getSequence("desktop"));return CSystem.desktopList.add(t),CSystem.setDesktopSize(CSystem.desktopAlignKind),t}}CSystem.points=new Map,CSystem.dragControls=new Set,CSystem.resourcesLoad=!1,CSystem.controls=new CControls,CSystem.resources=new Map,CSystem.requestResources=new Array,CSystem.clientBody=new CPanel,CSystem.desktopList=new CList,CSystem.desktopAlignKind="client",CSystem.browserCovers=new Map,CSystem.systemFont=new Map,CSystem.requestDraw=new CSet,CSystem.isDraw=!0,CSystem.onAnimationFrame=new Array,CSystem.onResourceLoad=new Array,CSystem.onResourceLazyLoad=new Array,CSystem.onPointerDown=new Array,CSystem.onPointerMove=new Array,CSystem.onPointerUp=new Array,CSystem.onPointerCancel=new Array,CSystem.zPlus=0,CSystem.zMinus=0;{CSystem.styleLoad("\n        .scrollno {-ms-overflow-style: none;scrollbar-width: none;}\n        .scrollno::-webkit-scrollbar {display: none;}\n    ");let t,e=document.createElement("canvas").getContext("2d");function _t(e){let i=(new Date).getTime();null!=t&&CSystem.doAnimationFrame(t,i),t=i,window.requestAnimationFrame(_t)}null!=e&&(CSystem.bufferingContext=e),window.requestAnimationFrame(_t),window.addEventListener("pointerdown",function(t){CSystem.doGlobalPointerDown(t)}),window.addEventListener("pointermove",function(t){CSystem.doGlobalPointerMove(t)}),window.addEventListener("pointerup",function(t){CSystem.doGlobalPointerUp(t)}),window.addEventListener("pointercancel",function(t){CSystem.doGlobalPointerCancel(t)})}